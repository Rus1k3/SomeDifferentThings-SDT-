<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover,maximum-scale=1,user-scalable=0">
  <meta name="referrer" content="unsafe-url">
  <title>Сам написал, сам погонял: Как я написал 3D-гонки «на жигулях» за неделю, полностью с нуля? / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }

    /* non-breaking hyphen */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/l/font?kit=KFOlCnqEu92Fr1MmEU9vBh0_IsHAlmrO6g&skey=ee881451c540fdec&v=v29) format('woff2');
      unicode-range: U+02011;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.0da14ebf.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.62e21544.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.04c2974e.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.5e6fa0f9.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/js/7298.c8f1d73c.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.0da14ebf.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.04c2974e.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.7af0b043442455352b71a8d77759e80f.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/companies\/timeweb\/articles\/764526\/"},"headline":"Сам написал, сам погонял: Как я написал 3D-гонки «на жигулях» за неделю, полностью с нуля?","datePublished":"2023-10-06T11:01:04+03:00","dateModified":"2023-10-06T11:18:34+03:00","author":{"@type":"Person","name":"Богдан"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Статьи про инди-разработку игр &mdash; это всегда интересно и занимательно. Но статьи про разработку игр с нуля, без каких-либо игровых движков &mdash; ещё интереснее! У м...","url":"https:\/\/habr.com\/ru\/companies\/timeweb\/articles\/764526\/#post-content-body","about":["c_timeweb","h_crazydev","h_vector_graphics","h_gamedev","h_games","f_develop","f_design","f_popsci"],"image":["https:\/\/habrastorage.org\/webt\/vz\/cw\/ag\/vzcwagsxhxidoafivthxxwegds8.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/b94\/d41\/7a0\/b94d417a0ec4106360d5ef3c882d079d.jpg","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/083\/0a7\/959\/0830a79598b160c83802ecf96a9b8318.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/f42\/635\/d4d\/f42635d4d45414edefa818651587eb40.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/d29\/dd9\/138\/d29dd91383553acab71edfa6839aa33f.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/2ae\/96f\/6d3\/2ae96f6d3e4ec2bf175ce297748a02b2.jpg","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/909\/c83\/e9d\/909c83e9d24639655b3c89a059f158f3.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/5f5\/60e\/b6d\/5f560eb6daeba3dac22b92b08c2e75f9.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/fcb\/edd\/2e5\/fcbedd2e566e048db43ecf7e6b94ecd4.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/2ae\/d46\/5de\/2aed465ded9f2b6a5cd8f53de34d4ce6.jpg","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/591\/b94\/407\/591b944072f06a07f69b5a789945686f.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/f85\/ec4\/a51\/f85ec4a51b9bbc93269b0c5f9dea3b2f.png","https:\/\/habrastorage.org\/webt\/b5\/pj\/of\/b5pjofdoxth14ro-rjsrn7sbmiy.png"]}</script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.144.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_com"><meta data-vue-meta="ssr" property="og:site_name" content="Хабр" data-vmid="og:site_name"><meta data-vue-meta="ssr" property="og:title" content="Сам написал, сам погонял: Как я написал 3D-гонки «на жигулях» за неделю, полностью с нуля?" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Сам написал, сам погонял: Как я написал 3D-гонки «на жигулях» за неделю, полностью с нуля?" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Сам написал, сам погонял: Как я написал 3D-гонки «на жигулях» за неделю, полностью с нуля?" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Статьи про инди-разработку игр — это всегда интересно и занимательно. Но статьи про разработку игр с нуля, без каких-либо игровых движков — ещё интереснее! У меня есть небольшой фетиш, заключающийся..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Статьи про инди-разработку игр — это всегда интересно и занимательно. Но статьи про разработку игр с нуля, без каких-либо игровых движков — ещё интереснее! У меня есть небольшой фетиш, заключающийся..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Статьи про инди-разработку игр — это всегда интересно и занимательно. Но статьи про разработку игр с нуля, без каких-либо игровых движков — ещё интереснее! У меня есть небольшой фетиш, заключающийся..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Статьи про инди-разработку игр — это всегда интересно и занимательно. Но статьи про разработку игр с нуля, без каких-либо игровых движков — ещё интереснее! У меня есть небольшой фетиш, заключающийся..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Статьи про инди-разработку игр — это всегда интересно и занимательно. Но статьи про разработку игр с нуля, без каких-либо игровых движков — ещё интереснее! У меня есть небольшой фетиш, заключающийся..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habr.com/share/publication/764526/e30f0ae9a3d207e6b4c7daa48a51c4d6/" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habr.com/share/publication/764526/e30f0ae9a3d207e6b4c7daa48a51c4d6/" data-vmid="og:image"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habr.com/share/publication/764526/e30f0ae9a3d207e6b4c7daa48a51c4d6/" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habr.com/share/publication/764526/e30f0ae9a3d207e6b4c7daa48a51c4d6/" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habr.com/share/publication/764526/e30f0ae9a3d207e6b4c7daa48a51c4d6/?format=vk" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="764526" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2023-10-06T08:01:04.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" content="https://habr.com/ru/companies/timeweb/articles/764526/" property="og:url" data-vmid="og:url"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" name="keywords" content="timeweb_статьи, bodyawm_ништячки, bodyawm_программирование, directx, d3d, direct3d9, opengl, графика, 3D, 3D графика, GPU, ненормальное программирование, игры, геймдев, gamedev, гонки, ваз, жигули, автоваз">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/publications/764526/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/companies/timeweb/articles/764526/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" rel="image_src" href="https://habr.com/share/publication/764526/e30f0ae9a3d207e6b4c7daa48a51c4d6/" data-vmid="image:href">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
  <script async src="https://unpkg.com/pwacompat" crossorigin="anonymous"></script>
  <script>window.yaContextCb = window.yaContextCb || []</script>
  <script src="https://yandex.ru/ads/system/context.js" async></script>
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <div class="tm-feature tm-feature"><!----></div> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><div class="tm-header__burger-nav"><button type="button" class="tm-header__button tm-header__button_burger"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon-burger"><title>Меню</title> <use xlink:href="/img/megazord-v28.2fb1b1c1..svg#header-burger"></use></svg></button></div> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <!----> <div class="tm-header-user-menu tm-header_user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search"><title>Поиск</title> <use xlink:href="/img/megazord-v28.2fb1b1c1..svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item"><button data-test-id="menu-toggle-guest" class="tm-header-user-menu__toggle"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_white"><title>Профиль</title> <use xlink:href="/img/megazord-v28.2fb1b1c1..svg#header-user"></use></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <!----> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" companyName="timeweb" data-async-called="true" class="tm-page"><div class="tm-page-width"><div class="tm-page__header"><!----></div> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><!----> <div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__icon pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v28.2fb1b1c1..svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet tm-article-snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/bodyawm/" title="bodyawm" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt height="32" src="//habrastorage.org/r/w64/getpro/habr/avatars/47b/885/a9d/47b885a9d839456736ae10b04a0c0011.jpg" width="32" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user tm-user-info__user_appearance-default"><a href="/ru/users/bodyawm/" class="tm-user-info__username">
      bodyawm
      <!----></a> <span class="tm-article-datetime-published"><time datetime="2023-10-06T08:01:04.000Z" title="2023-10-06, 11:01">6  окт   в 11:01</time></span></span></span></div> <!----></div> <h1 lang="ru" class="tm-title tm-title_h1"><span>Сам написал, сам погонял: Как я написал 3D-гонки «на жигулях» за неделю, полностью с нуля?</span></h1> <div class="tm-article-snippet__stats"><div class="tm-article-complexity tm-article-complexity_complexity-medium"><span class="tm-svg-icon__wrapper tm-article-complexity__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>Уровень сложности</title> <use xlink:href="/img/megazord-v28.2fb1b1c1..svg#complexity-medium"></use></svg></span> <span class="tm-article-complexity__label">
    Средний
  </span></div> <div class="tm-article-reading-time"><span class="tm-svg-icon__wrapper tm-article-reading-time__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>Время на прочтение</title> <use xlink:href="/img/megazord-v28.2fb1b1c1..svg#clock"></use></svg></span> <span class="tm-article-reading-time__label">
    28 мин
  </span></div> <span class="tm-icon-counter tm-data-icons__item"><svg height="24" width="24" class="tm-svg-img tm-icon-counter__icon"><title>Количество просмотров</title> <use xlink:href="/img/megazord-v28.2fb1b1c1..svg#counter-views"></use></svg> <span class="tm-icon-counter__value">18K</span></span></div> <div class="tm-publication-hubs__container"><div class="tm-publication-hubs"><span class="tm-publication-hub__link-container"><a href="/ru/companies/timeweb/articles/" class="router-link-active tm-publication-hub__link"><span>Блог компании Timeweb Cloud</span> <!----></a></span><span class="tm-publication-hub__link-container"><a href="/ru/hubs/crazydev/" class="tm-publication-hub__link"><span>Ненормальное программирование</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-publication-hub__link-container"><a href="/ru/hubs/vector_graphics/" class="tm-publication-hub__link"><span>Работа с векторной графикой</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-publication-hub__link-container"><a href="/ru/hubs/gamedev/" class="tm-publication-hub__link"><span>Разработка игр</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-publication-hub__link-container"><a href="/ru/hubs/games/" class="tm-publication-hub__link"><span>Игры и игровые консоли</span> <!----></a></span></div></div> <div class="tm-article-snippet__labels-container"><div class="tm-article-snippet__labels"><div class="tm-publication-label tm-publication-label_variant-case"><span>
    Кейс
  </span></div> </div></div> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div></div> <div id="post-content-body"><div><div class="article-formatted-body article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml"><img src="https://habrastorage.org/r/w1560/webt/vz/cw/ag/vzcwagsxhxidoafivthxxwegds8.png" alt="image" data-src="https://habrastorage.org/webt/vz/cw/ag/vzcwagsxhxidoafivthxxwegds8.png"/><br/>
<br/>
Статьи про инди-разработку игр — это всегда интересно и занимательно. Но статьи про разработку игр с нуля, без каких-либо игровых движков — ещё интереснее! У меня есть небольшой фетиш, заключающийся в разработке минимально играбельных 3D-демок, которые нормально работали бы даже на железе 20-летней давности. Полтора года назад, в мае 2022 года, я написал демку гоночной игры с очень знакомым всем нам сеттингом — жигули, девятки, десятки, и всё это даже с тюнингом! В этой статье я расскажу вам о разработке 3D-игр практически с нуля: рендерер, менеджер ресурсов, загрузка уровней и граф сцены, 3D-звук, ввод и интеграция физического движка. Интересна подробнейшая хаброторная статья о разработке игры с нуля? Тогда добро пожаловать!<a name="habracut"></a><br/>
<br/>
<h2><font color="#1c22be">❯</font> <font color="#454cee">Предыстория</font></h2><br/>
На момент написания статьи, я всё ещё остаюсь достаточно юным — буквально 5 дней назад мне исполнилось 22 года. Но если откатиться на 4 года назад и вспомнить момент наступления моего совершеннолетия, то на ум приходят сразу два значимых события: отец приходит в один день и говорит «открывай юлито, будем смотреть авто за 40 тыщ рублей». Понятное дело, что за эту сумму (~700$ по тому курсу) особо не разгуляешься, поэтому мой выбор пал на карбюраторную «семерочку», свою ровесницу (2001 год) синего цвета. Приехали с батькой смотреть на машину, обкатали и приняли решение — надо брать!<br/>
<br/>
<img src="https://habrastorage.org/r/w780q1/getpro/habr/post_images/b94/d41/7a0/b94d417a0ec4106360d5ef3c882d079d.jpg" alt="image" data-src="https://habrastorage.org/getpro/habr/post_images/b94/d41/7a0/b94d417a0ec4106360d5ef3c882d079d.jpg" data-blurred="true"/><br/>
<br/>
С тех пор я ездил на своем «тазе» и горя не знал — машинка не ломалась, ни разу не подводила, вложений в себя не требовала, а я начал все больше увлекаться автомобилями и изучать тематический материал. Со временем я полюбил и другие российские модели автомобилей, но особенно мне нравился АвтоВАЗ. В один момент, вспомнив про популярный и провальный некогда <a href="https://ru.wikipedia.org/wiki/LADA_Racing_Club">Lada Racing Club</a>, мне захотелось написать «гоночки на жигулях» самому, причём полностью с нуля. А поскольку нормального арта для города у меня не было, игру я решил назвать просто и понятно: «Ралли-кубок ТАЗов» :)<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/getpro/habr/post_images/083/0a7/959/0830a79598b160c83802ecf96a9b8318.png" alt="image" data-src="https://habrastorage.org/getpro/habr/post_images/083/0a7/959/0830a79598b160c83802ecf96a9b8318.png"/><br/>
<i>Поём всем Хабром!</i><br/>
<br/>
Но с чего начинать писать такой объемный проект самому? Тут нам, конечно же, нужен план. У меня уже был готовый самопальный 3D-фреймворк для игрушек, который я использовал в одной из прошлых демок: арена-шутер от первого лица с модельками из модов для Quake. Фреймворк был вполне рабочим, но требовал некоторой доработки для использования в «кубке тазов».<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/getpro/habr/post_images/f42/635/d4d/f42635d4d45414edefa818651587eb40.png" alt="image" data-src="https://habrastorage.org/getpro/habr/post_images/f42/635/d4d/f42635d4d45414edefa818651587eb40.png"/><br/>
<br/>
На момент начала разработки гоночки у меня уже были готовы следующие фишки:<br/>
<br/>
<ul>
<li> <b>Рендерер</b>: Direct3D9, причём полностью FFP — для того, чтобы игра запускалась даже на встройках Intel, где нормальной поддержки шейдеров до HD-серии вообще не было. Практически все текстурные техники работали через комбайнеры — дальний предок пиксельных шейдеров, где программист оперировал целыми стадиями пиксельного конвейера, а не писал программу напрямую, что накладывало множество ограничений. Поддерживались: многослойные материалы, однопроходной сплат-маппинг для плавного текстурирования ландшафтов, отражения в кубмапах, плавный морфинг (вершинная анимация) с линейной интерполяцией между кадрами, MSAA (это заслуга GAPI), отсечение невидимой геометрии по пирамиде видимости и примитивный альфа-блендинг с ручной сортировкой.</li>
<li> <b>Звук</b>: 3D-звук на DirectSound с позиционированием относительно источника звука, ускорением и т. п. Тут моей заслуги особо нет, кроме загрузчика wav-файлов я ничего не писал.</li>
<li> <b>Ввод</b>: WinAPI + DirectInput. Клавиатура опрашивалась с помощью классического GetAsyncKeyState, в то время как геймпады с помощью DirectInput. Была и абстракция осей ввода — дабы не адаптировать управление под кучу разных контроллеров.</li>
<li> <b>Менеджер ресурсов</b>: достаточно примитивен. К менеджеру ресурсов я отнесу и загрузчики — фреймворк поддерживал модели в форматах SMD (не анимированные меши, формат Half-life) и MD2 (анимированные меши, формат Quake 2, строго один материал на один меш), звуки — wav и простенький самопальный формат конфигов. Стандартный набор: трекинг ресурсов на слабых ссылках, пул ассетов для исключения дублирующейся загрузки и т. п.</li>
</ul><br/>
Фреймворк выдавал не слишком крутую графику:<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/getpro/habr/post_images/d29/dd9/138/d29dd91383553acab71edfa6839aa33f.png" alt="image" data-src="https://habrastorage.org/getpro/habr/post_images/d29/dd9/138/d29dd91383553acab71edfa6839aa33f.png"/><br/>
<br/>
Зато был очень простым «под капотом», имел довольно неплохую расширяемую архитектуру и в целом, на нем можно было запилить что-то прикольное. Где-то за неделю я запилил вот такую демку шутера от первого лица:<br/>
<br/>
<div class="oembed"><div class="tm-iframe_temp" data-src="https://embedd.srv.habr.com/iframe/6517f267962d8d30c11eaa78" data-style="" id="6517f267962d8d30c11eaa78" width=""></div></div>Игрушка даже на VIA UniChrome работала — последователе всем известного S3 Savage/S3 Virge!<br/>
<br/>
Минимальное приложение выглядело примерно так:<br/>
<br/>
<pre><code class="cs">public sealed class GameMain : IGameApp
    {
        private Mesh mesh;
        private Material material;
        private Vector3 pos = new Vector(0, 0, -150);

        public void OnCreate()
        {
           mesh = Engine.Current.Data.GetMesh("test.md2");
           material = new Material();
           material.Text = Engine.Current.Data.GetTexture("test.png");
        }

        public void OnDraw()
        {
           Engine.Current.Graphics.DrawMesh(mesh, 0, material, pos, Vector3.Zero);
        }

        public void OnExit()
        {

        }

        public void OnDrawGUI()
        {

        }

        public void OnUpdate()
        {

        }
    }
</code></pre><br/>
Приведённый выше код нарисует модельку с текстурой перед лицом игрока. Всё просто и понятно. Однако, как это всё работает «под капотом»? Давайте попробуем разобраться:<br/>
<br/>
<h2><font color="#1c22be">❯</font> <font color="#454cee">Основа и рендерер</font></h2><br/>
В своих играх я стараюсь придерживаться одной архитектуры: есть условный класс Engine, который управляет созданием платформозависимых окон, организацией главного цикла игры и инициализацией подсистем. Поскольку в одном процессе обычно запущен только один экземпляр игры (исключение — выделенные авторитарные серверы с комнатами, на манер <a href="https://ru.wikipedia.org/wiki/Left_4_Dead">Left 4 Dead</a>), сам по себе Engine является синглтоном и содержит в себе ссылки на все необходимые подмодули.<br/>
<br/>
<pre><code class="cs">
  Game.Initialize(new GameApp());
  Game.Current.Run();
</code></pre><br/>
Как я уже говорил выше, сам по себе рендерер построен на базе графического API Direct3D9. Выбор DX9 обусловлен его распространенностью на железе прошлых лет, хорошей совместимостью (DX9 легко запускается на железе времен DX8 и даже DX7) и иногда лучшей производительностью на видеочипах от ATI. По сути, всё начинается с создания контекста или устройства в терминологии DirectX: в параметрах создания контекста указывается ширина и высота вторичного буфера, желаемый уровень сглаживания MSAA, видеорежим и частота желаемая частота обновления экрана.<br/>
<br/>
<pre><code class="cs"> internal Graphics()
        {
            d3d = new Direct3D();

            CreateDevice();
            Camera = new Camera();
        }

        private void CreateDevice()
        {
            int msaa = PickBestMSAALevel(Game.Current.Config.GetInt("renderer.msaa"));

            bool fullScreen = Game.Current.Config.GetBool("renderer.fullScreen");

            PresentParameters pp = new PresentParameters();
            pp.AutoDepthStencilFormat = Format.D24S8;
            pp.BackBufferCount = 1;
            pp.BackBufferWidth = fullScreen ? Game.Current.Config.GetInt("engine.width") : Game.Current.Width;
            pp.BackBufferHeight = fullScreen ? Game.Current.Config.GetInt("engine.height") : Game.Current.Height;
            pp.BackBufferFormat = !fullScreen ? Format.Unknown : Format.X8R8G8B8;
            pp.DeviceWindowHandle = Game.Current.Form.Handle;
            pp.EnableAutoDepthStencil = true;
            pp.SwapEffect = SwapEffect.Discard;
            pp.Windowed = !fullScreen;
            pp.MultiSampleType = (MultisampleType)msaa;
            pp.FullScreenRefreshRateInHz = 0;
            pp.MultiSampleQuality = 0;
            pp.PresentFlags = PresentFlags.None;
            pp.PresentationInterval = PresentInterval.Default;
            pp.SwapEffect = SwapEffect.Discard;
            device = new Device(d3d, 0, DeviceType.Hardware, Game.Current.Form.Handle, CreateFlags.HardwareVertexProcessing | CreateFlags.PureDevice, pp);

            Game.Current.Log.Print("Initialized graphics");
            Game.Current.Log.Print("Total video memory: " + device.AvailableTextureMemory / 1024 / 1024);
        }

        private int PickBestMSAALevel(int level)
        {
            int ret = level;

            for (int i = level; i > 1; i--)
            {
                if (d3d.CheckDeviceMultisampleType(0, DeviceType.Hardware, Format.Unknown,
                    !Game.Current.Config.GetBool("renderer.fullScreen"), (MultisampleType)i))
                {
                    ret = i;

                    continue;
                }
            }

            if(ret != level)
                Game.Current.Log.Print("Picked MSAA x" + ret + " , as your GPU doesn't support desired level");

            return ret;
        }</code></pre><br/>
При создании контекста есть свои нюансы, которые необходимо учитывать — например, большинство встроенных видеокарт не поддерживают аппаратную обработку вершин (<b>D3DCREATE_HARDWARE_VERTEXPROCESSING</b>), из-за чего создание контекста будет заканчиваться ошибкой без соответствующего флага, разные видеокарты поддерживают разные форматы буфера глубины и трафарета (сейчас видеокарты нативно даже 24х-битный RGB для рендертаргетов не умеют использовать, только выравненный XRGB), а видеокарты до GF5xxx-GF6xxx не поддерживали Pure режим D3D, который предполагает, что программист возлагает всю обработку ошибок на себя, при этом количество проверок в самом GAPI уменьшается, благодаря чему мы получаем небольшой выигрыш в производительности.<br/>
<br/>
Важно так же отметить такой аспект, как управление ресурсами. К ресурсам видеокарты в терминологии старых GAPI относятся текстуры и буферы (как вершинные, так и индексные). В OpenGL особо нет такого понятия, как Device Lost. Если пользователь сворачивает ваше приложение из полноэкранного режима, или, например, видеодрайвер крашится — то GL сам должен позаботится о перезагрузке ресурсов обратно в видеопамять (исключение — Android и iOS, на мобилках контекст не уничтожится, но ресурсы будут выгружены и их хендлы станут некорректными). У D3D есть событие <b>Lost</b>, которое вызывается при потенциальной потере контекста — и его тоже нужно грамотно обрабатывать. Поэтому в D3D есть несколько пулов:<br/>
<br/>
<ul>
<li> Managed: D3D9 сам сохраняет копию текстуры или геометрии в ОЗУ, а затем при потере контекста пересоздаёт аппаратные буферы и перезагружает нужные данные сам.</li>
<li> Default: данные загружаются напрямую в видеопамять (в терминологии D3D — AGP memory), или, если видеопамяти не хватает — в ОЗУ, если видеокарта, конечно, поддерживает Shared Memory Architecture.</li>
<li> System: загрузка ресурсов только в ОЗУ. Этот пул обычно не используется в играх — слишком медленно.</li>
</ul><br/>
И грузить данные желательно в пул Default. Иначе при относительно большом количестве ресурсов, игра начнет «жрать» ОЗУ не в себя (пример — <a href="https://ru.wikipedia.org/wiki/Sid_Meier%E2%80%99s_Civilization_V">Civilization 5</a>). При потере контекста, ресурсы нужно перезагружать с диска «на горячую»!<br/>
<br/>
Переходим к самому важному — отрисовке геометрии. Для задания внешнего вида объектов на экране, используются так называемые <i>материалы</i>, которые содержат в себе данные о том, какая текстура должна быть наложена на объект, насколько объект отражает свет, какая техника должна использоваться и т. п. В современных движках система материалов обычно гибкая, поскольку шейдеры могут принимать самые разные параметры. В нашем случае шейдеров нет вообще, набор параметров фиксирован и зависит от видеокарты: стандартные техники типа повершинного затенения по Фонгу/Гуро, цвет объекта, туман и т. п. <br/>
<br/>
Формат материалов в фреймворке выглядит вот так:<br/>
<br/>
<pre><code class="cs">public struct Material
    {
        public Shader Shader; // Null for default

        public Texture Texture;
        public Texture Detail;
        public Texture Detail2;
        public Texture Reflection;

        public MaterialDetailType DetailType;
        public MaterialFlags Flags;

        public bool NonLit;
        public bool SampleShadowMap;

        public Color4 Color;
        public bool DepthTest;
        public bool DepthWrite; // false - write

        public Vector2 UVScale;

        public static Material CreateDefault()
        {
            return new Material()
            {
                Color = new Color4(1, 1, 1, 1)
            };
        }
    }</code></pre><br/>
Однако даже без шейдеров была возможность сделать относительно гибкую систему материалов — с помощью <i>комбайнеров</i>, как это делала Quake 3. Самые первые 3D-ускорители не поддерживали смешивание нескольких текстур за один вызов отрисовки, поэтому некоторые игры шли на ухищрение: к примеру Quake вручную сортировал геометрию по отдаленности без использования буфера глубины, он просто… накладывал альфа-блендингом ту же самую геометрию с затененной текстурой освещения (лайтмапа). Это называется многопроходной рендеринг. Комбайнеры, которые появились ближе к концу 90-х, позволяли смешивать несколько текстур с помощью различных операций (Add, Sub, Mul, Xor и т. п.), а также умножать финальный цвет на определенный коэффициент. Именно комбайнеры я использовал в своём фреймворке для реализации некоторых относительно сложных эффектов — например, плавное смешивание текстур на ландшафте:<br/>
<br/>
<pre><code class="cs">

private void SetRenderState(Material mat)
        {
            device.SetRenderState&lt;ZBufferType>(RenderState.ZEnable, !mat.DepthTest ? ZBufferType.UseZBuffer : ZBufferType.DontUseZBuffer);
            device.SetRenderState(RenderState.ZWriteEnable, !mat.DepthWrite);
        }

        private void SetShadowMeshState()
        {
            // Special case for shadow meshes
            device.SetRenderState(RenderState.ZWriteEnable, false);
            device.SetRenderState(RenderState.Lighting, false);

            device.SetRenderState(RenderState.TextureFactor, new Color4(0, 0, 0, 0.9f).ToBgra());
            device.SetTextureStageState(0, TextureStage.Constant, new Color4(0.1f, 0.1f, 0.1f, 1).ToBgra());
            device.SetTextureStageState(0, TextureStage.ColorOperation, TextureOperation.SelectArg1);
            device.SetTextureStageState(0, TextureStage.ColorArg1, TextureArgument.TFactor);
            device.SetTextureStageState(0, TextureStage.AlphaArg1, TextureArgument.TFactor);

            device.SetTextureStageState(1, TextureStage.ColorOperation, TextureOperation.Disable);
            device.SetTextureStageState(1, TextureStage.AlphaOperation, TextureOperation.Disable);
        }

        private void SetTextureState(Material mat)
        {
            for (int i = 1; i &lt; 4; i++)
            {
                device.SetTextureStageState(i, TextureStage.ColorOperation, TextureOperation.Disable);
                device.SetTextureStageState(i, TextureStage.AlphaOperation, TextureOperation.Disable);
                
                device.SetTextureStageState(0, TextureStage.AlphaArg1, TextureArgument.Texture);

                device.SetSamplerState(i, SamplerState.MinFilter, TextureFilter.Linear);
                device.SetSamplerState(i, SamplerState.MagFilter, TextureFilter.Anisotropic);
                device.SetSamplerState(i, SamplerState.MipFilter, TextureFilter.Linear);
            }

            device.SetRenderState(RenderState.TextureFactor, mat.Color.ToRgba());

            if (mat.DetailType != MaterialDetailType.BlendMask)
            {
                if (mat.Texture != null)
                {
                    device.SetTextureStageState(0, TextureStage.ColorOperation, TextureOperation.Modulate);
                    device.SetTextureStageState(0, TextureStage.ColorArg1, TextureArgument.Texture);
                    device.SetTextureStageState(0, TextureStage.ColorArg0, TextureArgument.Current);
                    device.SetTexture(0, mat.Texture.Handle);

                    if (mat.UVScale == Vector2.Zero)
                        mat.UVScale = new Vector2(1, 1);

                    device.SetTextureStageState(0, TextureStage.TextureTransformFlags, TextureTransform.Count2);
                    device.SetTransform(TransformState.Texture0, Matrix.Scaling(mat.UVScale.X, mat.UVScale.Y, 1));
                    device.SetTextureStageState(0, TextureStage.ResultArg, TextureArgument.Current);

                    device.SetSamplerState(0, SamplerState.MinFilter, TextureFilter.Linear);
                    device.SetSamplerState(0, SamplerState.MagFilter, TextureFilter.Anisotropic);
                    device.SetSamplerState(0, SamplerState.MipFilter, TextureFilter.Linear);
                }
            }
            else
            {
                if (mat.Texture != null)
                {
                    device.SetTextureStageState(0, TextureStage.ColorOperation, TextureOperation.SelectArg1);
                    device.SetTextureStageState(0, TextureStage.ColorArg1, TextureArgument.Texture);
                    device.SetTextureStageState(0, TextureStage.ColorArg0, TextureArgument.Current);
                    device.SetTexture(0, mat.Texture.Handle);

                    if (mat.UVScale == Vector2.Zero)
                        mat.UVScale = new Vector2(1, 1);

                    device.SetTextureStageState(0, TextureStage.TextureTransformFlags, TextureTransform.Count2);
                    device.SetTransform(TransformState.Texture0, Matrix.Scaling(mat.UVScale.X, mat.UVScale.Y, 1));
                    device.SetTextureStageState(0, TextureStage.ResultArg, TextureArgument.Temp);

                    device.SetSamplerState(0, SamplerState.MinFilter, TextureFilter.Linear);
                    device.SetSamplerState(0, SamplerState.MagFilter, TextureFilter.Anisotropic);
                    device.SetSamplerState(0, SamplerState.MipFilter, TextureFilter.Linear);
                }
            }

            if (mat.Detail != null)
            {
                if (mat.DetailType == MaterialDetailType.BlendMask)
                {
                    device.SetTexture(1, mat.Detail.Handle);

                    device.SetTextureStageState(1, TextureStage.ColorOperation, TextureOperation.SelectArg1);

                    device.SetTextureStageState(1, TextureStage.ColorArg0, TextureArgument.Current);
                    device.SetTextureStageState(1, TextureStage.ColorArg1, TextureArgument.Texture);
                    device.SetTextureStageState(1, TextureStage.ResultArg, TextureArgument.Temp);
                    device.SetTextureStageState(1, TextureStage.TexCoordIndex, 0);

                    device.SetSamplerState(1, SamplerState.MinFilter, TextureFilter.Linear);
                    device.SetSamplerState(1, SamplerState.MagFilter, TextureFilter.Anisotropic);
                    device.SetSamplerState(1, SamplerState.MipFilter, TextureFilter.Linear);
                }
                else
                {
                    device.SetTexture(1, mat.Detail.Handle);

                    device.SetTextureStageState(1, TextureStage.ColorOperation, TextureOperation.Modulate);

                    device.SetTextureStageState(1, TextureStage.ColorArg0, TextureArgument.Current);
                    device.SetTextureStageState(1, TextureStage.ColorArg1, TextureArgument.Texture);
                    device.SetTextureStageState(1, TextureStage.ResultArg, TextureArgument.Current);
                    device.SetTextureStageState(1, TextureStage.TexCoordIndex, 0);

                    device.SetSamplerState(1, SamplerState.MinFilter, TextureFilter.Linear);
                    device.SetSamplerState(1, SamplerState.MagFilter, TextureFilter.Anisotropic);
                    device.SetSamplerState(1, SamplerState.MipFilter, TextureFilter.Linear);
                }
            }
        }
</code></pre><br/>
<br/>
Основная проблема комбайнеров — каша из стейтов, поэтому код выглядит не особо презентабельно. Входная текстура-маска выглядит вот так:<br/>
<br/>
<img src="https://habrastorage.org/r/w780q1/getpro/habr/post_images/2ae/96f/6d3/2ae96f6d3e4ec2bf175ce297748a02b2.jpg" alt="image" data-src="https://habrastorage.org/getpro/habr/post_images/2ae/96f/6d3/2ae96f6d3e4ec2bf175ce297748a02b2.jpg" data-blurred="true"/><br/>
<br/>
Переходим к отрисовке. По сути, за рисование полигональной геометрии отвечает один метод — DrawMesh, с несколькими перегрузками (в идеале — основной должен принимать матрицу трансформации, а остальные принимать обычные World-space координаты, из которых будет построена матрица трансформации). В оригинале метод рисует геометрию с помощью DIPUP, поскольку практически вся геометрия в игре была анимирована (и анимация, само собой, обрабатывалась для каждой вершины софтварно, на ЦПУ, поэтому я не видел разницы между перезаливкой геометрии на GPU каждый кадр и DIPUP), однако в одном из бранчей фреймворка я переписал отрисовку статику на обычный DIP. Обратите внимание, что DIPUP для комплексной геометрии на старых GPU будет слишком медленным — когда-то этим страдал графический движок Irrlicht.<br/>
<br/>
<pre><code class="cs">
public void DrawMesh(Mesh mesh, int frame, Material mat, Vector3 position, Vector3 rotation, Vector3 scale,
            float morphFactor, Vector2 uv)
        {
            if(mesh != null)
            {
                Matrix matrix = Matrix.Identity;

                matrix *= Matrix.Scaling(scale) *
                    Matrix.RotationY(rotation.Y * Mathf.DegToRad) *
                    Matrix.RotationZ(rotation.Z * Mathf.DegToRad) *
                    Matrix.RotationX(rotation.X * Mathf.DegToRad) *
                    Matrix.Translation(position);

                if (mat.Flags.HasFlag(MaterialFlags.ShadowMesh))
                    matrix *= Matrix.Shadow(new Vector4(0, 1, 1, 0), new Plane(new Vector3(0, 1, 0), 0.95f)); // Note: This is hardcoded. We should calculate mesh height by it's bounding box(not implemented yet)

                device.SetTransform(TransformState.World, matrix);

                SetRenderState(mat);
                
                if (mat.Flags.HasFlag(MaterialFlags.ShadowMesh))
                {
                    SetShadowMeshState();
                }
                else
                {
                    device.SetRenderState(RenderState.Lighting, !mat.NonLit);
                    SetTextureState(mat);
                }

                bool lerpEnable = Game.Current.Config.GetBool("renderer.lerp");

                if (morphFactor > 0)
                {
                    if (frame &lt; mesh.Frames.Length &amp;&amp; lerpEnable)
                    {
                        mesh.UpdateMorphTarget(frame, frame + 1, morphFactor);
                    }
                }

                if (morphFactor > 0 &amp;&amp; lerpEnable)
                    device.DrawUserPrimitives&lt;Vertex>(PrimitiveType.TriangleList, mesh.Frames[frame].Length / 3, mesh.MorphVerts);
                else
                    device.DrawUserPrimitives&lt;Vertex>(PrimitiveType.TriangleList, mesh.Frames[frame].Length / 3, mesh.Frames[frame]);
            }
        }
</code></pre><br/>
В более позднем бранче добавилось отсечение по дистанции от «глаз» игрока и по пирамиде видимости. <br/>
<br/>
Переходим к анимации. Есть три основных метода анимации геометрии в играх:<br/>
<br/>
<ul>
<li> <b>Скиннинг</b>: анимация вершин относительно скелета модели. Очень хорошо подходит для различных персонажей. Весь скелет является иерархией, где каждый элемент трансформируется относительно позиции родителя, что позволяет легко интегрировать «скелетку» в граф-сцены самого движка (Unity — самый яркий пример). Иногда скелетку используют и для «неоживленных» предметов — например, анимация подвески авто.</li>
<li> <b>Морфинг</b>: классический способ анимации суть которого заключается в «запекании» всех кадров в виде множества мешей. Затем игра интерполирует вершины между кадрами анимации, благодаря чему достигается эффект плавности.</li>
<li> <b>Object-Transform</b>: классический метод иерархической анимации, очень похож на скиннинг, только трансформируются не сами вершины, а привязанные к ним объекты. Применялась, например, во многих играх на PS1 и в GTA III (замечали отсутствие плавности в местах сочленений персонажей — это и есть OT).</li>
</ul><br/>
Я не умею нормально работать с скиннингом моделей в 3D-редакторах и обычно не юзаю скиннинг в своих игрушках — для небольших демок хватает обычного морфинга с интерполяцией. Если интерполяцию не использовать, то анимация будет выглядеть топорно (в Quake 1 при отключении CVar'а такая и была):<br/>
<br/>
<div class="oembed"><div class="tm-iframe_temp" data-src="https://embedd.srv.habr.com/iframe/651d2daf72e08276d7ab0161" data-style="" id="651d2daf72e08276d7ab0161" width=""></div></div><pre><code class="cs">
internal void UpdateMorphTarget(int currFrame, int nextFrame, float time)
        {
            for(int i = 0; i &lt; MorphVerts.Length; i++)
            {
                MorphVerts[i].Position = Vector3.Lerp(Frames[currFrame][i].Position, Frames[nextFrame][i].Position, time);
                MorphVerts[i].Normal = Vector3.Lerp(Frames[currFrame][i].Normal, Frames[nextFrame][i].Normal, time);
                MorphVerts[i].UV = Frames[currFrame][i].UV;
            }
        }

</code></pre><br/>
Работа с анимациями выглядела вот так:<br/>
<br/>
<pre><code class="cs">
animator.AddSequence(new MeshSequence()
            {
                From = 0,
                To = 30,
                Speed = 0.5f
            }, "idle");

            animator.AddSequence(new MeshSequence()
            {
                From = 80,
                To = 90,
                Speed = 0.2f
            }, "attack");

            animator.AddSequence(new MeshSequence()
            {
                From = 80,
                To = 85,
                Speed = 0.2f
            }, "damage");

            animator.AddSequence(new MeshSequence()
            {
                From = 190,
                To = 197,
                Speed = 0.2f
            }, "kill");

            animator.AttachEventToSequence("kill", () =>
            {
                World.Destroy(this);
            });

            animator.AddSequence(new MeshSequence()
            {
                From = 40,
                To = 45,
                Speed = 0.14f
            }, "walk");
</code></pre><br/>
По сути, одна из самых комплексных частей — рендерер, готова. Однако в играх требуются и другие подсистемы, которые реализовать куда проще.<br/>
<br/>
<h2><font color="#1c22be">❯</font> <font color="#454cee">Звук и ввод</font></h2><br/>
Реализация звука в играх задача не шибко сложная, если дело не доходит до программной реализации микшера, 3D-позиционирования и различных эффектов. Большинству игр хватает обычного не-сжатого wav, звук в котором хранится в виде PCM-потока.<br/>
<br/>
В качестве API для звука я выбрал DirectSound. Очень удобное API, хотя сейчас его фактически вытеснил XAudio. DirectSound поддерживает любые звуковые карты, сам занимается микшированием звука, а в некоторых старичках типа AC97 умеет даже аппаратное ускорение! На современных машинах обычно микширование реализовано полностью софтварно, дабы не упираться в количество каналов/память на борту звукового адаптера, но в прошлом это помогало снизить нагрузку на процессор.<br/>
<br/>
В DirectSound есть два основных объекта: сам IDirectSound8, представляющий интерфейс к звуковой карте и управлению её ресурсами и <i>буфер</i> — который может быть подкреплен как собственными данными, так и данными из другого буфера. В играх, они делятся на три базовых понятия:<br/>
<br/>
<ul>
<li> <b>Слушатель</b>: описание позиции и иных параметров «слушателя» — позиции ушей в игровом мире. Обычно позиция слушателя совпадает с позицией игрока.</li>
<li> <b>Источник</b>: описание источника звука в 3D-пространстве. Например, если мимо нас проносится машина, то звуковому API необходимо знать позицию, ускорение и дальность звука, дабы правильно скорректировать звук в пространстве.</li>
<li> <b>Поток</b>: поток, который содержит в себе звук. Может быть как обычным буфером, куда звук уже предварительно загружен, так и потоковым буфером, куда загружается часть музыки или другого длинного трека.</li>
</ul><br/>
Переходим к реализации примитивного звука:<br/>
<br/>
<pre><code class="cs">public struct WavHeader
    {
        public int chunkId;
        public int chunkSize;
        public int format;
        public int subchunkid;
        public int subchunksize;
        public short audioFormat;
        public short numChannels;
        public int sampleRate;
        public int byteRate;
        public short blockAlign;
        public short bitsPerSample;
        public int subchunk2Id;
        public int subchunk2Size;
    }

    public enum AudioType
    {
        Music,
        Effect
    }

    public sealed class AudioStream
    {
        private SecondarySoundBuffer buffer;

        public AudioType Type
        {
            get;
            set;
        }

        public float Volume
        {
            get
            {
                return buffer.Volume;
            }
            set
            {
                buffer.Volume = (int)(value * -2000.0f);
            }
        }

        public bool IsPlaying
        {
            get
            {
                return buffer.Status == (int)BufferStatus.Playing;
            }
        }

        public AudioStream()
        {

        }

        public void Play()
        {
            buffer.Play(0, PlayFlags.None);
        }

        public void Stop()
        {
            buffer.Stop();
        }

        public void Upload(int sampleRate, int align, int channels, byte[] data, int size)
        {
            if(data != null)
            {
                if (buffer != null)
                    buffer.Dispose();

                SoundBufferDescription desc = new SoundBufferDescription();
                desc.Flags = BufferFlags.Software | BufferFlags.ControlVolume;
                desc.Format = new SharpDX.Multimedia.WaveFormat(sampleRate, align, channels);
                desc.BufferBytes = size;
                buffer = new SecondarySoundBuffer(Game.Current.AudioManager.ds, desc);

                DataStream ds2 = null;
                DataStream strm = buffer.Lock(0, size, LockFlags.EntireBuffer, out ds2);
                strm.WriteRange&lt;byte>(data, 0, size);
                buffer.Unlock(strm, ds2);
                
            }
        }

        public unsafe static AudioStream LoadWav(System.IO.Stream strm)
        {
            BinaryReader reader = new BinaryReader(strm);
            WavHeader hdr = new WavHeader()
            {
                chunkId = reader.ReadInt32(),
                chunkSize = reader.ReadInt32(),
                format = reader.ReadInt32(),
                subchunkid = reader.ReadInt32(),
                subchunksize = reader.ReadInt32(),
                audioFormat = reader.ReadInt16(),
                numChannels = reader.ReadInt16(),
                sampleRate = reader.ReadInt32(),
                byteRate = reader.ReadInt32(),
                blockAlign = reader.ReadInt16(),
                bitsPerSample = reader.ReadInt16(),
                subchunk2Id = reader.ReadInt32(),
                subchunk2Size = reader.ReadInt32()
            };

            byte[] data = new byte[strm.Length - sizeof(WavHeader)];
            reader.Read(data, 0, data.Length);

            AudioStream stream = new AudioStream();
            stream.Upload(hdr.sampleRate, hdr.bitsPerSample, hdr.numChannels, data, data.Length);

            return stream;
        }

        public unsafe static AudioStream LoadVorbis(System.IO.Stream strm)
        {
            Vorbis.Vorbis vorbisStrm = new Vorbis.Vorbis(strm);

            return null;
        }
    }

    public sealed class AudioManager
    {
        internal DirectSound ds;
        private PrimarySoundBuffer buffer;

        internal AudioManager()
        {
            ds = new DirectSound();
            ds.SetCooperativeLevel(Game.Current.Form.Handle, CooperativeLevel.Normal);

            SoundBufferDescription desc = new SoundBufferDescription();
            desc.Flags = BufferFlags.PrimaryBuffer;
            desc.Format = null;
            buffer = new PrimarySoundBuffer(ds, desc);
        }
    }
</code></pre><br/>
Теперь мы можем воспроизводить звуки в нашей игре!<br/>
<br/>
Однако, нам нужно чтобы пользователь мог взаимодействовать с нашей игрой. Для этого в разных системах есть различные API для взаимодействия с устройствами ввода. В случае Windows — это DirectInput для обычных USB-геймпадов и рулей, и XInput для геймпадов, совместимых с Xbox 360/Xbox One. Нажатия с клавиатуры можно обрабатывать двумя способами: с помощью событий WM_KEYDOWN и WM_KEYUP и функции WinAPI GetAsyncKeyState.<br/>
<br/>
Пока что мне нужна только клавиатура и мышь:<br/>
<br/>
<pre><code class="cs">
public sealed class Input
  {
    private KeyboardState[] keyboardState;

    [DllImport("user32.dll")]
    private static extern short GetAsyncKeyState(Keys vKey);

    public Input()
    {
      this.keyboardState = new KeyboardState[(int) byte.MaxValue];
    }

    private bool IsPressed(Keys key)
    {
       return ((int) Input.GetAsyncKeyState(key) &amp; 32768) > 0;
    } 

    public KeyboardState GetKeyState(Keys key)
    {
       return this.keyboardState[(int) key];
    }

    public Vector2 GetMousePosition()
    {
      if (Game.Current.Form.IsDisposed)
        return Vector2.Zero;
      Point client = Game.Current.Form.PointToClient(new Point(Cursor.Position.X, Cursor.Position.Y));
      return new Vector2((float) client.X, (float) client.Y);
    }

    internal void Update()
    {
      for (int key = 0; key &lt; (int) byte.MaxValue; ++key)
      {
        if (this.keyboardState[key] == KeyboardState.Hot)
          this.keyboardState[key] = KeyboardState.Pressed;
        if (this.keyboardState[key] == KeyboardState.Idle &amp;&amp; this.IsPressed((Keys) key))
          this.keyboardState[key] = KeyboardState.Hot;
        if (this.keyboardState[key] == KeyboardState.Pressed &amp;&amp; !this.IsPressed((Keys) key))
          this.keyboardState[key] = KeyboardState.Idle;
      }
    }
  }
</code></pre><br/>
В идеале обработку ввода лучше абстрагировать от физических устройств взаимодействия. Для этого вводятся понятия осей, кнопок действий и т. п. Желательно сразу продумать, как игра будет работать с геймпадом и уже затем назначать кнопкам на клавиатуре действия абстрактного геймпада.<br/>
<br/>
Ну что ж, самый базовый фреймворк для игр у нас есть. Пора переходить к написанию самой игры!<br/>
<br/>
<h2><font color="#1c22be">❯</font> <font color="#454cee">Редактор уровней</font></h2><br/>
Поскольку у фреймворка нет какого-либо своего графа сцены, я реализовываю механизм загрузки уровней в каждой игре с нуля — под конкретные нужды. В какой-то игре нужен стриминг для открытого мира, в другой — быстрая загрузка уровней, где есть множество объектов с разными параметрами. Изначально я использовал Blender в качестве редактора уровней и экспортировал карты небольшим скриптом, который сохранял основные параметры в файл.<br/>
<br/>
Однако блендер (особенно 2.79 и ниже) не очень удобный редактор для работы с достаточно большими картами. Поэтому в определенный момент встал вопрос с организацией графа сцены и собственного редактора карт.<br/>
<br/>
Граф сцены и графом то не назовешь — это просто линейный список объектов, которые присутствуют на сцене. Каждый объект наследуется от базового абстрактного типа Entity, если это «невидимый» объект, или PhysicsEntity, если объект должен интегрироваться с физическим движком. У базового объекта есть только имя и флаг выборки в редакторе.<br/>
<br/>
<pre><code class="cs">
  public abstract class Entity
  {
    public string Name { get; set; }

    public bool IsSelected { get; set; }

    public virtual void Update()
    {
    }

    public virtual void Draw()
    {
    }

    public virtual void TransparentDraw()
    {
    }

    public virtual void Destroy()
    {
    }

    public override string ToString() => this.Name;
  }
}
</code></pre><br/>
Вообще, для редактирования уровней можно хоть редактор Unity использовать, предварительно написав экспортер в самопальный формат. Однако я решил реализовать свой редактор: как обычное Windows Forms приложение + панель, в которую движок рендерит картинку. В его реализации нет ничего необычного: он точно также загружает уровень, как и основная игра, но при этом не создаёт игрока и ботов и имеет свободную камеру.<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/getpro/habr/post_images/909/c83/e9d/909c83e9d24639655b3c89a059f158f3.png" alt="image" data-src="https://habrastorage.org/getpro/habr/post_images/909/c83/e9d/909c83e9d24639655b3c89a059f158f3.png"/><br/>
<br/>
Формат уровней примитивный донельзя. В процессе разработки небольших игрушек я обычно следую принципу KISS и не люблю распыляться сложными сериализаторами/десериализаторами и прочими заморочками, реализовывая лишь самые необходимый функционал. Формат карт — текстовый, одна линия на один объект:<br/>
<br/>
<pre><code class="cs">p ferns 0 0 10.8 0 0 0 1</code></pre><br/>
<br/>
Где p — «класс» объекта, в случае p — это Prop, «декорация».<br/>
ferns — модель пропа. При этом сами пропы описаны в отдельных текстовых файлах, где в виде key-value значений хранятся настройки коллизии, материала, текстуры и т. п.<br/>
XYZ — позиция в мире.<br/>
XYZ — поворот в мировых координатах, задаётся в углах Эйлера (это только для статики, которая не подвержена Gimbal Lock, под капотом вся работа идёт с кватернионами).<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/getpro/habr/post_images/5f5/60e/b6d/5f560eb6daeba3dac22b92b08c2e75f9.png" alt="image" data-src="https://habrastorage.org/getpro/habr/post_images/5f5/60e/b6d/5f560eb6daeba3dac22b92b08c2e75f9.png"/><br/>
<br/>
<h2><font color="#1c22be">❯</font> <font color="#454cee">Физика автомобилей</font></h2><br/>
После того, как граф сцены был готов, я приступил к реализации физики автомобилей. Но как я уже говорил, физический движок я использовал готовый — т. е. вся работа по резолвингу столкновений, распаралелливанию вычислений и Joint'ам сводилась чисто к нему. Я лишь использовав физику колеса, реализовал поведение машинки, внеся в него некоторые изменения: в основном — вынес в публичные свойства параметры трения колеса. <br/>
<br/>
<img src="https://habrastorage.org/r/w1560/getpro/habr/post_images/fcb/edd/2e5/fcbedd2e566e048db43ecf7e6b94ecd4.png" alt="image" data-src="https://habrastorage.org/getpro/habr/post_images/fcb/edd/2e5/fcbedd2e566e048db43ecf7e6b94ecd4.png"/><br/>
<br/>
Само колесо реализовано по классическому принципу рейкастинга — колесо пускает под себя лучи и определяет трение относительно поверхности, на котором стоит, при этом двигая остальное тело используя собственное ускорение. Сейчас в играх для более точной симуляции используется Pacejka Magic Formula — формула, позволяющая рассчитать физически корректное поведение покрышки с различными диаметрами.<br/>
<br/>
Поскольку класс сущности машинки слишком большой и требует контроля самых разных аспектов (коробка передач, аспекты тюнинга, отрисовка и материалы), я вынес часть физики в отдельный класс CarPhysics:<br/>
<br/>
<pre><code class="cs">
public sealed class CarPhysics
  {
    private AudioStream[] hitSounds;
    private AudioSource srcHit;

    public Wheel[] Wheels { get; private set; }

    public Rigidbody Rigidbody { get; set; }

    public float MaxSteerAngle { get; set; }

    public float Acceleration { get; set; }

    public float MaxSpeed { get; set; }

    public Car Car { get; private set; }

    internal CarPhysics(Car car)
    {
      this.Car = car;
      this.Wheels = new Wheel[4];
      this.hitSounds = new AudioStream[3]
      {
        Game.Current.Data.GetAudioStream("sound/hit1.wav"),
        Game.Current.Data.GetAudioStream("sound/hit2.wav"),
        Game.Current.Data.GetAudioStream("sound/hit3.wav")
      };
      this.Car.game.track.JWorld.Events.BodiesBeginCollide += new Action&lt;RigidBody, RigidBody>(this.OnCollide);
    }

    private void OnCollide(RigidBody arg1, RigidBody arg2)
    {
      if (arg1 != this.Rigidbody.Body &amp;&amp; arg2 != this.Rigidbody.Body)
        return;
      new AudioSource(this.hitSounds[new Random().Next(0, this.hitSounds.Length - 1)])
      {
        Position = this.Rigidbody.Position,
        Velocity = new Vector3(this.Rigidbody.Body.LinearVelocity.X, this.Rigidbody.Body.LinearVelocity.Y, this.Rigidbody.Body.LinearVelocity.Z)
      }.Play();
    }

    public void Move(float gas, float steer)
    {
      if (this.Wheels[0] != null &amp;&amp; this.Wheels[1] != null)
      {
        this.Wheels[0].SteerAngle = steer * this.MaxSteerAngle;
        this.Wheels[1].SteerAngle = steer * this.MaxSteerAngle;
      }
      this.Wheels[0].AddTorque(gas * this.Acceleration);
      this.Wheels[1].AddTorque(gas * this.Acceleration);
      this.Wheels[2].AddTorque(gas * this.Acceleration);
      this.Wheels[3].AddTorque(gas * this.Acceleration);

      this.Rigidbody.Body.LinearVelocity = new 
                JVector(Mathf.Clamp(this.Rigidbody.Body.LinearVelocity.X, -this.MaxSpeed, 
                this.MaxSpeed), Mathf.Clamp(this.Rigidbody.Body.LinearVelocity.Y, -this.MaxSpeed, 
                this.MaxSpeed), Mathf.Clamp(this.Rigidbody.Body.LinearVelocity.Z, -this.MaxSpeed, 
                this.MaxSpeed));
    }

    public void PreStep(float step)
    {
      for (int index = 0; index &lt; this.Wheels.Length; ++index)
      {
        if (this.Wheels[index] != null)
          this.Wheels[index].PreStep(step);
      }
    }

    public void PostStep(float step)
    {
      for (int index = 0; index &lt; this.Wheels.Length; ++index)
      {
        if (this.Wheels[index] != null)
          this.Wheels[index].PostStep(step);
      }
    }
  }
</code></pre><br/>
Как можно видеть из метода Move, наша машинка полноприводная и имеет две управляющие оси (передние, само собой). Конфигурацию привода легко можно модифицировать в будущем.<br/>
Коллизия кузова машинки — обычный OBB прямоугольник, ну или «коробка».<br/>
<br/>
А вот как это работает на практике:<br/>
<br/>
<div class="oembed"><div class="tm-iframe_temp" data-src="https://embedd.srv.habr.com/iframe/651d45f76f566b30a56f6ce7" data-style="" id="651d45f76f566b30a56f6ce7" width=""></div></div>Пока что гонки на утюгах. Но ездит же. :))<br/>
Но с кем мы гоняемся?<br/>
<br/>
<h2><font color="#1c22be">❯</font> <font color="#454cee">Боты</font></h2><br/>
Я не стал называть этот раздел ИИ — боты в игре слишком примитивные. Здесь нет никакого поиска пути, боты просто ездят по заранее отмеченным точкам на карте, которые называются <br/>
<i>вейпоинтами</i>. Это стандартная практика во многих гонках, однако её реализация отличается от игры к игре. Вообще, для гонок есть несколько общеизвестных практик реализации навигации противников:<br/>
<br/>
<ul>
<li> <b>Вейпоинты с поиском путей</b>: довольно комплексный метод, который позволяет сделать, например, гонки в открытом городе, где боты сами смогут находить путь к чекпоинтам. Подобный способ используется для гонок в GTA, например. Строго говоря, сам по себе поиск путей — это тоже набор чекпоинтов и преград, поэтому для такого метода навигации необходимо довольно большое количество информации (пути для трафика, светофоры и т. п).</li>
<li> <b>Вручную раставленые вейпоинты</b>: классика. Левелдизайнер вручную расставляет вейпоинты и задает им параметры: например, на этом повороте нужно притормозить, а на этой прямой можно поддать газку.</li>
<li> <b>Заранее записанные пути</b>: способ с вейпоинтами, где разработчики сначала сами катаются по трассе, стараясь выбить лучшее время, а затем используют записанный набор вейпоинтов для противников.</li>
</ul><br/>
При этом некоторые разработчики не стесняются красивых фейков: реализация реалистичного входа в поворот с крутой физикой может быть сложной, особенно когда боты «тупые», поэтому в некоторых играх ботам намеренно подкручивали управляемость или максимальную скорость. Помните, как быстро нагоняли соперники в NFS Underground? Вот то-то же. :)<br/>
<br/>
<div class="oembed"><div class="tm-iframe_temp" data-src="https://embedd.srv.habr.com/iframe/651d4d052fbe8876a6177c9d" data-style="" id="651d4d052fbe8876a6177c9d" width=""></div></div>Некоторые могут вообще записать фейковый трек, по которым машина будет просто скользить, без учета физики авто. Но «беспалевные» реализации этого способа я пока не видел.<br/>
По настоящему «трушный» способ — это когда противники используют всё те же способы, которые использует игрок — т. е. также «нажимают» на виртуальные кнопки и управляют осями автомобиля. Кроме того, частенько каждому сопернику подмешивают дополнительный фактор, куда он будет ехать — иначе машинки будут толпиться друг за другом и будет выглядеть не интересно.<br/>
Я использую классические вейпоинты с подсказками.<br/>
<br/>
<div class="oembed"><div class="tm-iframe_temp" data-src="https://embedd.srv.habr.com/iframe/651d4f516f566b30a56f72b9" data-style="" id="651d4f516f566b30a56f72b9" width=""></div></div>Сначала нам необходимо получить угол между машинкой игрока и вейпоинтом. Для этого нам нужно перевести координаты текущего вейпоинта в локальные координаты машинки с учетом её поворота (т. е. относительно неё и её Forward-вектора). Поскольку поворот автомобиля считается в кватернионах, нам нужно помножить матрицу поворота на матрицу позиции машинки в мире и умножить позицию вейпоинта используя полученную инвертированную матрицу. Звучит сложно, на деле легко:<br/>
<br/>
<pre><code class="cs">
private Vector3 WorldToLocalSpace(Vector3 worldPoint)
    {
      Matrix transform = Matrix.Invert(Matrix.RotationQuaternion(Rigidbody.Rotation) * Matrix.Translation(Rigidbody.Position));
      Vector4 vector4 = Vector4.Transform(new Vector4(worldPoint, 1f), transform);
      return new Vector3(vector4.X, vector4.Y, vector4.Z);
    }
</code></pre><br/>
Если очень условно, то это выражение эквивалентно a — b с учетом поворота. Поскольку мы вычислили локальные координаты вейпоинта, нам остаётся только вычислить угол между ними с помощью классического atan2 и перевести радианы в градусы:<br/>
<br/>
<pre><code class="cs">private float AngleBetween(Vector3 v1)
    {
      return (float) Math.Atan2((double) v1.X, (double) v1.Z) * 57.29578f;
    }</code></pre><br/>
Полностью логика бота выглядит так:<br/>
<br/>
<pre><code class="cs">
RaceManager race = this.race;
      if (race.Waypoints.Count &lt; 1)
        return;
      Vector3 worldPoint = race.Waypoints[this.CurrentWaypoint].Position + this.MixFactor;
      Vector3 position = this.Rigidbody.Position;
      if ((double) Vector3.Distance(this.Rigidbody.Position, worldPoint) &lt; 15.0)
      {
        ++this.CurrentWaypoint;
        this.MixFactor = new Random().NextFloat(-4.5f, 4.5f);
        if (this.CurrentWaypoint == race.Waypoints.Count)
        {
          if (!race.IsRaceEnded)
            race.IsAIComeFirst = true;
          this.CurrentWaypoint = 0;
        }
        Console.WriteLine("Reached waypoint");
      }
      float gas = 1f;
      if (race.Waypoints[this.CurrentWaypoint].Flags.HasFlag((Enum) WaypointFlags.SlowDown))
        gas = 0.45f;
      this.wv = this.WorldToLocalSpace(worldPoint);
      float val = this.AngleBetween(-this.WorldToLocalSpace(worldPoint));
      this.Move(gas, Mathf.Clamp(val, -1f, 1f));
</code></pre><br/>
Легко и просто, да?<br/>
<br/>
<h2><font color="#1c22be">❯</font> <font color="#454cee">Гараж и гонки</font></h2><br/>
Какой интерес в гонках без… гонок? Поскольку у меня не было особо ассетов для создания пригорода, я решил сделать пересеченную местность. А на пересеченной местности у нас есть как кольцевые гонки, так и спринт — от точки до точки.<br/>
<br/>
<img src="https://habrastorage.org/r/w780q1/getpro/habr/post_images/2ae/d46/5de/2aed465ded9f2b6a5cd8f53de34d4ce6.jpg" alt="image" data-src="https://habrastorage.org/getpro/habr/post_images/2ae/d46/5de/2aed465ded9f2b6a5cd8f53de34d4ce6.jpg" data-blurred="true"/><br/>
<br/>
Помимо этого, в игре должен быть гараж, где игрок мог бы купить новую машину или тюнинговать текущую. В начале игры выдавалась бы старая дедова копейка (модельки Оки не нашел), а то и Москвич, а потом игрок выигрывал бы в гонках и получал возможности про прокачке тачек и покупке новых. Эээх, лавры Lada Racing Club не дали покоя!<br/>
<br/>
Начал я с реализации гаража. Сам по себе гараж — отдельный уровень, который обрабатывается своим контроллером, также в гараже применяется самый первый доступный UI в фреймворке — меню со списками. Сам гараж поделен на множество подменю: тюнинг, гонки и автосалон.<br/>
<br/>
<pre><code class="cs">this.uiColor = new Color4(0.5f, 0.5f, 1f, 1f);
      this.uiRaces = new UIMenu();
      for (int index = 0; index &lt; 3; ++index)
      {
        RaceParameters p = this.GenerateRace();
        this.uiRaces.AddItem(p.Name, (Action) (() => this.game.StartRace(p)), this.uiColor);
      }
      this.uiUpgrades = new UIMenu[7];
      for (int index1 = 0; index1 &lt; this.uiUpgrades.Length; ++index1)
      {
        this.uiUpgrades[index1] = new UIMenu();
        for (int index2 = 0; index2 &lt; this.playerCar.CarInfo.Parts.Count; ++index2)
        {
          if (this.playerCar.CarInfo.Parts[index2].Class == index1)
          {
            string text = string.Format("{0} - {1}руб.", (object) this.playerCar.CarInfo.Parts[index2].Name, (object) this.playerCar.CarInfo.Parts[index2].Price);
            int partId = index2;
            this.uiUpgrades[index1].AddItem(text, (Action) (() => this.OnPurchasePart(partId)), this.uiColor);
          }
        }
        this.uiUpgrades[index1].AddItem("Вернуться", (Action) (() => this.currMenu = this.uiUpgrade), this.uiColor);
      }
      this.uiPaintBooth = new UIMenu();
      this.uiUpgrade = new UIMenu();
      this.uiUpgrade.AddItem("Блок цилиндров", (Action) (() => this.currMenu = this.uiUpgrades[0]), this.uiColor);
      this.uiUpgrade.AddItem("Топливная система", (Action) (() => this.currMenu = this.uiUpgrades[1]), this.uiColor);
      this.uiUpgrade.AddItem("Валы", (Action) (() => this.currMenu = this.uiUpgrades[2]), this.uiColor);
      this.uiUpgrade.AddItem("Зажигание", (Action) (() => this.currMenu = this.uiUpgrades[3]), this.uiColor);
      this.uiUpgrade.AddItem("Турбонаддув", (Action) (() => this.currMenu = this.uiUpgrades[4]), this.uiColor);
      this.uiUpgrade.AddItem("Трансмиссия", (Action) (() => this.currMenu = this.uiUpgrades[5]), this.uiColor);
      this.uiUpgrade.AddItem("Шины", (Action) (() => this.currMenu = this.uiUpgrades[6]), this.uiColor);
      this.uiUpgrade.AddItem("Высота пружин", (Action) (() => { }), this.uiColor);
      this.uiUpgrade.AddItem("Покраска", (Action) (() => this.currentState = GarageState.PaintBooth), this.uiColor);
      this.uiUpgrade.AddItem("Вернуться", (Action) (() => this.currMenu = this.uiMain), this.uiColor);
      this.InitCarDealer();
      this.uiMain = new UIMenu();
      this.uiMain.AddItem("События", (Action) (() => this.currMenu = this.uiRaces), this.uiColor);
      this.uiMain.AddItem("Тюнинг", (Action) (() => this.currMenu = this.uiUpgrade), this.uiColor);
      this.uiMain.AddItem("Автосалон", (Action) (() =>
      {
        this.currMenu = this.uiCarDealer;
        this.playerCar.Destroy();
        this.playerCar = (Car) null;
      }), this.uiColor);
      this.uiMain.AddItem("Статистика", (Action) (() => { }), this.uiColor);
      this.uiMain.AddItem("Главное меню", (Action) (() => { }), this.uiColor);
      this.currMenu = this.uiMain;</code></pre><br/>
Параллельно с гаражом, была проработана система тюнячек — они тоже описывались в простых текстовых файлах и так или иначе влияли на ходовые качества машины. Правда, визуального тюнинга не было предусмотрена — некому моделлить апгрейды. :(<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/getpro/habr/post_images/591/b94/407/591b944072f06a07f69b5a789945686f.png" alt="image" data-src="https://habrastorage.org/getpro/habr/post_images/591/b94/407/591b944072f06a07f69b5a789945686f.png"/><br/>
<br/>
Сами гонки можно было начать, обратившись к RaceManager и передав структуру RaceParameters:<br/>
<br/>
<pre><code class="cs">public struct RaceParameters
  {
    public string Name;
    public string Mode;
    public int NumOpponents;
    public int Difficulty;
    public int Prize;
    public int ProgressAffection;
  }</code></pre><br/>
После этого, игра загружала уровень, создавала ботов на месте spawnPoint (игрок оказывался, как обычно, последним) и запускала гонку. <br/>
<br/>
<img src="https://habrastorage.org/r/w1560/getpro/habr/post_images/f85/ec4/a51/f85ec4a51b9bbc93269b0c5f9dea3b2f.png" alt="image" data-src="https://habrastorage.org/getpro/habr/post_images/f85/ec4/a51/f85ec4a51b9bbc93269b0c5f9dea3b2f.png"/><br/>
<br/>
<pre><code class="cs">public void Begin(RaceParameters param)
    {
      this.Parameters = param;
      this.Cars = new Car[8];
      this.game.track.Load(param.Name);
      foreach (PhysicsEntity entity in this.game.track.FindEntities("waypoint", true))
      {
        Prop prop = (Prop) entity;
        this.Waypoints.Add(new Waypoint()
        {
          Position = entity.Rigidbody.Position,
          Flags = (WaypointFlags) prop.Flags
        });
      }
      PhysicsEntity playerStart = this.FindPlayerStart();
      if (playerStart == null)
        Game.Current.Log.Print("Warning: No player start!");
      this.Cars[0] = new Car(this.game, this.game.PlayerProfile.Car.Name, false);
      this.Cars[0].Rigidbody.Position = playerStart.Rigidbody.Position;
      this.Cars[0].Rigidbody.Rotation = playerStart.Rigidbody.Rotation;
      PhysicsEntity[] entities = this.game.track.FindEntities("startMark");
      string[] carList = Car.GetCarList();
      this.carPositions = new int[entities.Length + 1];
      for (int index = 0; index &lt; entities.Length; ++index)
      {
        this.carPositions[index] = index + 1;
        this.Cars[index + 1] = (Car) new AICar(this.game, this, carList[new Random(DateTime.Now.Millisecond).Next(0, carList.Length - 1)], false);
        this.Cars[index + 1].SetColor(Car.Colors[new Random(DateTime.Now.Millisecond + index).Next(0, Car.Colors.Length - 2)]);
        this.Cars[index + 1].Rigidbody.Position = entities[index].Rigidbody.Position;
        this.Cars[index + 1].Rigidbody.Rotation = entities[index].Rigidbody.Rotation;
        this.Cars[index + 1].PlayerName = RaceManager.Names[index];
      }
      this.isPlayerCarControllable = true;
    }</code></pre><br/>
А затем каждый кадр просчитывала позиции каждого участника гонки:<br/>
<br/>
<pre><code class="cs">private void CalculateCarPlaces()
    {
      Array.Sort&lt;int>(this.carPositions, (Comparison&lt;int>) ((a, b) =>
      {
        int index;
        if (this.Cars[a] is AICar)
          index = ((AICar) this.Cars[a]).CurrentWaypoint;
        else
          index = this.CurrentCheckpoint;
        int num1;
        if (this.Cars[b] is AICar)
          num1 = ((AICar) this.Cars[b]).CurrentWaypoint;
        else
          num1 = this.CurrentCheckpoint;
        float num2 = Vector3.Distance(this.Cars[a].Rigidbody.Position, this.Waypoints[index].Position);
        float num3 = Vector3.Distance(this.Cars[b].Rigidbody.Position, this.Waypoints[index].Position);
        if (index > num1)
          return 1;
        if (index &lt; num1)
          return -1;
        if ((double) num2 > (double) num3)
          return 1;
        if ((double) num2 &lt; (double) num3)
          return -1;
        return 0;
      }));
    }</code></pre><br/>
Всё! Логикой движения и всем остальным заправляли уже боты. Хотя, там и был костыль на первых этапах, который помечает флаг конца гонки, в остальном — функционал гоночек рабочий. :)<br/>
<br/>
Вот мы и дошли до этапа, когда простенькая, но рабочая демка игры у нас уже есть! Игра запускается на GF4, однако работает не совсем корректно — но оптимизировать её под видеокарты тех лет не составит труда (в основном — пережать текстуры, убрать некоторые техники на комбайнерах и запечь статические пропы в батчи).<br/>
<br/>
<h2><font color="#1c22be">❯</font> <font color="#454cee">Заключение</font></h2><br/>
Вот так я и написал гоночки за неделю. Время разработки демки с нуля до состояния, которое вы видите в статье — всего неделю. Да, за это время реально написать прототип гоночной игры. И я ведь знаю, что в комментариях игру будут сравнивать с Lada Racing Club и шутить о сроках её разработки — ведь в этом и суть! Слишком мало реально прикольных ламповых гоночек на жигулях. Вот что у меня получилось в итоге:<br/>
<br/>
<div class="oembed"><div class="tm-iframe_temp" data-src="https://embedd.srv.habr.com/iframe/651d54f8962d8d30c121302e" data-style="" id="651d54f8962d8d30c121302e" width=""></div></div><br/>
<br/>
Исходниками игры я конечно же поделюсь: тык на GitHub.<br/>
А вот линки на загрузку демки:<br/>
<br/>
<a href="https://disk.yandex.ru/d/6znB5UdBq3XqRA">Гоночки</a><br/>
<br/>
<a href="https://disk.yandex.ru/d/m2yemH3wx04NfQ">Шутан</a><br/>
<br/>
Ну а для меня это был своеобразный челлендж. И я его выполнил — у меня получилась рабочая демка на выходе! Я вижу что вам, моим читателям, интересна тематика самопальной разработки игр. Судя по комментариям, вам нравится тематика геймдева, программирования графики и разработки игр. Темой одной из следующих статей может стать описание архитектуры графических ускорителей конца 90х, история их API (без D3D) и написание 3D-игры для 3dfx Voodoo с нуля, на базе Glide!<br/>
<br/>
Кроме того, я хотел бы рассказать о графическом API известного многим «3D декселератора» S3 Virge. Интересна ли вам такая рубрика? Пишите в комментариях!<br/>
<br/>
<hr/><br/>
<h4><font color="#454cee">Возможно, захочется почитать и это:</font><br/>
<br/>
<ul>
<li>➤ <a href="https://habr.com/ru/companies/timeweb/articles/754588/">Сам написал, сам поиграл: как я написал 2D-игру для Android полностью с нуля, весом менее 1мб?</a></li>
<li>➤ <a href="https://habr.com/ru/companies/timeweb/articles/751606/">Переделываем настенное зеркало во многофункциональное устройство</a></li>
<li>➤ <a href="https://habr.com/ru/companies/timeweb/articles/760800/">Техническое обслуживание вместо ремастеринга. Как спасти старые ПК-игры на новой ОС</a></li>
<li>➤<a href="https://habr.com/ru/companies/timeweb/articles/751604/"> Исходники закрыты, но мы не сдадимся: Пишем полностью нативное GUI-приложение под No-Name смартфон без Android</a></li>
<li>➤ <a href="https://habr.com/ru/companies/timeweb/articles/764232/">Как создавалась System Shock</a></li>
</ul><br/>
<a href="https://timeweb.cloud/vds-vps?utm_source=habr&amp;utm_medium=banner&amp;utm_campaign"><img src="https://habrastorage.org/r/w1560/webt/b5/pj/of/b5pjofdoxth14ro-rjsrn7sbmiy.png" data-src="https://habrastorage.org/webt/b5/pj/of/b5pjofdoxth14ro-rjsrn7sbmiy.png"/></a></h4></div></div></div> <!----> <!----></div> <!----> <div class="tm-article-poll-container"><div class="tm-article-poll tm-article-poll_variant-bordered"><div class="tm-notice tm-article-poll__notice tm-notice_positive"><!----> <div class="tm-notice__inner"><!----> <div class="tm-notice__content"><span>Только зарегистрированные пользователи могут участвовать в опросе. <a rel="nofollow" href="/kek/v1/auth/habrahabr/?back=/ru/companies/timeweb/articles/764526/&hl=ru">Войдите</a>, пожалуйста.</span></div></div></div> <div class="tm-article-poll__header">Хабраторно?</div> <div class="tm-article-poll__answers"><div class="tm-article-poll__answer"><div class="tm-article-poll__answer-data"><span class="tm-article-poll__answer-percent tm-article-poll__answer-percent_winning">
            83.24%
          </span> <span class="tm-article-poll__answer-label">Ууух, хабраторно!!! Как на старый Хабр попал.</span> <span class="tm-article-poll__answer-votes">
            149
          </span></div> <div class="tm-article-poll__answer-bar"><div class="tm-article-poll__answer-progress tm-article-poll__answer-progress_winning" style="width:83.24%;"></div></div></div><div class="tm-article-poll__answer"><div class="tm-article-poll__answer-data"><span class="tm-article-poll__answer-percent">
            13.41%
          </span> <span class="tm-article-poll__answer-label">Почти хабраторно. Нужно больше хабраторности.</span> <span class="tm-article-poll__answer-votes">
            24
          </span></div> <div class="tm-article-poll__answer-bar"><div class="tm-article-poll__answer-progress" style="width:13.41%;"></div></div></div><div class="tm-article-poll__answer"><div class="tm-article-poll__answer-data"><span class="tm-article-poll__answer-percent">
            3.35%
          </span> <span class="tm-article-poll__answer-label">Нет, и близко не хабраторно!!!</span> <span class="tm-article-poll__answer-votes">
            6
          </span></div> <div class="tm-article-poll__answer-bar"><div class="tm-article-poll__answer-progress" style="width:3.35%;"></div></div></div></div> <div class="tm-article-poll__stats">
       Проголосовали 179 пользователей. 

       Воздержались 49 пользователей. 
    </div></div><div class="tm-article-poll tm-article-poll_variant-bordered"><div class="tm-notice tm-article-poll__notice tm-notice_positive"><!----> <div class="tm-notice__inner"><!----> <div class="tm-notice__content"><span>Только зарегистрированные пользователи могут участвовать в опросе. <a rel="nofollow" href="/kek/v1/auth/habrahabr/?back=/ru/companies/timeweb/articles/764526/&hl=ru">Войдите</a>, пожалуйста.</span></div></div></div> <div class="tm-article-poll__header">Интересна ли вам рубрика о разработке игр и программировании графики?</div> <div class="tm-article-poll__answers"><div class="tm-article-poll__answer"><div class="tm-article-poll__answer-data"><span class="tm-article-poll__answer-percent tm-article-poll__answer-percent_winning">
            95.76%
          </span> <span class="tm-article-poll__answer-label">Да! С удовольствием почитаю!</span> <span class="tm-article-poll__answer-votes">
            158
          </span></div> <div class="tm-article-poll__answer-bar"><div class="tm-article-poll__answer-progress tm-article-poll__answer-progress_winning" style="width:95.76%;"></div></div></div><div class="tm-article-poll__answer"><div class="tm-article-poll__answer-data"><span class="tm-article-poll__answer-percent">
            4.24%
          </span> <span class="tm-article-poll__answer-label">Нет. Не интересна совсем.</span> <span class="tm-article-poll__answer-votes">
            7
          </span></div> <div class="tm-article-poll__answer-bar"><div class="tm-article-poll__answer-progress" style="width:4.24%;"></div></div></div></div> <div class="tm-article-poll__stats">
       Проголосовали 165 пользователей. 

       Воздержались 42 пользователя. 
    </div></div></div></div> <!----> <div class="tm-article-presenter__meta"><div class="tm-article-presenter__meta-list tm-separated-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Btimeweb_%D1%81%D1%82%D0%B0%D1%82%D1%8C%D0%B8%5D" class="tm-tags-list__link">timeweb_статьи</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bbodyawm_%D0%BD%D0%B8%D1%88%D1%82%D1%8F%D1%87%D0%BA%D0%B8%5D" class="tm-tags-list__link">bodyawm_ништячки</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bbodyawm_%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%5D" class="tm-tags-list__link">bodyawm_программирование</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bdirectx%5D" class="tm-tags-list__link">directx</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bd3d%5D" class="tm-tags-list__link">d3d</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bdirect3d9%5D" class="tm-tags-list__link">direct3d9</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bopengl%5D" class="tm-tags-list__link">opengl</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0%5D" class="tm-tags-list__link">графика</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B3D%5D" class="tm-tags-list__link">3D</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B3D%20%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0%5D" class="tm-tags-list__link">3D графика</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BGPU%5D" class="tm-tags-list__link">GPU</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BD%D0%B5%D0%BD%D0%BE%D1%80%D0%BC%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%5D" class="tm-tags-list__link">ненормальное программирование</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B8%D0%B3%D1%80%D1%8B%5D" class="tm-tags-list__link">игры</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B3%D0%B5%D0%B9%D0%BC%D0%B4%D0%B5%D0%B2%5D" class="tm-tags-list__link">геймдев</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bgamedev%5D" class="tm-tags-list__link">gamedev</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B3%D0%BE%D0%BD%D0%BA%D0%B8%5D" class="tm-tags-list__link">гонки</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B2%D0%B0%D0%B7%5D" class="tm-tags-list__link">ваз</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B6%D0%B8%D0%B3%D1%83%D0%BB%D0%B8%5D" class="tm-tags-list__link">жигули</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B0%D0%B2%D1%82%D0%BE%D0%B2%D0%B0%D0%B7%5D" class="tm-tags-list__link">автоваз</a></li> <!----></ul></div> <div class="tm-article-presenter__meta-list tm-separated-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/companies/timeweb/articles/" class="tm-hubs-list__link router-link-active">Блог компании Timeweb Cloud</a></li><li class="tm-separated-list__item"><a href="/ru/hubs/crazydev/" class="tm-hubs-list__link">Ненормальное программирование</a></li><li class="tm-separated-list__item"><a href="/ru/hubs/vector_graphics/" class="tm-hubs-list__link">Работа с векторной графикой</a></li><li class="tm-separated-list__item"><a href="/ru/hubs/gamedev/" class="tm-hubs-list__link">Разработка игр</a></li><li class="tm-separated-list__item"><a href="/ru/hubs/games/" class="tm-hubs-list__link">Игры и игровые консоли</a></li> <!----></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="24" width="24" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon tm-votes-meter__icon_appearance-article"><title>Всего голосов 120: ↑120 и ↓0</title> <use xlink:href="/img/megazord-v28.2fb1b1c1..svg#counter-rating"></use></svg> <span title="Всего голосов 120: ↑120 и ↓0" class="tm-votes-meter__value tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_appearance-article tm-votes-meter__value_rating">+120</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <!----> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v28.2fb1b1c1..svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    91
  </span></button> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="tm-sharing__icon"><path fill="currentColor" d="M13.8 13.8V18l7.2-6.6L13.8 5v3.9C5 8.9 3 18.6 3 18.6c2.5-4.4 6-4.8 10.8-4.8z"></path></svg></button> <DIV class="v-portal" style="display:none;"></DIV></div> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/companies/timeweb/articles/764526/comments/" class="tm-article-comments-counter-link__link"><svg height="24" width="24" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v28.2fb1b1c1..svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      48
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></div></div>  <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <div></div> <section class="tm-block tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"><div class="tm-article-author__company"><div class="tm-article-author__company-card"><div class="tm-company-snippet"><a href="/ru/companies/timeweb/profile/" class="tm-company-snippet__logo-link"><div class="tm-entity-image"><img alt height="40" src="//habrastorage.org/getpro/habr/company/348/5e5/ddc/3485e5ddc997087058a03fd7327e3844.png" width="40" class="tm-entity-image__pic"></div></a> <div class="tm-company-snippet__info"><a href="/ru/companies/timeweb/profile/" class="tm-company-snippet__title">Timeweb Cloud</a> <div class="tm-company-snippet__description">Строим лучший IaaS в России</div></div></div> <div class="tm-article-author__buttons"><!----> <!----></div></div> <!----> <div class="tm-article-author__separator"></div></div> <div class="tm-user-card tm-article-author__user-card tm-user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/bodyawm/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt src="//habrastorage.org/getpro/habr/avatars/47b/885/a9d/47b885a9d839456736ae10b04a0c0011.jpg" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 430 голосов " class="tm-counter-container tm-karma tm-karma"><div class="tm-counter-container__header"><div class="tm-karma__votes tm-karma__votes_positive">
      318
    </div></div> <div class="tm-counter-container__footer"><div class="tm-karma__text">
      Карма
    </div> <DIV class="v-portal" style="display:none;"></DIV></div></div> <div title="Рейтинг пользователя" class="tm-counter-container"><div class="tm-counter-container__header"> <div class="tm-votes-lever tm-votes-lever tm-votes-lever_appearance-rating"><!----> <div class="tm-votes-lever__score tm-votes-lever__score tm-votes-lever__score_appearance-rating"><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter tm-votes-lever__score-counter_rating">
        332.1
      </span></div> <!----></div></div> <div class="tm-counter-container__footer"><span class="tm-rating__text tm-rating__text">
      Рейтинг
    </span></div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title tm-user-card__title_variant-article"><span class="tm-user-card__name tm-user-card__name tm-user-card__name_variant-article">Богдан</span> <a href="/ru/users/bodyawm/" class="tm-user-card__nickname tm-user-card__nickname tm-user-card__nickname_variant-article">
          @bodyawm
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info tm-user-card__short-info_variant-article">Программист, железнячник. Донаты идут на контент!</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <button type="submit" class="tm-user-card__button btn btn_transparent btn_small">
      Задонатить
    </button> <!----> <!----></div></div> <div class="tm-article-author__user-contacts"><a href="https://vk.com/monobogdan" rel="noopener" target="_blank" class="tm-article-author__contact">
      ВКонтакте
    </a><a href="https://telegram.me/monobogdan" rel="noopener" target="_blank" class="tm-article-author__contact">
      Telegram
    </a></div></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section>  <div class="tm-article-blocks__comments"><div id="publication-comments" class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/companies/timeweb/articles/764526/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="24" width="24" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v28.2fb1b1c1..svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 48 
    </span></a> <!----></div></div></div>  <section class="tm-block tm-block tm-block_spacing-bottom"><header class="tm-block__header tm-block__header tm-block__header_variant-borderless"><div class="tm-block__header-container"><h2 class="tm-block__title tm-block__title tm-block__title_variant-large">Публикации</h2> </div> <!----></header> <div class="tm-block__body tm-block__body tm-block__body_variant-condensed-slim"><div class="tm-tabs tm-tabs"><div><span class="tm-tabs__tab-item"><button class="tm-tabs__tab-link tm-tabs__tab-link tm-tabs__tab-link_active tm-tabs__tab-link_slim">
        Лучшие за сутки
      </button></span><span class="tm-tabs__tab-item"><button class="tm-tabs__tab-link tm-tabs__tab-link tm-tabs__tab-link_slim">
        Похожие
      </button></span></div> <!----></div> <div class="similar-and-daily__tab-view"><div class="placeholder-wrapper"><!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <div class="tm-placeholder-article-cards"><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div></div> <!----> <!----> <!----> <!----></div> <!----></div></div> <!----></section> <div class="placeholder-wrapper"><!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <div class="tm-placeholder-inset tm-placeholder-vacancies"><div class="tm-placeholder-inset__header"><div class="tm-placeholder__line tm-placeholder__line_inset-header loads"></div></div> <div class="tm-placeholder-inset__body"><ul class="tm-placeholder-list"><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li></ul></div> <div class="tm-placeholder-inset__footer"><div class="tm-placeholder__line tm-placeholder__line_inset-footer loads"></div></div></div> <!----> <!----> <!----> <!----> <!----> <!----></div> <!----> </div></div></div></div></div> <div class="tm-page__sidebar"><!----></div></div></div></div></main> <!----></div> <!----> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><div class="tm-footer__title"><a href="/ru/" class="tm-svg-icon__wrapper tm-footer__title-link router-link-active"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a></div> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="36" width="36" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="36" width="36" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="36" width="36" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-vk"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="36" width="36" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="36" width="36" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://dzen.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="36" width="36" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-dzen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><svg height="16" width="16" class="tm-svg-img tm-footer__icon"><title>Язык</title> <use xlink:href="/img/megazord-v28.2fb1b1c1..svg#lang"></use></svg>
        Настройка языка
      </button> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2023, </span> <span class="tm-copyright__name"><a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a></span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"764526":{"id":"764526","timePublished":"2023-10-06T08:01:04+00:00","isCorporative":true,"lang":"ru","titleHtml":"Сам написал, сам погонял: Как я написал 3D-гонки «на жигулях» за неделю, полностью с нуля?","leadData":{"textHtml":"\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fvz\u002Fcw\u002Fag\u002Fvzcwagsxhxidoafivthxxwegds8.png\" alt=\"image\"\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nСтатьи про инди-разработку игр — это всегда интересно и занимательно. Но статьи про разработку игр с нуля, без каких-либо игровых движков — ещё интереснее! У меня есть небольшой фетиш, заключающийся в разработке минимально играбельных 3D-демок, которые нормально работали бы даже на железе 20-летней давности. Полтора года назад, в мае 2022 года, я написал демку гоночной игры с очень знакомым всем нам сеттингом — жигули, девятки, десятки, и всё это даже с тюнингом! В этой статье я расскажу вам о разработке 3D-игр практически с нуля: рендерер, менеджер ресурсов, загрузка уровней и граф сцены, 3D-звук, ввод и интеграция физического движка. Интересна подробнейшая хаброторная статья о разработке игры с нуля? Тогда добро пожаловать!","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"904279","alias":"bodyawm","fullname":"Богдан","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F47b\u002F885\u002Fa9d\u002F47b885a9d839456736ae10b04a0c0011.jpg","speciality":"Программист, железнячник. Донаты идут на контент!","scoreStats":{"score":318,"votesCount":430},"rating":332.1,"relatedData":null,"contacts":[{"title":"ВКонтакте","url":"https:\u002F\u002Fvk.com\u002Fmonobogdan","value":"monobogdan","siteTitle":null,"favicon":null},{"title":"Telegram","url":"https:\u002F\u002Ftelegram.me\u002Fmonobogdan","value":"monobogdan","siteTitle":null,"favicon":null}],"authorContacts":[{"title":"ВКонтакте","url":"https:\u002F\u002Fvk.com\u002Fmonobogdan","value":"monobogdan","siteTitle":null,"favicon":null},{"title":"Telegram","url":"https:\u002F\u002Ftelegram.me\u002Fmonobogdan","value":"monobogdan","siteTitle":null,"favicon":null}],"paymentDetails":{"paymentYandexMoney":"410017010728573","paymentPayPalMe":null,"paymentWebmoney":null},"donationsMethod":"services"},"statistics":{"commentsCount":48,"favoritesCount":91,"readingCount":17789,"score":120,"votesCount":120,"votesCountPlus":120,"votesCountMinus":0},"hubs":[{"id":"17357","alias":"timeweb","type":"corporative","title":"Блог компании Timeweb Cloud","titleHtml":"Блог компании Timeweb Cloud","isProfiled":false,"relatedData":null},{"id":"84","alias":"crazydev","type":"collective","title":"Ненормальное программирование","titleHtml":"Ненормальное программирование","isProfiled":true,"relatedData":null},{"id":"449","alias":"vector_graphics","type":"collective","title":"Работа с векторной графикой","titleHtml":"Работа с векторной графикой","isProfiled":true,"relatedData":null},{"id":"7773","alias":"gamedev","type":"collective","title":"Разработка игр","titleHtml":"Разработка игр","isProfiled":true,"relatedData":null},{"id":"21980","alias":"games","type":"collective","title":"Игры и игровые консоли","titleHtml":"Игры и игровые консоли","isProfiled":false,"relatedData":null}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"},{"id":"2","alias":"design","title":"Дизайн","titleHtml":"Дизайн"},{"id":"7","alias":"popsci","title":"Научпоп","titleHtml":"Научпоп"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fvz\u002Fcw\u002Fag\u002Fvzcwagsxhxidoafivthxxwegds8.png\" alt=\"image\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fvz\u002Fcw\u002Fag\u002Fvzcwagsxhxidoafivthxxwegds8.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСтатьи про инди-разработку игр — это всегда интересно и занимательно. Но статьи про разработку игр с нуля, без каких-либо игровых движков — ещё интереснее! У меня есть небольшой фетиш, заключающийся в разработке минимально играбельных 3D-демок, которые нормально работали бы даже на железе 20-летней давности. Полтора года назад, в мае 2022 года, я написал демку гоночной игры с очень знакомым всем нам сеттингом — жигули, девятки, десятки, и всё это даже с тюнингом! В этой статье я расскажу вам о разработке 3D-игр практически с нуля: рендерер, менеджер ресурсов, загрузка уровней и граф сцены, 3D-звук, ввод и интеграция физического движка. Интересна подробнейшая хаброторная статья о разработке игры с нуля? Тогда добро пожаловать!\u003Ca name=\"habracut\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cfont color=\"#1c22be\"\u003E❯\u003C\u002Ffont\u003E \u003Cfont color=\"#454cee\"\u003EПредыстория\u003C\u002Ffont\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nНа момент написания статьи, я всё ещё остаюсь достаточно юным — буквально 5 дней назад мне исполнилось 22 года. Но если откатиться на 4 года назад и вспомнить момент наступления моего совершеннолетия, то на ум приходят сразу два значимых события: отец приходит в один день и говорит «открывай юлито, будем смотреть авто за 40 тыщ рублей». Понятное дело, что за эту сумму (~700$ по тому курсу) особо не разгуляешься, поэтому мой выбор пал на карбюраторную «семерочку», свою ровесницу (2001 год) синего цвета. Приехали с батькой смотреть на машину, обкатали и приняли решение — надо брать!\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Fb94\u002Fd41\u002F7a0\u002Fb94d417a0ec4106360d5ef3c882d079d.jpg\" alt=\"image\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Fb94\u002Fd41\u002F7a0\u002Fb94d417a0ec4106360d5ef3c882d079d.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nС тех пор я ездил на своем «тазе» и горя не знал — машинка не ломалась, ни разу не подводила, вложений в себя не требовала, а я начал все больше увлекаться автомобилями и изучать тематический материал. Со временем я полюбил и другие российские модели автомобилей, но особенно мне нравился АвтоВАЗ. В один момент, вспомнив про популярный и провальный некогда \u003Ca href=\"https:\u002F\u002Fru.wikipedia.org\u002Fwiki\u002FLADA_Racing_Club\"\u003ELada Racing Club\u003C\u002Fa\u003E, мне захотелось написать «гоночки на жигулях» самому, причём полностью с нуля. А поскольку нормального арта для города у меня не было, игру я решил назвать просто и понятно: «Ралли-кубок ТАЗов» :)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F083\u002F0a7\u002F959\u002F0830a79598b160c83802ecf96a9b8318.png\" alt=\"image\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F083\u002F0a7\u002F959\u002F0830a79598b160c83802ecf96a9b8318.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Ci\u003EПоём всем Хабром!\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНо с чего начинать писать такой объемный проект самому? Тут нам, конечно же, нужен план. У меня уже был готовый самопальный 3D-фреймворк для игрушек, который я использовал в одной из прошлых демок: арена-шутер от первого лица с модельками из модов для Quake. Фреймворк был вполне рабочим, но требовал некоторой доработки для использования в «кубке тазов».\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Ff42\u002F635\u002Fd4d\u002Ff42635d4d45414edefa818651587eb40.png\" alt=\"image\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Ff42\u002F635\u002Fd4d\u002Ff42635d4d45414edefa818651587eb40.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНа момент начала разработки гоночки у меня уже были готовы следующие фишки:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003E \u003Cb\u003EРендерер\u003C\u002Fb\u003E: Direct3D9, причём полностью FFP — для того, чтобы игра запускалась даже на встройках Intel, где нормальной поддержки шейдеров до HD-серии вообще не было. Практически все текстурные техники работали через комбайнеры — дальний предок пиксельных шейдеров, где программист оперировал целыми стадиями пиксельного конвейера, а не писал программу напрямую, что накладывало множество ограничений. Поддерживались: многослойные материалы, однопроходной сплат-маппинг для плавного текстурирования ландшафтов, отражения в кубмапах, плавный морфинг (вершинная анимация) с линейной интерполяцией между кадрами, MSAA (это заслуга GAPI), отсечение невидимой геометрии по пирамиде видимости и примитивный альфа-блендинг с ручной сортировкой.\u003C\u002Fli\u003E\r\n\u003Cli\u003E \u003Cb\u003EЗвук\u003C\u002Fb\u003E: 3D-звук на DirectSound с позиционированием относительно источника звука, ускорением и т. п. Тут моей заслуги особо нет, кроме загрузчика wav-файлов я ничего не писал.\u003C\u002Fli\u003E\r\n\u003Cli\u003E \u003Cb\u003EВвод\u003C\u002Fb\u003E: WinAPI + DirectInput. Клавиатура опрашивалась с помощью классического GetAsyncKeyState, в то время как геймпады с помощью DirectInput. Была и абстракция осей ввода — дабы не адаптировать управление под кучу разных контроллеров.\u003C\u002Fli\u003E\r\n\u003Cli\u003E \u003Cb\u003EМенеджер ресурсов\u003C\u002Fb\u003E: достаточно примитивен. К менеджеру ресурсов я отнесу и загрузчики — фреймворк поддерживал модели в форматах SMD (не анимированные меши, формат Half-life) и MD2 (анимированные меши, формат Quake 2, строго один материал на один меш), звуки — wav и простенький самопальный формат конфигов. Стандартный набор: трекинг ресурсов на слабых ссылках, пул ассетов для исключения дублирующейся загрузки и т. п.\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\nФреймворк выдавал не слишком крутую графику:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Fd29\u002Fdd9\u002F138\u002Fd29dd91383553acab71edfa6839aa33f.png\" alt=\"image\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Fd29\u002Fdd9\u002F138\u002Fd29dd91383553acab71edfa6839aa33f.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЗато был очень простым «под капотом», имел довольно неплохую расширяемую архитектуру и в целом, на нем можно было запилить что-то прикольное. Где-то за неделю я запилил вот такую демку шутера от первого лица:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"oembed\"\u003E\u003Cdiv class=\"tm-iframe_temp\" data-src=\"https:\u002F\u002Fembedd.srv.habr.com\u002Fiframe\u002F6517f267962d8d30c11eaa78\" data-style=\"\" id=\"6517f267962d8d30c11eaa78\" width=\"\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003EИгрушка даже на VIA UniChrome работала — последователе всем известного S3 Savage\u002FS3 Virge!\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nМинимальное приложение выглядело примерно так:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"cs\"\u003Epublic sealed class GameMain : IGameApp\n    {\n        private Mesh mesh;\n        private Material material;\n        private Vector3 pos = new Vector(0, 0, -150);\n\n        public void OnCreate()\n        {\n           mesh = Engine.Current.Data.GetMesh(\"test.md2\");\n           material = new Material();\n           material.Text = Engine.Current.Data.GetTexture(\"test.png\");\n        }\n\n        public void OnDraw()\n        {\n           Engine.Current.Graphics.DrawMesh(mesh, 0, material, pos, Vector3.Zero);\n        }\n\n        public void OnExit()\n        {\n\n        }\n\n        public void OnDrawGUI()\n        {\n\n        }\n\n        public void OnUpdate()\n        {\n\n        }\n    }\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nПриведённый выше код нарисует модельку с текстурой перед лицом игрока. Всё просто и понятно. Однако, как это всё работает «под капотом»? Давайте попробуем разобраться:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cfont color=\"#1c22be\"\u003E❯\u003C\u002Ffont\u003E \u003Cfont color=\"#454cee\"\u003EОснова и рендерер\u003C\u002Ffont\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nВ своих играх я стараюсь придерживаться одной архитектуры: есть условный класс Engine, который управляет созданием платформозависимых окон, организацией главного цикла игры и инициализацией подсистем. Поскольку в одном процессе обычно запущен только один экземпляр игры (исключение — выделенные авторитарные серверы с комнатами, на манер \u003Ca href=\"https:\u002F\u002Fru.wikipedia.org\u002Fwiki\u002FLeft_4_Dead\"\u003ELeft 4 Dead\u003C\u002Fa\u003E), сам по себе Engine является синглтоном и содержит в себе ссылки на все необходимые подмодули.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"cs\"\u003E\n  Game.Initialize(new GameApp());\n  Game.Current.Run();\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nКак я уже говорил выше, сам по себе рендерер построен на базе графического API Direct3D9. Выбор DX9 обусловлен его распространенностью на железе прошлых лет, хорошей совместимостью (DX9 легко запускается на железе времен DX8 и даже DX7) и иногда лучшей производительностью на видеочипах от ATI. По сути, всё начинается с создания контекста или устройства в терминологии DirectX: в параметрах создания контекста указывается ширина и высота вторичного буфера, желаемый уровень сглаживания MSAA, видеорежим и частота желаемая частота обновления экрана.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"cs\"\u003E internal Graphics()\n        {\n            d3d = new Direct3D();\n\n            CreateDevice();\n            Camera = new Camera();\n        }\n\n        private void CreateDevice()\n        {\n            int msaa = PickBestMSAALevel(Game.Current.Config.GetInt(\"renderer.msaa\"));\n\n            bool fullScreen = Game.Current.Config.GetBool(\"renderer.fullScreen\");\n\n            PresentParameters pp = new PresentParameters();\n            pp.AutoDepthStencilFormat = Format.D24S8;\n            pp.BackBufferCount = 1;\n            pp.BackBufferWidth = fullScreen ? Game.Current.Config.GetInt(\"engine.width\") : Game.Current.Width;\n            pp.BackBufferHeight = fullScreen ? Game.Current.Config.GetInt(\"engine.height\") : Game.Current.Height;\n            pp.BackBufferFormat = !fullScreen ? Format.Unknown : Format.X8R8G8B8;\n            pp.DeviceWindowHandle = Game.Current.Form.Handle;\n            pp.EnableAutoDepthStencil = true;\n            pp.SwapEffect = SwapEffect.Discard;\n            pp.Windowed = !fullScreen;\n            pp.MultiSampleType = (MultisampleType)msaa;\n            pp.FullScreenRefreshRateInHz = 0;\n            pp.MultiSampleQuality = 0;\n            pp.PresentFlags = PresentFlags.None;\n            pp.PresentationInterval = PresentInterval.Default;\n            pp.SwapEffect = SwapEffect.Discard;\n            device = new Device(d3d, 0, DeviceType.Hardware, Game.Current.Form.Handle, CreateFlags.HardwareVertexProcessing | CreateFlags.PureDevice, pp);\n\n            Game.Current.Log.Print(\"Initialized graphics\");\n            Game.Current.Log.Print(\"Total video memory: \" + device.AvailableTextureMemory \u002F 1024 \u002F 1024);\n        }\n\n        private int PickBestMSAALevel(int level)\n        {\n            int ret = level;\n\n            for (int i = level; i \u003E 1; i--)\n            {\n                if (d3d.CheckDeviceMultisampleType(0, DeviceType.Hardware, Format.Unknown,\n                    !Game.Current.Config.GetBool(\"renderer.fullScreen\"), (MultisampleType)i))\n                {\n                    ret = i;\n\n                    continue;\n                }\n            }\n\n            if(ret != level)\n                Game.Current.Log.Print(\"Picked MSAA x\" + ret + \" , as your GPU doesn't support desired level\");\n\n            return ret;\n        }\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nПри создании контекста есть свои нюансы, которые необходимо учитывать — например, большинство встроенных видеокарт не поддерживают аппаратную обработку вершин (\u003Cb\u003ED3DCREATE_HARDWARE_VERTEXPROCESSING\u003C\u002Fb\u003E), из-за чего создание контекста будет заканчиваться ошибкой без соответствующего флага, разные видеокарты поддерживают разные форматы буфера глубины и трафарета (сейчас видеокарты нативно даже 24х-битный RGB для рендертаргетов не умеют использовать, только выравненный XRGB), а видеокарты до GF5xxx-GF6xxx не поддерживали Pure режим D3D, который предполагает, что программист возлагает всю обработку ошибок на себя, при этом количество проверок в самом GAPI уменьшается, благодаря чему мы получаем небольшой выигрыш в производительности.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВажно так же отметить такой аспект, как управление ресурсами. К ресурсам видеокарты в терминологии старых GAPI относятся текстуры и буферы (как вершинные, так и индексные). В OpenGL особо нет такого понятия, как Device Lost. Если пользователь сворачивает ваше приложение из полноэкранного режима, или, например, видеодрайвер крашится — то GL сам должен позаботится о перезагрузке ресурсов обратно в видеопамять (исключение — Android и iOS, на мобилках контекст не уничтожится, но ресурсы будут выгружены и их хендлы станут некорректными). У D3D есть событие \u003Cb\u003ELost\u003C\u002Fb\u003E, которое вызывается при потенциальной потере контекста — и его тоже нужно грамотно обрабатывать. Поэтому в D3D есть несколько пулов:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003E Managed: D3D9 сам сохраняет копию текстуры или геометрии в ОЗУ, а затем при потере контекста пересоздаёт аппаратные буферы и перезагружает нужные данные сам.\u003C\u002Fli\u003E\r\n\u003Cli\u003E Default: данные загружаются напрямую в видеопамять (в терминологии D3D — AGP memory), или, если видеопамяти не хватает — в ОЗУ, если видеокарта, конечно, поддерживает Shared Memory Architecture.\u003C\u002Fli\u003E\r\n\u003Cli\u003E System: загрузка ресурсов только в ОЗУ. Этот пул обычно не используется в играх — слишком медленно.\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\nИ грузить данные желательно в пул Default. Иначе при относительно большом количестве ресурсов, игра начнет «жрать» ОЗУ не в себя (пример — \u003Ca href=\"https:\u002F\u002Fru.wikipedia.org\u002Fwiki\u002FSid_Meier%E2%80%99s_Civilization_V\"\u003ECivilization 5\u003C\u002Fa\u003E). При потере контекста, ресурсы нужно перезагружать с диска «на горячую»!\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПереходим к самому важному — отрисовке геометрии. Для задания внешнего вида объектов на экране, используются так называемые \u003Ci\u003Eматериалы\u003C\u002Fi\u003E, которые содержат в себе данные о том, какая текстура должна быть наложена на объект, насколько объект отражает свет, какая техника должна использоваться и т. п. В современных движках система материалов обычно гибкая, поскольку шейдеры могут принимать самые разные параметры. В нашем случае шейдеров нет вообще, набор параметров фиксирован и зависит от видеокарты: стандартные техники типа повершинного затенения по Фонгу\u002FГуро, цвет объекта, туман и т. п. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nФормат материалов в фреймворке выглядит вот так:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"cs\"\u003Epublic struct Material\n    {\n        public Shader Shader; \u002F\u002F Null for default\n\n        public Texture Texture;\n        public Texture Detail;\n        public Texture Detail2;\n        public Texture Reflection;\n\n        public MaterialDetailType DetailType;\n        public MaterialFlags Flags;\n\n        public bool NonLit;\n        public bool SampleShadowMap;\n\n        public Color4 Color;\n        public bool DepthTest;\n        public bool DepthWrite; \u002F\u002F false - write\n\n        public Vector2 UVScale;\n\n        public static Material CreateDefault()\n        {\n            return new Material()\n            {\n                Color = new Color4(1, 1, 1, 1)\n            };\n        }\n    }\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nОднако даже без шейдеров была возможность сделать относительно гибкую систему материалов — с помощью \u003Ci\u003Eкомбайнеров\u003C\u002Fi\u003E, как это делала Quake 3. Самые первые 3D-ускорители не поддерживали смешивание нескольких текстур за один вызов отрисовки, поэтому некоторые игры шли на ухищрение: к примеру Quake вручную сортировал геометрию по отдаленности без использования буфера глубины, он просто… накладывал альфа-блендингом ту же самую геометрию с затененной текстурой освещения (лайтмапа). Это называется многопроходной рендеринг. Комбайнеры, которые появились ближе к концу 90-х, позволяли смешивать несколько текстур с помощью различных операций (Add, Sub, Mul, Xor и т. п.), а также умножать финальный цвет на определенный коэффициент. Именно комбайнеры я использовал в своём фреймворке для реализации некоторых относительно сложных эффектов — например, плавное смешивание текстур на ландшафте:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"cs\"\u003E\n\nprivate void SetRenderState(Material mat)\n        {\n            device.SetRenderState&lt;ZBufferType\u003E(RenderState.ZEnable, !mat.DepthTest ? ZBufferType.UseZBuffer : ZBufferType.DontUseZBuffer);\n            device.SetRenderState(RenderState.ZWriteEnable, !mat.DepthWrite);\n        }\n\n        private void SetShadowMeshState()\n        {\n            \u002F\u002F Special case for shadow meshes\n            device.SetRenderState(RenderState.ZWriteEnable, false);\n            device.SetRenderState(RenderState.Lighting, false);\n\n            device.SetRenderState(RenderState.TextureFactor, new Color4(0, 0, 0, 0.9f).ToBgra());\n            device.SetTextureStageState(0, TextureStage.Constant, new Color4(0.1f, 0.1f, 0.1f, 1).ToBgra());\n            device.SetTextureStageState(0, TextureStage.ColorOperation, TextureOperation.SelectArg1);\n            device.SetTextureStageState(0, TextureStage.ColorArg1, TextureArgument.TFactor);\n            device.SetTextureStageState(0, TextureStage.AlphaArg1, TextureArgument.TFactor);\n\n            device.SetTextureStageState(1, TextureStage.ColorOperation, TextureOperation.Disable);\n            device.SetTextureStageState(1, TextureStage.AlphaOperation, TextureOperation.Disable);\n        }\n\n        private void SetTextureState(Material mat)\n        {\n            for (int i = 1; i &lt; 4; i++)\n            {\n                device.SetTextureStageState(i, TextureStage.ColorOperation, TextureOperation.Disable);\n                device.SetTextureStageState(i, TextureStage.AlphaOperation, TextureOperation.Disable);\n                \n                device.SetTextureStageState(0, TextureStage.AlphaArg1, TextureArgument.Texture);\n\n                device.SetSamplerState(i, SamplerState.MinFilter, TextureFilter.Linear);\n                device.SetSamplerState(i, SamplerState.MagFilter, TextureFilter.Anisotropic);\n                device.SetSamplerState(i, SamplerState.MipFilter, TextureFilter.Linear);\n            }\n\n            device.SetRenderState(RenderState.TextureFactor, mat.Color.ToRgba());\n\n            if (mat.DetailType != MaterialDetailType.BlendMask)\n            {\n                if (mat.Texture != null)\n                {\n                    device.SetTextureStageState(0, TextureStage.ColorOperation, TextureOperation.Modulate);\n                    device.SetTextureStageState(0, TextureStage.ColorArg1, TextureArgument.Texture);\n                    device.SetTextureStageState(0, TextureStage.ColorArg0, TextureArgument.Current);\n                    device.SetTexture(0, mat.Texture.Handle);\n\n                    if (mat.UVScale == Vector2.Zero)\n                        mat.UVScale = new Vector2(1, 1);\n\n                    device.SetTextureStageState(0, TextureStage.TextureTransformFlags, TextureTransform.Count2);\n                    device.SetTransform(TransformState.Texture0, Matrix.Scaling(mat.UVScale.X, mat.UVScale.Y, 1));\n                    device.SetTextureStageState(0, TextureStage.ResultArg, TextureArgument.Current);\n\n                    device.SetSamplerState(0, SamplerState.MinFilter, TextureFilter.Linear);\n                    device.SetSamplerState(0, SamplerState.MagFilter, TextureFilter.Anisotropic);\n                    device.SetSamplerState(0, SamplerState.MipFilter, TextureFilter.Linear);\n                }\n            }\n            else\n            {\n                if (mat.Texture != null)\n                {\n                    device.SetTextureStageState(0, TextureStage.ColorOperation, TextureOperation.SelectArg1);\n                    device.SetTextureStageState(0, TextureStage.ColorArg1, TextureArgument.Texture);\n                    device.SetTextureStageState(0, TextureStage.ColorArg0, TextureArgument.Current);\n                    device.SetTexture(0, mat.Texture.Handle);\n\n                    if (mat.UVScale == Vector2.Zero)\n                        mat.UVScale = new Vector2(1, 1);\n\n                    device.SetTextureStageState(0, TextureStage.TextureTransformFlags, TextureTransform.Count2);\n                    device.SetTransform(TransformState.Texture0, Matrix.Scaling(mat.UVScale.X, mat.UVScale.Y, 1));\n                    device.SetTextureStageState(0, TextureStage.ResultArg, TextureArgument.Temp);\n\n                    device.SetSamplerState(0, SamplerState.MinFilter, TextureFilter.Linear);\n                    device.SetSamplerState(0, SamplerState.MagFilter, TextureFilter.Anisotropic);\n                    device.SetSamplerState(0, SamplerState.MipFilter, TextureFilter.Linear);\n                }\n            }\n\n            if (mat.Detail != null)\n            {\n                if (mat.DetailType == MaterialDetailType.BlendMask)\n                {\n                    device.SetTexture(1, mat.Detail.Handle);\n\n                    device.SetTextureStageState(1, TextureStage.ColorOperation, TextureOperation.SelectArg1);\n\n                    device.SetTextureStageState(1, TextureStage.ColorArg0, TextureArgument.Current);\n                    device.SetTextureStageState(1, TextureStage.ColorArg1, TextureArgument.Texture);\n                    device.SetTextureStageState(1, TextureStage.ResultArg, TextureArgument.Temp);\n                    device.SetTextureStageState(1, TextureStage.TexCoordIndex, 0);\n\n                    device.SetSamplerState(1, SamplerState.MinFilter, TextureFilter.Linear);\n                    device.SetSamplerState(1, SamplerState.MagFilter, TextureFilter.Anisotropic);\n                    device.SetSamplerState(1, SamplerState.MipFilter, TextureFilter.Linear);\n                }\n                else\n                {\n                    device.SetTexture(1, mat.Detail.Handle);\n\n                    device.SetTextureStageState(1, TextureStage.ColorOperation, TextureOperation.Modulate);\n\n                    device.SetTextureStageState(1, TextureStage.ColorArg0, TextureArgument.Current);\n                    device.SetTextureStageState(1, TextureStage.ColorArg1, TextureArgument.Texture);\n                    device.SetTextureStageState(1, TextureStage.ResultArg, TextureArgument.Current);\n                    device.SetTextureStageState(1, TextureStage.TexCoordIndex, 0);\n\n                    device.SetSamplerState(1, SamplerState.MinFilter, TextureFilter.Linear);\n                    device.SetSamplerState(1, SamplerState.MagFilter, TextureFilter.Anisotropic);\n                    device.SetSamplerState(1, SamplerState.MipFilter, TextureFilter.Linear);\n                }\n            }\n        }\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОсновная проблема комбайнеров — каша из стейтов, поэтому код выглядит не особо презентабельно. Входная текстура-маска выглядит вот так:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F2ae\u002F96f\u002F6d3\u002F2ae96f6d3e4ec2bf175ce297748a02b2.jpg\" alt=\"image\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F2ae\u002F96f\u002F6d3\u002F2ae96f6d3e4ec2bf175ce297748a02b2.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПереходим к отрисовке. По сути, за рисование полигональной геометрии отвечает один метод — DrawMesh, с несколькими перегрузками (в идеале — основной должен принимать матрицу трансформации, а остальные принимать обычные World-space координаты, из которых будет построена матрица трансформации). В оригинале метод рисует геометрию с помощью DIPUP, поскольку практически вся геометрия в игре была анимирована (и анимация, само собой, обрабатывалась для каждой вершины софтварно, на ЦПУ, поэтому я не видел разницы между перезаливкой геометрии на GPU каждый кадр и DIPUP), однако в одном из бранчей фреймворка я переписал отрисовку статику на обычный DIP. Обратите внимание, что DIPUP для комплексной геометрии на старых GPU будет слишком медленным — когда-то этим страдал графический движок Irrlicht.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"cs\"\u003E\npublic void DrawMesh(Mesh mesh, int frame, Material mat, Vector3 position, Vector3 rotation, Vector3 scale,\n            float morphFactor, Vector2 uv)\n        {\n            if(mesh != null)\n            {\n                Matrix matrix = Matrix.Identity;\n\n                matrix *= Matrix.Scaling(scale) *\n                    Matrix.RotationY(rotation.Y * Mathf.DegToRad) *\n                    Matrix.RotationZ(rotation.Z * Mathf.DegToRad) *\n                    Matrix.RotationX(rotation.X * Mathf.DegToRad) *\n                    Matrix.Translation(position);\n\n                if (mat.Flags.HasFlag(MaterialFlags.ShadowMesh))\n                    matrix *= Matrix.Shadow(new Vector4(0, 1, 1, 0), new Plane(new Vector3(0, 1, 0), 0.95f)); \u002F\u002F Note: This is hardcoded. We should calculate mesh height by it's bounding box(not implemented yet)\n\n                device.SetTransform(TransformState.World, matrix);\n\n                SetRenderState(mat);\n                \n                if (mat.Flags.HasFlag(MaterialFlags.ShadowMesh))\n                {\n                    SetShadowMeshState();\n                }\n                else\n                {\n                    device.SetRenderState(RenderState.Lighting, !mat.NonLit);\n                    SetTextureState(mat);\n                }\n\n                bool lerpEnable = Game.Current.Config.GetBool(\"renderer.lerp\");\n\n                if (morphFactor \u003E 0)\n                {\n                    if (frame &lt; mesh.Frames.Length &amp;&amp; lerpEnable)\n                    {\n                        mesh.UpdateMorphTarget(frame, frame + 1, morphFactor);\n                    }\n                }\n\n                if (morphFactor \u003E 0 &amp;&amp; lerpEnable)\n                    device.DrawUserPrimitives&lt;Vertex\u003E(PrimitiveType.TriangleList, mesh.Frames[frame].Length \u002F 3, mesh.MorphVerts);\n                else\n                    device.DrawUserPrimitives&lt;Vertex\u003E(PrimitiveType.TriangleList, mesh.Frames[frame].Length \u002F 3, mesh.Frames[frame]);\n            }\n        }\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nВ более позднем бранче добавилось отсечение по дистанции от «глаз» игрока и по пирамиде видимости. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПереходим к анимации. Есть три основных метода анимации геометрии в играх:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003E \u003Cb\u003EСкиннинг\u003C\u002Fb\u003E: анимация вершин относительно скелета модели. Очень хорошо подходит для различных персонажей. Весь скелет является иерархией, где каждый элемент трансформируется относительно позиции родителя, что позволяет легко интегрировать «скелетку» в граф-сцены самого движка (Unity — самый яркий пример). Иногда скелетку используют и для «неоживленных» предметов — например, анимация подвески авто.\u003C\u002Fli\u003E\r\n\u003Cli\u003E \u003Cb\u003EМорфинг\u003C\u002Fb\u003E: классический способ анимации суть которого заключается в «запекании» всех кадров в виде множества мешей. Затем игра интерполирует вершины между кадрами анимации, благодаря чему достигается эффект плавности.\u003C\u002Fli\u003E\r\n\u003Cli\u003E \u003Cb\u003EObject-Transform\u003C\u002Fb\u003E: классический метод иерархической анимации, очень похож на скиннинг, только трансформируются не сами вершины, а привязанные к ним объекты. Применялась, например, во многих играх на PS1 и в GTA III (замечали отсутствие плавности в местах сочленений персонажей — это и есть OT).\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\nЯ не умею нормально работать с скиннингом моделей в 3D-редакторах и обычно не юзаю скиннинг в своих игрушках — для небольших демок хватает обычного морфинга с интерполяцией. Если интерполяцию не использовать, то анимация будет выглядеть топорно (в Quake 1 при отключении CVar'а такая и была):\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"oembed\"\u003E\u003Cdiv class=\"tm-iframe_temp\" data-src=\"https:\u002F\u002Fembedd.srv.habr.com\u002Fiframe\u002F651d2daf72e08276d7ab0161\" data-style=\"\" id=\"651d2daf72e08276d7ab0161\" width=\"\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cpre\u003E\u003Ccode class=\"cs\"\u003E\ninternal void UpdateMorphTarget(int currFrame, int nextFrame, float time)\n        {\n            for(int i = 0; i &lt; MorphVerts.Length; i++)\n            {\n                MorphVerts[i].Position = Vector3.Lerp(Frames[currFrame][i].Position, Frames[nextFrame][i].Position, time);\n                MorphVerts[i].Normal = Vector3.Lerp(Frames[currFrame][i].Normal, Frames[nextFrame][i].Normal, time);\n                MorphVerts[i].UV = Frames[currFrame][i].UV;\n            }\n        }\n\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nРабота с анимациями выглядела вот так:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"cs\"\u003E\nanimator.AddSequence(new MeshSequence()\n            {\n                From = 0,\n                To = 30,\n                Speed = 0.5f\n            }, \"idle\");\n\n            animator.AddSequence(new MeshSequence()\n            {\n                From = 80,\n                To = 90,\n                Speed = 0.2f\n            }, \"attack\");\n\n            animator.AddSequence(new MeshSequence()\n            {\n                From = 80,\n                To = 85,\n                Speed = 0.2f\n            }, \"damage\");\n\n            animator.AddSequence(new MeshSequence()\n            {\n                From = 190,\n                To = 197,\n                Speed = 0.2f\n            }, \"kill\");\n\n            animator.AttachEventToSequence(\"kill\", () =\u003E\n            {\n                World.Destroy(this);\n            });\n\n            animator.AddSequence(new MeshSequence()\n            {\n                From = 40,\n                To = 45,\n                Speed = 0.14f\n            }, \"walk\");\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nПо сути, одна из самых комплексных частей — рендерер, готова. Однако в играх требуются и другие подсистемы, которые реализовать куда проще.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cfont color=\"#1c22be\"\u003E❯\u003C\u002Ffont\u003E \u003Cfont color=\"#454cee\"\u003EЗвук и ввод\u003C\u002Ffont\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nРеализация звука в играх задача не шибко сложная, если дело не доходит до программной реализации микшера, 3D-позиционирования и различных эффектов. Большинству игр хватает обычного не-сжатого wav, звук в котором хранится в виде PCM-потока.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ качестве API для звука я выбрал DirectSound. Очень удобное API, хотя сейчас его фактически вытеснил XAudio. DirectSound поддерживает любые звуковые карты, сам занимается микшированием звука, а в некоторых старичках типа AC97 умеет даже аппаратное ускорение! На современных машинах обычно микширование реализовано полностью софтварно, дабы не упираться в количество каналов\u002Fпамять на борту звукового адаптера, но в прошлом это помогало снизить нагрузку на процессор.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ DirectSound есть два основных объекта: сам IDirectSound8, представляющий интерфейс к звуковой карте и управлению её ресурсами и \u003Ci\u003Eбуфер\u003C\u002Fi\u003E — который может быть подкреплен как собственными данными, так и данными из другого буфера. В играх, они делятся на три базовых понятия:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003E \u003Cb\u003EСлушатель\u003C\u002Fb\u003E: описание позиции и иных параметров «слушателя» — позиции ушей в игровом мире. Обычно позиция слушателя совпадает с позицией игрока.\u003C\u002Fli\u003E\r\n\u003Cli\u003E \u003Cb\u003EИсточник\u003C\u002Fb\u003E: описание источника звука в 3D-пространстве. Например, если мимо нас проносится машина, то звуковому API необходимо знать позицию, ускорение и дальность звука, дабы правильно скорректировать звук в пространстве.\u003C\u002Fli\u003E\r\n\u003Cli\u003E \u003Cb\u003EПоток\u003C\u002Fb\u003E: поток, который содержит в себе звук. Может быть как обычным буфером, куда звук уже предварительно загружен, так и потоковым буфером, куда загружается часть музыки или другого длинного трека.\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\nПереходим к реализации примитивного звука:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"cs\"\u003Epublic struct WavHeader\n    {\n        public int chunkId;\n        public int chunkSize;\n        public int format;\n        public int subchunkid;\n        public int subchunksize;\n        public short audioFormat;\n        public short numChannels;\n        public int sampleRate;\n        public int byteRate;\n        public short blockAlign;\n        public short bitsPerSample;\n        public int subchunk2Id;\n        public int subchunk2Size;\n    }\n\n    public enum AudioType\n    {\n        Music,\n        Effect\n    }\n\n    public sealed class AudioStream\n    {\n        private SecondarySoundBuffer buffer;\n\n        public AudioType Type\n        {\n            get;\n            set;\n        }\n\n        public float Volume\n        {\n            get\n            {\n                return buffer.Volume;\n            }\n            set\n            {\n                buffer.Volume = (int)(value * -2000.0f);\n            }\n        }\n\n        public bool IsPlaying\n        {\n            get\n            {\n                return buffer.Status == (int)BufferStatus.Playing;\n            }\n        }\n\n        public AudioStream()\n        {\n\n        }\n\n        public void Play()\n        {\n            buffer.Play(0, PlayFlags.None);\n        }\n\n        public void Stop()\n        {\n            buffer.Stop();\n        }\n\n        public void Upload(int sampleRate, int align, int channels, byte[] data, int size)\n        {\n            if(data != null)\n            {\n                if (buffer != null)\n                    buffer.Dispose();\n\n                SoundBufferDescription desc = new SoundBufferDescription();\n                desc.Flags = BufferFlags.Software | BufferFlags.ControlVolume;\n                desc.Format = new SharpDX.Multimedia.WaveFormat(sampleRate, align, channels);\n                desc.BufferBytes = size;\n                buffer = new SecondarySoundBuffer(Game.Current.AudioManager.ds, desc);\n\n                DataStream ds2 = null;\n                DataStream strm = buffer.Lock(0, size, LockFlags.EntireBuffer, out ds2);\n                strm.WriteRange&lt;byte\u003E(data, 0, size);\n                buffer.Unlock(strm, ds2);\n                \n            }\n        }\n\n        public unsafe static AudioStream LoadWav(System.IO.Stream strm)\n        {\n            BinaryReader reader = new BinaryReader(strm);\n            WavHeader hdr = new WavHeader()\n            {\n                chunkId = reader.ReadInt32(),\n                chunkSize = reader.ReadInt32(),\n                format = reader.ReadInt32(),\n                subchunkid = reader.ReadInt32(),\n                subchunksize = reader.ReadInt32(),\n                audioFormat = reader.ReadInt16(),\n                numChannels = reader.ReadInt16(),\n                sampleRate = reader.ReadInt32(),\n                byteRate = reader.ReadInt32(),\n                blockAlign = reader.ReadInt16(),\n                bitsPerSample = reader.ReadInt16(),\n                subchunk2Id = reader.ReadInt32(),\n                subchunk2Size = reader.ReadInt32()\n            };\n\n            byte[] data = new byte[strm.Length - sizeof(WavHeader)];\n            reader.Read(data, 0, data.Length);\n\n            AudioStream stream = new AudioStream();\n            stream.Upload(hdr.sampleRate, hdr.bitsPerSample, hdr.numChannels, data, data.Length);\n\n            return stream;\n        }\n\n        public unsafe static AudioStream LoadVorbis(System.IO.Stream strm)\n        {\n            Vorbis.Vorbis vorbisStrm = new Vorbis.Vorbis(strm);\n\n            return null;\n        }\n    }\n\n    public sealed class AudioManager\n    {\n        internal DirectSound ds;\n        private PrimarySoundBuffer buffer;\n\n        internal AudioManager()\n        {\n            ds = new DirectSound();\n            ds.SetCooperativeLevel(Game.Current.Form.Handle, CooperativeLevel.Normal);\n\n            SoundBufferDescription desc = new SoundBufferDescription();\n            desc.Flags = BufferFlags.PrimaryBuffer;\n            desc.Format = null;\n            buffer = new PrimarySoundBuffer(ds, desc);\n        }\n    }\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nТеперь мы можем воспроизводить звуки в нашей игре!\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОднако, нам нужно чтобы пользователь мог взаимодействовать с нашей игрой. Для этого в разных системах есть различные API для взаимодействия с устройствами ввода. В случае Windows — это DirectInput для обычных USB-геймпадов и рулей, и XInput для геймпадов, совместимых с Xbox 360\u002FXbox One. Нажатия с клавиатуры можно обрабатывать двумя способами: с помощью событий WM_KEYDOWN и WM_KEYUP и функции WinAPI GetAsyncKeyState.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПока что мне нужна только клавиатура и мышь:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"cs\"\u003E\npublic sealed class Input\n  {\n    private KeyboardState[] keyboardState;\n\n    [DllImport(\"user32.dll\")]\n    private static extern short GetAsyncKeyState(Keys vKey);\n\n    public Input()\n    {\n      this.keyboardState = new KeyboardState[(int) byte.MaxValue];\n    }\n\n    private bool IsPressed(Keys key)\n    {\n       return ((int) Input.GetAsyncKeyState(key) &amp; 32768) \u003E 0;\n    } \n\n    public KeyboardState GetKeyState(Keys key)\n    {\n       return this.keyboardState[(int) key];\n    }\n\n    public Vector2 GetMousePosition()\n    {\n      if (Game.Current.Form.IsDisposed)\n        return Vector2.Zero;\n      Point client = Game.Current.Form.PointToClient(new Point(Cursor.Position.X, Cursor.Position.Y));\n      return new Vector2((float) client.X, (float) client.Y);\n    }\n\n    internal void Update()\n    {\n      for (int key = 0; key &lt; (int) byte.MaxValue; ++key)\n      {\n        if (this.keyboardState[key] == KeyboardState.Hot)\n          this.keyboardState[key] = KeyboardState.Pressed;\n        if (this.keyboardState[key] == KeyboardState.Idle &amp;&amp; this.IsPressed((Keys) key))\n          this.keyboardState[key] = KeyboardState.Hot;\n        if (this.keyboardState[key] == KeyboardState.Pressed &amp;&amp; !this.IsPressed((Keys) key))\n          this.keyboardState[key] = KeyboardState.Idle;\n      }\n    }\n  }\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nВ идеале обработку ввода лучше абстрагировать от физических устройств взаимодействия. Для этого вводятся понятия осей, кнопок действий и т. п. Желательно сразу продумать, как игра будет работать с геймпадом и уже затем назначать кнопкам на клавиатуре действия абстрактного геймпада.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНу что ж, самый базовый фреймворк для игр у нас есть. Пора переходить к написанию самой игры!\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cfont color=\"#1c22be\"\u003E❯\u003C\u002Ffont\u003E \u003Cfont color=\"#454cee\"\u003EРедактор уровней\u003C\u002Ffont\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nПоскольку у фреймворка нет какого-либо своего графа сцены, я реализовываю механизм загрузки уровней в каждой игре с нуля — под конкретные нужды. В какой-то игре нужен стриминг для открытого мира, в другой — быстрая загрузка уровней, где есть множество объектов с разными параметрами. Изначально я использовал Blender в качестве редактора уровней и экспортировал карты небольшим скриптом, который сохранял основные параметры в файл.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОднако блендер (особенно 2.79 и ниже) не очень удобный редактор для работы с достаточно большими картами. Поэтому в определенный момент встал вопрос с организацией графа сцены и собственного редактора карт.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nГраф сцены и графом то не назовешь — это просто линейный список объектов, которые присутствуют на сцене. Каждый объект наследуется от базового абстрактного типа Entity, если это «невидимый» объект, или PhysicsEntity, если объект должен интегрироваться с физическим движком. У базового объекта есть только имя и флаг выборки в редакторе.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"cs\"\u003E\n  public abstract class Entity\n  {\n    public string Name { get; set; }\n\n    public bool IsSelected { get; set; }\n\n    public virtual void Update()\n    {\n    }\n\n    public virtual void Draw()\n    {\n    }\n\n    public virtual void TransparentDraw()\n    {\n    }\n\n    public virtual void Destroy()\n    {\n    }\n\n    public override string ToString() =\u003E this.Name;\n  }\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nВообще, для редактирования уровней можно хоть редактор Unity использовать, предварительно написав экспортер в самопальный формат. Однако я решил реализовать свой редактор: как обычное Windows Forms приложение + панель, в которую движок рендерит картинку. В его реализации нет ничего необычного: он точно также загружает уровень, как и основная игра, но при этом не создаёт игрока и ботов и имеет свободную камеру.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F909\u002Fc83\u002Fe9d\u002F909c83e9d24639655b3c89a059f158f3.png\" alt=\"image\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F909\u002Fc83\u002Fe9d\u002F909c83e9d24639655b3c89a059f158f3.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nФормат уровней примитивный донельзя. В процессе разработки небольших игрушек я обычно следую принципу KISS и не люблю распыляться сложными сериализаторами\u002Fдесериализаторами и прочими заморочками, реализовывая лишь самые необходимый функционал. Формат карт — текстовый, одна линия на один объект:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"cs\"\u003Ep ferns 0 0 10.8 0 0 0 1\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nГде p — «класс» объекта, в случае p — это Prop, «декорация».\u003Cbr\u002F\u003E\r\nferns — модель пропа. При этом сами пропы описаны в отдельных текстовых файлах, где в виде key-value значений хранятся настройки коллизии, материала, текстуры и т. п.\u003Cbr\u002F\u003E\r\nXYZ — позиция в мире.\u003Cbr\u002F\u003E\r\nXYZ — поворот в мировых координатах, задаётся в углах Эйлера (это только для статики, которая не подвержена Gimbal Lock, под капотом вся работа идёт с кватернионами).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F5f5\u002F60e\u002Fb6d\u002F5f560eb6daeba3dac22b92b08c2e75f9.png\" alt=\"image\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F5f5\u002F60e\u002Fb6d\u002F5f560eb6daeba3dac22b92b08c2e75f9.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cfont color=\"#1c22be\"\u003E❯\u003C\u002Ffont\u003E \u003Cfont color=\"#454cee\"\u003EФизика автомобилей\u003C\u002Ffont\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nПосле того, как граф сцены был готов, я приступил к реализации физики автомобилей. Но как я уже говорил, физический движок я использовал готовый — т. е. вся работа по резолвингу столкновений, распаралелливанию вычислений и Joint'ам сводилась чисто к нему. Я лишь использовав физику колеса, реализовал поведение машинки, внеся в него некоторые изменения: в основном — вынес в публичные свойства параметры трения колеса. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Ffcb\u002Fedd\u002F2e5\u002Ffcbedd2e566e048db43ecf7e6b94ecd4.png\" alt=\"image\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Ffcb\u002Fedd\u002F2e5\u002Ffcbedd2e566e048db43ecf7e6b94ecd4.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСамо колесо реализовано по классическому принципу рейкастинга — колесо пускает под себя лучи и определяет трение относительно поверхности, на котором стоит, при этом двигая остальное тело используя собственное ускорение. Сейчас в играх для более точной симуляции используется Pacejka Magic Formula — формула, позволяющая рассчитать физически корректное поведение покрышки с различными диаметрами.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПоскольку класс сущности машинки слишком большой и требует контроля самых разных аспектов (коробка передач, аспекты тюнинга, отрисовка и материалы), я вынес часть физики в отдельный класс CarPhysics:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"cs\"\u003E\npublic sealed class CarPhysics\n  {\n    private AudioStream[] hitSounds;\n    private AudioSource srcHit;\n\n    public Wheel[] Wheels { get; private set; }\n\n    public Rigidbody Rigidbody { get; set; }\n\n    public float MaxSteerAngle { get; set; }\n\n    public float Acceleration { get; set; }\n\n    public float MaxSpeed { get; set; }\n\n    public Car Car { get; private set; }\n\n    internal CarPhysics(Car car)\n    {\n      this.Car = car;\n      this.Wheels = new Wheel[4];\n      this.hitSounds = new AudioStream[3]\n      {\n        Game.Current.Data.GetAudioStream(\"sound\u002Fhit1.wav\"),\n        Game.Current.Data.GetAudioStream(\"sound\u002Fhit2.wav\"),\n        Game.Current.Data.GetAudioStream(\"sound\u002Fhit3.wav\")\n      };\n      this.Car.game.track.JWorld.Events.BodiesBeginCollide += new Action&lt;RigidBody, RigidBody\u003E(this.OnCollide);\n    }\n\n    private void OnCollide(RigidBody arg1, RigidBody arg2)\n    {\n      if (arg1 != this.Rigidbody.Body &amp;&amp; arg2 != this.Rigidbody.Body)\n        return;\n      new AudioSource(this.hitSounds[new Random().Next(0, this.hitSounds.Length - 1)])\n      {\n        Position = this.Rigidbody.Position,\n        Velocity = new Vector3(this.Rigidbody.Body.LinearVelocity.X, this.Rigidbody.Body.LinearVelocity.Y, this.Rigidbody.Body.LinearVelocity.Z)\n      }.Play();\n    }\n\n    public void Move(float gas, float steer)\n    {\n      if (this.Wheels[0] != null &amp;&amp; this.Wheels[1] != null)\n      {\n        this.Wheels[0].SteerAngle = steer * this.MaxSteerAngle;\n        this.Wheels[1].SteerAngle = steer * this.MaxSteerAngle;\n      }\n      this.Wheels[0].AddTorque(gas * this.Acceleration);\n      this.Wheels[1].AddTorque(gas * this.Acceleration);\n      this.Wheels[2].AddTorque(gas * this.Acceleration);\n      this.Wheels[3].AddTorque(gas * this.Acceleration);\n\n      this.Rigidbody.Body.LinearVelocity = new \n                JVector(Mathf.Clamp(this.Rigidbody.Body.LinearVelocity.X, -this.MaxSpeed, \n                this.MaxSpeed), Mathf.Clamp(this.Rigidbody.Body.LinearVelocity.Y, -this.MaxSpeed, \n                this.MaxSpeed), Mathf.Clamp(this.Rigidbody.Body.LinearVelocity.Z, -this.MaxSpeed, \n                this.MaxSpeed));\n    }\n\n    public void PreStep(float step)\n    {\n      for (int index = 0; index &lt; this.Wheels.Length; ++index)\n      {\n        if (this.Wheels[index] != null)\n          this.Wheels[index].PreStep(step);\n      }\n    }\n\n    public void PostStep(float step)\n    {\n      for (int index = 0; index &lt; this.Wheels.Length; ++index)\n      {\n        if (this.Wheels[index] != null)\n          this.Wheels[index].PostStep(step);\n      }\n    }\n  }\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nКак можно видеть из метода Move, наша машинка полноприводная и имеет две управляющие оси (передние, само собой). Конфигурацию привода легко можно модифицировать в будущем.\u003Cbr\u002F\u003E\r\nКоллизия кузова машинки — обычный OBB прямоугольник, ну или «коробка».\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nА вот как это работает на практике:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"oembed\"\u003E\u003Cdiv class=\"tm-iframe_temp\" data-src=\"https:\u002F\u002Fembedd.srv.habr.com\u002Fiframe\u002F651d45f76f566b30a56f6ce7\" data-style=\"\" id=\"651d45f76f566b30a56f6ce7\" width=\"\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003EПока что гонки на утюгах. Но ездит же. :))\u003Cbr\u002F\u003E\r\nНо с кем мы гоняемся?\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cfont color=\"#1c22be\"\u003E❯\u003C\u002Ffont\u003E \u003Cfont color=\"#454cee\"\u003EБоты\u003C\u002Ffont\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nЯ не стал называть этот раздел ИИ — боты в игре слишком примитивные. Здесь нет никакого поиска пути, боты просто ездят по заранее отмеченным точкам на карте, которые называются \u003Cbr\u002F\u003E\r\n\u003Ci\u003Eвейпоинтами\u003C\u002Fi\u003E. Это стандартная практика во многих гонках, однако её реализация отличается от игры к игре. Вообще, для гонок есть несколько общеизвестных практик реализации навигации противников:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003E \u003Cb\u003EВейпоинты с поиском путей\u003C\u002Fb\u003E: довольно комплексный метод, который позволяет сделать, например, гонки в открытом городе, где боты сами смогут находить путь к чекпоинтам. Подобный способ используется для гонок в GTA, например. Строго говоря, сам по себе поиск путей — это тоже набор чекпоинтов и преград, поэтому для такого метода навигации необходимо довольно большое количество информации (пути для трафика, светофоры и т. п).\u003C\u002Fli\u003E\r\n\u003Cli\u003E \u003Cb\u003EВручную раставленые вейпоинты\u003C\u002Fb\u003E: классика. Левелдизайнер вручную расставляет вейпоинты и задает им параметры: например, на этом повороте нужно притормозить, а на этой прямой можно поддать газку.\u003C\u002Fli\u003E\r\n\u003Cli\u003E \u003Cb\u003EЗаранее записанные пути\u003C\u002Fb\u003E: способ с вейпоинтами, где разработчики сначала сами катаются по трассе, стараясь выбить лучшее время, а затем используют записанный набор вейпоинтов для противников.\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\nПри этом некоторые разработчики не стесняются красивых фейков: реализация реалистичного входа в поворот с крутой физикой может быть сложной, особенно когда боты «тупые», поэтому в некоторых играх ботам намеренно подкручивали управляемость или максимальную скорость. Помните, как быстро нагоняли соперники в NFS Underground? Вот то-то же. :)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"oembed\"\u003E\u003Cdiv class=\"tm-iframe_temp\" data-src=\"https:\u002F\u002Fembedd.srv.habr.com\u002Fiframe\u002F651d4d052fbe8876a6177c9d\" data-style=\"\" id=\"651d4d052fbe8876a6177c9d\" width=\"\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003EНекоторые могут вообще записать фейковый трек, по которым машина будет просто скользить, без учета физики авто. Но «беспалевные» реализации этого способа я пока не видел.\u003Cbr\u002F\u003E\r\nПо настоящему «трушный» способ — это когда противники используют всё те же способы, которые использует игрок — т. е. также «нажимают» на виртуальные кнопки и управляют осями автомобиля. Кроме того, частенько каждому сопернику подмешивают дополнительный фактор, куда он будет ехать — иначе машинки будут толпиться друг за другом и будет выглядеть не интересно.\u003Cbr\u002F\u003E\r\nЯ использую классические вейпоинты с подсказками.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"oembed\"\u003E\u003Cdiv class=\"tm-iframe_temp\" data-src=\"https:\u002F\u002Fembedd.srv.habr.com\u002Fiframe\u002F651d4f516f566b30a56f72b9\" data-style=\"\" id=\"651d4f516f566b30a56f72b9\" width=\"\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003EСначала нам необходимо получить угол между машинкой игрока и вейпоинтом. Для этого нам нужно перевести координаты текущего вейпоинта в локальные координаты машинки с учетом её поворота (т. е. относительно неё и её Forward-вектора). Поскольку поворот автомобиля считается в кватернионах, нам нужно помножить матрицу поворота на матрицу позиции машинки в мире и умножить позицию вейпоинта используя полученную инвертированную матрицу. Звучит сложно, на деле легко:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"cs\"\u003E\nprivate Vector3 WorldToLocalSpace(Vector3 worldPoint)\n    {\n      Matrix transform = Matrix.Invert(Matrix.RotationQuaternion(Rigidbody.Rotation) * Matrix.Translation(Rigidbody.Position));\n      Vector4 vector4 = Vector4.Transform(new Vector4(worldPoint, 1f), transform);\n      return new Vector3(vector4.X, vector4.Y, vector4.Z);\n    }\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nЕсли очень условно, то это выражение эквивалентно a — b с учетом поворота. Поскольку мы вычислили локальные координаты вейпоинта, нам остаётся только вычислить угол между ними с помощью классического atan2 и перевести радианы в градусы:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"cs\"\u003Eprivate float AngleBetween(Vector3 v1)\n    {\n      return (float) Math.Atan2((double) v1.X, (double) v1.Z) * 57.29578f;\n    }\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nПолностью логика бота выглядит так:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"cs\"\u003E\nRaceManager race = this.race;\n      if (race.Waypoints.Count &lt; 1)\n        return;\n      Vector3 worldPoint = race.Waypoints[this.CurrentWaypoint].Position + this.MixFactor;\n      Vector3 position = this.Rigidbody.Position;\n      if ((double) Vector3.Distance(this.Rigidbody.Position, worldPoint) &lt; 15.0)\n      {\n        ++this.CurrentWaypoint;\n        this.MixFactor = new Random().NextFloat(-4.5f, 4.5f);\n        if (this.CurrentWaypoint == race.Waypoints.Count)\n        {\n          if (!race.IsRaceEnded)\n            race.IsAIComeFirst = true;\n          this.CurrentWaypoint = 0;\n        }\n        Console.WriteLine(\"Reached waypoint\");\n      }\n      float gas = 1f;\n      if (race.Waypoints[this.CurrentWaypoint].Flags.HasFlag((Enum) WaypointFlags.SlowDown))\n        gas = 0.45f;\n      this.wv = this.WorldToLocalSpace(worldPoint);\n      float val = this.AngleBetween(-this.WorldToLocalSpace(worldPoint));\n      this.Move(gas, Mathf.Clamp(val, -1f, 1f));\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nЛегко и просто, да?\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cfont color=\"#1c22be\"\u003E❯\u003C\u002Ffont\u003E \u003Cfont color=\"#454cee\"\u003EГараж и гонки\u003C\u002Ffont\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nКакой интерес в гонках без… гонок? Поскольку у меня не было особо ассетов для создания пригорода, я решил сделать пересеченную местность. А на пересеченной местности у нас есть как кольцевые гонки, так и спринт — от точки до точки.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F2ae\u002Fd46\u002F5de\u002F2aed465ded9f2b6a5cd8f53de34d4ce6.jpg\" alt=\"image\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F2ae\u002Fd46\u002F5de\u002F2aed465ded9f2b6a5cd8f53de34d4ce6.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПомимо этого, в игре должен быть гараж, где игрок мог бы купить новую машину или тюнинговать текущую. В начале игры выдавалась бы старая дедова копейка (модельки Оки не нашел), а то и Москвич, а потом игрок выигрывал бы в гонках и получал возможности про прокачке тачек и покупке новых. Эээх, лавры Lada Racing Club не дали покоя!\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНачал я с реализации гаража. Сам по себе гараж — отдельный уровень, который обрабатывается своим контроллером, также в гараже применяется самый первый доступный UI в фреймворке — меню со списками. Сам гараж поделен на множество подменю: тюнинг, гонки и автосалон.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"cs\"\u003Ethis.uiColor = new Color4(0.5f, 0.5f, 1f, 1f);\n      this.uiRaces = new UIMenu();\n      for (int index = 0; index &lt; 3; ++index)\n      {\n        RaceParameters p = this.GenerateRace();\n        this.uiRaces.AddItem(p.Name, (Action) (() =\u003E this.game.StartRace(p)), this.uiColor);\n      }\n      this.uiUpgrades = new UIMenu[7];\n      for (int index1 = 0; index1 &lt; this.uiUpgrades.Length; ++index1)\n      {\n        this.uiUpgrades[index1] = new UIMenu();\n        for (int index2 = 0; index2 &lt; this.playerCar.CarInfo.Parts.Count; ++index2)\n        {\n          if (this.playerCar.CarInfo.Parts[index2].Class == index1)\n          {\n            string text = string.Format(\"{0} - {1}руб.\", (object) this.playerCar.CarInfo.Parts[index2].Name, (object) this.playerCar.CarInfo.Parts[index2].Price);\n            int partId = index2;\n            this.uiUpgrades[index1].AddItem(text, (Action) (() =\u003E this.OnPurchasePart(partId)), this.uiColor);\n          }\n        }\n        this.uiUpgrades[index1].AddItem(\"Вернуться\", (Action) (() =\u003E this.currMenu = this.uiUpgrade), this.uiColor);\n      }\n      this.uiPaintBooth = new UIMenu();\n      this.uiUpgrade = new UIMenu();\n      this.uiUpgrade.AddItem(\"Блок цилиндров\", (Action) (() =\u003E this.currMenu = this.uiUpgrades[0]), this.uiColor);\n      this.uiUpgrade.AddItem(\"Топливная система\", (Action) (() =\u003E this.currMenu = this.uiUpgrades[1]), this.uiColor);\n      this.uiUpgrade.AddItem(\"Валы\", (Action) (() =\u003E this.currMenu = this.uiUpgrades[2]), this.uiColor);\n      this.uiUpgrade.AddItem(\"Зажигание\", (Action) (() =\u003E this.currMenu = this.uiUpgrades[3]), this.uiColor);\n      this.uiUpgrade.AddItem(\"Турбонаддув\", (Action) (() =\u003E this.currMenu = this.uiUpgrades[4]), this.uiColor);\n      this.uiUpgrade.AddItem(\"Трансмиссия\", (Action) (() =\u003E this.currMenu = this.uiUpgrades[5]), this.uiColor);\n      this.uiUpgrade.AddItem(\"Шины\", (Action) (() =\u003E this.currMenu = this.uiUpgrades[6]), this.uiColor);\n      this.uiUpgrade.AddItem(\"Высота пружин\", (Action) (() =\u003E { }), this.uiColor);\n      this.uiUpgrade.AddItem(\"Покраска\", (Action) (() =\u003E this.currentState = GarageState.PaintBooth), this.uiColor);\n      this.uiUpgrade.AddItem(\"Вернуться\", (Action) (() =\u003E this.currMenu = this.uiMain), this.uiColor);\n      this.InitCarDealer();\n      this.uiMain = new UIMenu();\n      this.uiMain.AddItem(\"События\", (Action) (() =\u003E this.currMenu = this.uiRaces), this.uiColor);\n      this.uiMain.AddItem(\"Тюнинг\", (Action) (() =\u003E this.currMenu = this.uiUpgrade), this.uiColor);\n      this.uiMain.AddItem(\"Автосалон\", (Action) (() =\u003E\n      {\n        this.currMenu = this.uiCarDealer;\n        this.playerCar.Destroy();\n        this.playerCar = (Car) null;\n      }), this.uiColor);\n      this.uiMain.AddItem(\"Статистика\", (Action) (() =\u003E { }), this.uiColor);\n      this.uiMain.AddItem(\"Главное меню\", (Action) (() =\u003E { }), this.uiColor);\n      this.currMenu = this.uiMain;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nПараллельно с гаражом, была проработана система тюнячек — они тоже описывались в простых текстовых файлах и так или иначе влияли на ходовые качества машины. Правда, визуального тюнинга не было предусмотрена — некому моделлить апгрейды. :(\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F591\u002Fb94\u002F407\u002F591b944072f06a07f69b5a789945686f.png\" alt=\"image\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002F591\u002Fb94\u002F407\u002F591b944072f06a07f69b5a789945686f.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСами гонки можно было начать, обратившись к RaceManager и передав структуру RaceParameters:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"cs\"\u003Epublic struct RaceParameters\n  {\n    public string Name;\n    public string Mode;\n    public int NumOpponents;\n    public int Difficulty;\n    public int Prize;\n    public int ProgressAffection;\n  }\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nПосле этого, игра загружала уровень, создавала ботов на месте spawnPoint (игрок оказывался, как обычно, последним) и запускала гонку. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Ff85\u002Fec4\u002Fa51\u002Ff85ec4a51b9bbc93269b0c5f9dea3b2f.png\" alt=\"image\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Ff85\u002Fec4\u002Fa51\u002Ff85ec4a51b9bbc93269b0c5f9dea3b2f.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"cs\"\u003Epublic void Begin(RaceParameters param)\n    {\n      this.Parameters = param;\n      this.Cars = new Car[8];\n      this.game.track.Load(param.Name);\n      foreach (PhysicsEntity entity in this.game.track.FindEntities(\"waypoint\", true))\n      {\n        Prop prop = (Prop) entity;\n        this.Waypoints.Add(new Waypoint()\n        {\n          Position = entity.Rigidbody.Position,\n          Flags = (WaypointFlags) prop.Flags\n        });\n      }\n      PhysicsEntity playerStart = this.FindPlayerStart();\n      if (playerStart == null)\n        Game.Current.Log.Print(\"Warning: No player start!\");\n      this.Cars[0] = new Car(this.game, this.game.PlayerProfile.Car.Name, false);\n      this.Cars[0].Rigidbody.Position = playerStart.Rigidbody.Position;\n      this.Cars[0].Rigidbody.Rotation = playerStart.Rigidbody.Rotation;\n      PhysicsEntity[] entities = this.game.track.FindEntities(\"startMark\");\n      string[] carList = Car.GetCarList();\n      this.carPositions = new int[entities.Length + 1];\n      for (int index = 0; index &lt; entities.Length; ++index)\n      {\n        this.carPositions[index] = index + 1;\n        this.Cars[index + 1] = (Car) new AICar(this.game, this, carList[new Random(DateTime.Now.Millisecond).Next(0, carList.Length - 1)], false);\n        this.Cars[index + 1].SetColor(Car.Colors[new Random(DateTime.Now.Millisecond + index).Next(0, Car.Colors.Length - 2)]);\n        this.Cars[index + 1].Rigidbody.Position = entities[index].Rigidbody.Position;\n        this.Cars[index + 1].Rigidbody.Rotation = entities[index].Rigidbody.Rotation;\n        this.Cars[index + 1].PlayerName = RaceManager.Names[index];\n      }\n      this.isPlayerCarControllable = true;\n    }\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nА затем каждый кадр просчитывала позиции каждого участника гонки:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"cs\"\u003Eprivate void CalculateCarPlaces()\n    {\n      Array.Sort&lt;int\u003E(this.carPositions, (Comparison&lt;int\u003E) ((a, b) =\u003E\n      {\n        int index;\n        if (this.Cars[a] is AICar)\n          index = ((AICar) this.Cars[a]).CurrentWaypoint;\n        else\n          index = this.CurrentCheckpoint;\n        int num1;\n        if (this.Cars[b] is AICar)\n          num1 = ((AICar) this.Cars[b]).CurrentWaypoint;\n        else\n          num1 = this.CurrentCheckpoint;\n        float num2 = Vector3.Distance(this.Cars[a].Rigidbody.Position, this.Waypoints[index].Position);\n        float num3 = Vector3.Distance(this.Cars[b].Rigidbody.Position, this.Waypoints[index].Position);\n        if (index \u003E num1)\n          return 1;\n        if (index &lt; num1)\n          return -1;\n        if ((double) num2 \u003E (double) num3)\n          return 1;\n        if ((double) num2 &lt; (double) num3)\n          return -1;\n        return 0;\n      }));\n    }\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nВсё! Логикой движения и всем остальным заправляли уже боты. Хотя, там и был костыль на первых этапах, который помечает флаг конца гонки, в остальном — функционал гоночек рабочий. :)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВот мы и дошли до этапа, когда простенькая, но рабочая демка игры у нас уже есть! Игра запускается на GF4, однако работает не совсем корректно — но оптимизировать её под видеокарты тех лет не составит труда (в основном — пережать текстуры, убрать некоторые техники на комбайнерах и запечь статические пропы в батчи).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cfont color=\"#1c22be\"\u003E❯\u003C\u002Ffont\u003E \u003Cfont color=\"#454cee\"\u003EЗаключение\u003C\u002Ffont\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nВот так я и написал гоночки за неделю. Время разработки демки с нуля до состояния, которое вы видите в статье — всего неделю. Да, за это время реально написать прототип гоночной игры. И я ведь знаю, что в комментариях игру будут сравнивать с Lada Racing Club и шутить о сроках её разработки — ведь в этом и суть! Слишком мало реально прикольных ламповых гоночек на жигулях. Вот что у меня получилось в итоге:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"oembed\"\u003E\u003Cdiv class=\"tm-iframe_temp\" data-src=\"https:\u002F\u002Fembedd.srv.habr.com\u002Fiframe\u002F651d54f8962d8d30c121302e\" data-style=\"\" id=\"651d54f8962d8d30c121302e\" width=\"\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИсходниками игры я конечно же поделюсь: тык на GitHub.\u003Cbr\u002F\u003E\r\nА вот линки на загрузку демки:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fdisk.yandex.ru\u002Fd\u002F6znB5UdBq3XqRA\"\u003EГоночки\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fdisk.yandex.ru\u002Fd\u002Fm2yemH3wx04NfQ\"\u003EШутан\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНу а для меня это был своеобразный челлендж. И я его выполнил — у меня получилась рабочая демка на выходе! Я вижу что вам, моим читателям, интересна тематика самопальной разработки игр. Судя по комментариям, вам нравится тематика геймдева, программирования графики и разработки игр. Темой одной из следующих статей может стать описание архитектуры графических ускорителей конца 90х, история их API (без D3D) и написание 3D-игры для 3dfx Voodoo с нуля, на базе Glide!\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКроме того, я хотел бы рассказать о графическом API известного многим «3D декселератора» S3 Virge. Интересна ли вам такая рубрика? Пишите в комментариях!\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Chr\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E\u003Cfont color=\"#454cee\"\u003EВозможно, захочется почитать и это:\u003C\u002Ffont\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003E➤ \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Ftimeweb\u002Farticles\u002F754588\u002F\"\u003EСам написал, сам поиграл: как я написал 2D-игру для Android полностью с нуля, весом менее 1мб?\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E➤ \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Ftimeweb\u002Farticles\u002F751606\u002F\"\u003EПеределываем настенное зеркало во многофункциональное устройство\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E➤ \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Ftimeweb\u002Farticles\u002F760800\u002F\"\u003EТехническое обслуживание вместо ремастеринга. Как спасти старые ПК-игры на новой ОС\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E➤\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Ftimeweb\u002Farticles\u002F751604\u002F\"\u003E Исходники закрыты, но мы не сдадимся: Пишем полностью нативное GUI-приложение под No-Name смартфон без Android\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E➤ \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Ftimeweb\u002Farticles\u002F764232\u002F\"\u003EКак создавалась System Shock\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Ftimeweb.cloud\u002Fvds-vps?utm_source=habr&amp;utm_medium=banner&amp;utm_campaign\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fb5\u002Fpj\u002Fof\u002Fb5pjofdoxth14ro-rjsrn7sbmiy.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fb5\u002Fpj\u002Fof\u002Fb5pjofdoxth14ro-rjsrn7sbmiy.png\"\u002F\u003E\u003C\u002Fa\u003E\u003C\u002Fh4\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"timeweb_статьи"},{"titleHtml":"bodyawm_ништячки"},{"titleHtml":"bodyawm_программирование"},{"titleHtml":"directx"},{"titleHtml":"d3d"},{"titleHtml":"direct3d9"},{"titleHtml":"opengl"},{"titleHtml":"графика"},{"titleHtml":"3D"},{"titleHtml":"3D графика"},{"titleHtml":"GPU"},{"titleHtml":"ненормальное программирование"},{"titleHtml":"игры"},{"titleHtml":"геймдев"},{"titleHtml":"gamedev"},{"titleHtml":"гонки"},{"titleHtml":"ваз"},{"titleHtml":"жигули"},{"titleHtml":"автоваз"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F764526\u002Fe30f0ae9a3d207e6b4c7daa48a51c4d6\u002F","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F764526\u002Fe30f0ae9a3d207e6b4c7daa48a51c4d6\u002F?format=vk","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompanies\\\u002Ftimeweb\\\u002Farticles\\\u002F764526\\\u002F\"},\"headline\":\"Сам написал, сам погонял: Как я написал 3D-гонки «на жигулях» за неделю, полностью с нуля?\",\"datePublished\":\"2023-10-06T11:01:04+03:00\",\"dateModified\":\"2023-10-06T11:18:34+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Богдан\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Статьи про инди-разработку игр &mdash; это всегда интересно и занимательно. Но статьи про разработку игр с нуля, без каких-либо игровых движков &mdash; ещё интереснее! У м...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompanies\\\u002Ftimeweb\\\u002Farticles\\\u002F764526\\\u002F#post-content-body\",\"about\":[\"c_timeweb\",\"h_crazydev\",\"h_vector_graphics\",\"h_gamedev\",\"h_games\",\"f_develop\",\"f_design\",\"f_popsci\"],\"image\":[\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fvz\\\u002Fcw\\\u002Fag\\\u002Fvzcwagsxhxidoafivthxxwegds8.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Fb94\\\u002Fd41\\\u002F7a0\\\u002Fb94d417a0ec4106360d5ef3c882d079d.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F083\\\u002F0a7\\\u002F959\\\u002F0830a79598b160c83802ecf96a9b8318.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Ff42\\\u002F635\\\u002Fd4d\\\u002Ff42635d4d45414edefa818651587eb40.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Fd29\\\u002Fdd9\\\u002F138\\\u002Fd29dd91383553acab71edfa6839aa33f.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F2ae\\\u002F96f\\\u002F6d3\\\u002F2ae96f6d3e4ec2bf175ce297748a02b2.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F909\\\u002Fc83\\\u002Fe9d\\\u002F909c83e9d24639655b3c89a059f158f3.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F5f5\\\u002F60e\\\u002Fb6d\\\u002F5f560eb6daeba3dac22b92b08c2e75f9.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Ffcb\\\u002Fedd\\\u002F2e5\\\u002Ffcbedd2e566e048db43ecf7e6b94ecd4.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F2ae\\\u002Fd46\\\u002F5de\\\u002F2aed465ded9f2b6a5cd8f53de34d4ce6.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F591\\\u002Fb94\\\u002F407\\\u002F591b944072f06a07f69b5a789945686f.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Ff85\\\u002Fec4\\\u002Fa51\\\u002Ff85ec4a51b9bbc93269b0c5f9dea3b2f.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fb5\\\u002Fpj\\\u002Fof\\\u002Fb5pjofdoxth14ro-rjsrn7sbmiy.png\"]}","metaDescription":"Статьи про инди-разработку игр — это всегда интересно и занимательно. Но статьи про разработку игр с нуля, без каких-либо игровых движков — ещё интереснее! У меня есть небольшой фетиш, заключающийся...","mainImageUrl":null,"amp":false,"customTrackerLinks":[]},"polls":[{"id":"42066","timeElapsed":null,"answersType":"radio","votesCount":179,"passCount":49,"textHtml":"Хабраторно?","relatedData":null,"variants":[{"id":"194834","textHtml":"Ууух, хабраторно!!! Как на старый Хабр попал.","votesCount":149,"percent":83.24,"selected":false},{"id":"194836","textHtml":"Почти хабраторно. Нужно больше хабраторности.","votesCount":24,"percent":13.41,"selected":false},{"id":"194838","textHtml":"Нет, и близко не хабраторно!!!","votesCount":6,"percent":3.35,"selected":false}]},{"id":"42068","timeElapsed":null,"answersType":"radio","votesCount":165,"passCount":42,"textHtml":"Интересна ли вам рубрика о разработке игр и программировании графики?","relatedData":null,"variants":[{"id":"194840","textHtml":"Да! С удовольствием почитаю!","votesCount":158,"percent":95.76,"selected":false},{"id":"194842","textHtml":"Нет. Не интересна совсем.","votesCount":7,"percent":4.24,"selected":false}]}],"commentsEnabled":{"status":true,"reason":null},"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"hasPinnedComments":false,"format":"case","banner":null,"multiwidget":null,"readingTime":28,"complexity":"medium","isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"postReasonsList":null,"view":"list","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"viewedPosts":[],"karma":{"userReasonsList":null}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":""},"comments":{"articleComments":{},"articlePinnedComments":{},"searchCommentsResults":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{"timeweb":{"alias":"timeweb","imageUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fcompany\u002F348\u002F5e5\u002Fddc\u002F3485e5ddc997087058a03fd7327e3844.png","titleHtml":"Timeweb Cloud","descriptionHtml":"Строим лучший IaaS в России","relatedData":null,"statistics":{"subscribersCount":1453,"rating":1347.18,"invest":null,"postsCount":1062,"threadsCount":0,"newsCount":28,"vacanciesCount":1,"employeesCount":29,"careerRating":null},"foundationDate":{"year":"2006","month":"05","day":"25"},"location":{"city":{"id":"447733","title":"Санкт-Петербург"},"region":{"id":"1948","title":"Санкт-Петербург и область"},"country":{"id":"168","title":"Россия"}},"siteUrl":"https:\u002F\u002Ftimeweb.cloud\u002F","staffNumber":"201–500 человек","registrationDate":"2011-08-11T14:17:04+00:00","representativeUser":null,"contacts":[],"settings":{"analyticsSettings":[{"type":"ga","trackingId":"UA-52903813-5"}],"branding":null,"status":"active","isStartup":false,"hasActivePolls":false},"metadata":{"titleHtml":"Timeweb Cloud, Санкт-Петербург - Строим лучший IaaS в России с 25 мая 2006 г.","title":"Timeweb Cloud, Санкт-Петербург - Строим лучший IaaS в России с 25 мая 2006 г.","keywords":["DIY или Сделай сам","Старое железо","Читальный зал","Игры и игровые консоли","Разработка под Arduino","timeweb_статьи","javascript","timeweb_статьи_выходного_дня","программирование","timeweb_статьи_перевод","игры","arduino","микроконтроллеры","timeweb","iot","linux","react","история","react.js","typescript","история it","reactjs","автоматизация","интернет вещей","smart home"],"descriptionHtml":"1 062 статьи от авторов компании Timeweb Cloud","description":"1 062 статьи от авторов компании Timeweb Cloud"},"aDeskSettings":null,"careerAlias":"hrtimewebru","schoolAlias":null}},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"multiwidgets":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"multiwidgetLoading":false,"vacancies":{},"companiesGalleries":{},"companiesBanners":{},"companiesLandingVacancies":{},"companiesTechnologies":{},"workplaceInfo":null},"companyAdmin":{"companyInfo":null,"companyInfoLoading":false,"faqArticles":null,"brandingPreviewImageUrl":null,"jivoStatus":0,"adminNotifications":null},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":true},"flows":{"updates":{"countNewPostsBySubscription":null,"countNewThreadsBySubscription":null,"countNewNewsBySubscription":null,"countNewPostsAll":30,"countNewNewsAll":9,"countNewThreadsAll":8},"flows":[{"alias":"develop","id":"1","route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":"6","route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":"2","route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":"3","route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":"4","route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":"7","route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"mobile","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"welcomePage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""}},"me":{"user":null,"uuid":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"modal":{"modals":[]},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"promoData":{"isLoading":false,"hasLoaded":false,"featurer":null,"megaposts":null,"promoLinks":null,"promoPosts":null},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"search":{"searchQueryError":null},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"stories":{"stories":[{"id":"story-590","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F45b\u002F799\u002F86e\u002F45b79986ec96f34a155b11bba319ed84.png","title":"Хабр Карьера","link":"https:\u002F\u002Fu.habr.com\u002FprmWX"},"title":"Менторство в IT","lang":"ru","startTime":"2023-10-06T17:24:00+03:00","finishTime":"2023-10-22T17:24:00+03:00","slides":[{"id":"story-590_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F1ef\u002F0aa\u002F928\u002F1ef0aa9286c8638b203681aa110799f5.png","button":null},{"id":"story-590_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa1a\u002F9c4\u002F3c7\u002Fa1a9c43c7da0e2d76855970e15be5e73.png","button":null},{"id":"story-590_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fdc5\u002Fc06\u002F3ca\u002Fdc5c063ca2973e961474f6b765110c98.png","button":null},{"id":"story-590_4","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F4a1\u002Fc7b\u002Fad8\u002F4a1c7bad8af84a38abfa09416eeb5a5c.png","button":{"title":"Узнать больше","link":"https:\u002F\u002Fu.habr.com\u002FprmWX","colorType":"light"}}]},{"id":"story-588","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F41a\u002Fc52\u002F5a8\u002F41ac525a8029b479529b8503d76d9047.png","title":"Хабр","link":null},"title":"Каким был Хабр в сентябре","lang":"ru","startTime":"2023-10-05T10:30:32+03:00","finishTime":"2023-10-11T15:50:32+03:00","slides":[{"id":"story-588_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9fe\u002F263\u002F650\u002F9fe263650210435186a27468e839d5b7.jpg","button":null},{"id":"story-588_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F959\u002F7fd\u002F520\u002F9597fd520792a128d3f0a5f8399aaab3.jpg","button":{"title":"Читать длинный текст","link":"https:\u002F\u002Fu.habr.com\u002Fsept_01","colorType":"light"}},{"id":"story-588_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F196\u002F6ed\u002F16d\u002F1966ed16db086c4deac770f546aeb3f2.jpg","button":{"title":"К статье","link":"https:\u002F\u002Fu.habr.com\u002Fsept_02","colorType":"light"}},{"id":"story-588_4","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fc82\u002Fa27\u002F574\u002Fc82a27574b20c501cbb7fd9a224fac49.jpg","button":{"title":"Заглянуть в комменты","link":"https:\u002F\u002Fu.habr.com\u002Fsept_03","colorType":"light"}},{"id":"story-588_5","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F1d1\u002F0b9\u002Fc31\u002F1d10b9c31d1dfe7e85fcdeee20a223cb.jpg","button":{"title":"Приобщиться","link":"https:\u002F\u002Fu.habr.com\u002Fsept_04","colorType":"light"}},{"id":"story-588_6","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F2a4\u002F34e\u002F059\u002F2a434e059e65c60e662b76cd893eb63c.jpg","button":{"title":"Тоже посмотреть","link":"https:\u002F\u002Fu.habr.com\u002Fsept_05","colorType":"light"}},{"id":"story-588_7","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe03\u002F90b\u002F133\u002Fe0390b133eb647be045c3642f460e925.jpg","button":null}]},{"id":"story-586","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F8b0\u002F35e\u002Fe84\u002F8b035ee84c821bb85556a8b89ba9f672.png","title":"Хабр","link":null},"title":"По ту сторону собеседований","lang":"ru","startTime":"2023-10-04T14:10:00+03:00","finishTime":"2023-10-11T14:10:39+03:00","slides":[{"id":"story-586_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F350\u002F1f7\u002Fab0\u002F3501f7ab0f70539f72ad397ea8122ef0.jpg","button":null},{"id":"story-586_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe23\u002F8a8\u002F6f3\u002Fe238a86f32a15604c570ca284ad26e3e.jpg","button":{"title":"Графики и списки","link":"https:\u002F\u002Fu.habr.com\u002Fsbs_01","colorType":"light"}},{"id":"story-586_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F80b\u002Fb54\u002F353\u002F80bb54353c634c1c8d768f6af0d104ca.jpg","button":{"title":"Всего понемногу","link":"https:\u002F\u002Fu.habr.com\u002Fsbs_02","colorType":"light"}},{"id":"story-586_4","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fc14\u002F77e\u002F168\u002Fc1477e1680b319a46d2395a84ef6d1f2.jpg","button":{"title":"Итоги расследования","link":"https:\u002F\u002Fu.habr.com\u002Fsbs_03","colorType":"light"}},{"id":"story-586_5","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9d7\u002F688\u002Febb\u002F9d7688ebb2263441d0ccd2fc127dc613.jpg","button":{"title":"Взгляд наоборот","link":"https:\u002F\u002Fu.habr.com\u002Fsbs_04","colorType":"dark"}},{"id":"story-586_6","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F63f\u002F365\u002F9da\u002F63f3659da279130b2b8fe34f2cf36de2.jpg","button":{"title":"Ускориться","link":"https:\u002F\u002Fu.habr.com\u002Fsbs_05","colorType":"light"}},{"id":"story-586_7","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fc24\u002F06e\u002F414\u002Fc2406e4146c063fd59f1ea1be5e0a857.jpg","button":{"title":"История жизни","link":"https:\u002F\u002Fu.habr.com\u002Fsbs_06","colorType":"light"}},{"id":"story-586_8","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fcc7\u002F940\u002F74f\u002Fcc794074f387758a0e93249178bf5c2b.jpg","button":{"title":"Анти-топ","link":"https:\u002F\u002Fu.habr.com\u002Fsbs_07","colorType":"light"}}]},{"id":"story-582","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe3c\u002F24c\u002F3d0\u002Fe3c24c3d0b5dac995250df3f74978d73.png","title":"Хабр Карьера","link":"https:\u002F\u002Fu.habr.com\u002F64zR3"},"title":"Битва пет-проектов","lang":"ru","startTime":"2023-10-02T10:12:00+03:00","finishTime":"2023-10-29T10:12:00+03:00","slides":[{"id":"story-582_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F4a6\u002Fe99\u002F23e\u002F4a6e9923e404eef0499c779430af3d18.png","button":{"title":"Подробнее","link":"https:\u002F\u002Fu.habr.com\u002F64zR3","colorType":"light"}},{"id":"story-582_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Ff74\u002F2ca\u002F5a8\u002Ff742ca5a85f2e6c068e19de292221317.png","button":null},{"id":"story-582_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Ff95\u002F019\u002F16b\u002Ff9501916bf81d95b1f699e48c9e7f562.png","button":null},{"id":"story-582_4","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F966\u002Fbdd\u002F415\u002F966bdd4151319973765f9c86577e0456.png","button":{"title":"Следить за битвой","link":"https:\u002F\u002Fu.habr.com\u002F64zR3","colorType":"light"}}]},{"id":"story-580","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa55\u002Faae\u002F1b5\u002Fa55aae1b596e0c38f0764914d2148a41.png","title":"Хабр","link":null},"title":"Лица SmartDev 2023","lang":"ru","startTime":"2023-09-28T08:01:00+03:00","finishTime":"2023-10-08T23:59:00+03:00","slides":[{"id":"story-580_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fbf1\u002Fd90\u002F57b\u002Fbf1d9057b296d0f3e2d00160c0998ac7.jpg","button":null},{"id":"story-580_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F363\u002F4f1\u002Ff13\u002F3634f1f13ab20010261c0e78ad41602d.png","button":{"title":"Развитие DevOps","link":"https:\u002F\u002Fu.habr.com\u002Fsmdv_01","colorType":"dark"}},{"id":"story-580_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F928\u002F71d\u002Fa63\u002F92871da63ccebb2d53e6fbb732ab7910.png","button":{"title":"Грани LLM","link":"https:\u002F\u002Fu.habr.com\u002Fsmdv_02","colorType":"dark"}},{"id":"story-580_4","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F3a6\u002F823\u002F61c\u002F3a682361c28562a924d4678b6b90a4eb.png","button":{"title":"Мультимодальные ИИ","link":"https:\u002F\u002Fu.habr.com\u002Fsmdv_03","colorType":"dark"}},{"id":"story-580_5","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F75d\u002Faba\u002F926\u002F75daba92654ba4f698629eb4e4216d71.png","button":{"title":"Смотреть интервью","link":"https:\u002F\u002Fu.habr.com\u002Fsmdv_04","colorType":"dark"}},{"id":"story-580_6","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Ff57\u002Fd81\u002F1a7\u002Ff57d811a7df706c40cd5ce19cc804c83.png","button":{"title":"На новый рынок","link":"https:\u002F\u002Fu.habr.com\u002Fsmdv_05","colorType":"dark"}},{"id":"story-580_7","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Faec\u002Fbb7\u002Ff73\u002Faecbb7f73f1a75983c4df5c8d1ef4b26.png","button":{"title":"Антихрупкость","link":"https:\u002F\u002Fu.habr.com\u002Fsmdv_06","colorType":"dark"}},{"id":"story-580_8","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9b2\u002F816\u002Feb8\u002F9b2816eb849d048ef5e91aaee7d90759.png","button":{"title":"Внедрение AppSec","link":"https:\u002F\u002Fu.habr.com\u002Fsmdv_07","colorType":"dark"}},{"id":"story-580_9","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F784\u002F602\u002Ffe7\u002F784602fe7cc437c0a794b6a8dec8b08d.png","button":{"title":"Синтетические данные","link":"https:\u002F\u002Fu.habr.com\u002Fsmdv_08","colorType":"dark"}}]},{"id":"story-036","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa0c\u002F355\u002F563\u002Fa0c355563809fa85dbc88c1792e60682.png","title":"Хабр","link":"https:\u002F\u002Fu.habr.com\u002FywfBl"},"title":"Почему программисты пишут?","lang":"ru","startTime":"2023-09-25T11:00:00+03:00","finishTime":"2023-10-08T23:59:00+03:00","slides":[{"id":"story-036_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F780\u002Fb8c\u002F5cb\u002F780b8c5cb305a046ba9aae5c16eea6aa.jpg","button":null},{"id":"story-036_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fif\u002Fqz\u002Fc6\u002Fifqzc6m-9o6x0iqo6miwf4oug3m.jpeg","button":null},{"id":"story-036_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fqc\u002Fog\u002Fva\u002Fqcogvahks1_jii9r3xtkpgin4sq.jpeg","button":null},{"id":"story-036_4","image":"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fcd\u002Fcy\u002Fnb\u002Fcdcynb5jekmbcm60qmarzydroli.jpeg","button":null},{"id":"story-036_5","image":"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fli\u002F7a\u002Fne\u002Fli7anevj8eheziz7bpglee4gyjy.jpeg","button":null},{"id":"story-036_6","image":"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F8a\u002Fib\u002Fjh\u002F8aibjh3bsnjoc67lt-vm8eadhus.jpeg","button":null},{"id":"story-036_7","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fddf\u002F87f\u002Faa2\u002Fddf87faa2d7006cd8ebad14cf9ca625c.jpg","button":null},{"id":"story-036_8","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F1cc\u002Fb99\u002F7e3\u002F1ccb997e34a625188e24c87d0a39c7f2.jpg","button":null},{"id":"story-036_9","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe4e\u002Ff1b\u002F86a\u002Fe4ef1b86aa9e1e78a4a84c8b7cf9267b.jpg","button":null},{"id":"story-036_10","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F1b9\u002Fbd7\u002Fdeb\u002F1b9bd7debdd0b09ab08783502de1a746.jpg","button":{"title":"Узнать все мотивы","link":"https:\u002F\u002Fu.habr.com\u002FywfBl","colorType":"light"}}]}]},"technotext":{"years":[],"technotextDocForNominees":null,"technotextDocForWinners":null,"technotextInfo":{},"technotextInfoLoading":false,"technotextWinners":{},"technotextWinnersLoading":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"userVotes":{"karmaVotesList":[],"karmaVotesPagesCount":null,"karmaVotesListLoading":false,"commentsVotesList":[],"commentsVotesPagesCount":null,"commentsVotesListLoading":false,"postsVotesList":[],"postsVotesPagesCount":null,"postsVotesListLoading":false,"userVotesList":[],"userVotesPagesCount":null,"userVotesListLoading":false},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"userSpecialization":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"notificationsLoading":false,"notificationsList":[],"notificationsPageCount":0,"pendingMarkNotificationsRead":[],"publicationsLoading":true,"publicationsList":[],"publicationsPageCount":0,"pendingDeletePublications":false,"pendingMarkPublicationsRead":false},"events":{"events":[{"id":"events_46","titleHtml":"Битва пет-проектов","startDay":"2023-09-25","finishDay":"2023-11-30","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fq4\u002Fbl\u002Ftl\u002Fq4bltl5nykwetj_aaaauhdaow6u.png","eventUrl":"https:\u002F\u002Fpet-project.habr.com\u002F?utm_source=special&utm_medium=calendar&utm_campaign=pet_project","geo":[],"isOnline":true,"descriptionHtml":"\u003Cp\u003EСобрали две команды стажеров и&#160;джунов, которые будут работать над пет-проектами под кураторством опытных менторов. А&#160;определять победителей, которые получат стажировку в&#160;компании, будете&#160;вы.\u003C\u002Fp\u003E\u003Cp\u003EВнутри много движухи для зрителей: воркшопы по&#160;разработке, разборы резюме, публичные собеседования, Q&#38;A-сессии и&#160;даже чат, где можно найти себе команду и&#160;запилить какой-нибудь крутой пет-проект. \u003C\u002Fp\u003E\u003Cp xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003EЕсть отличный бонус для начинающих: будем собирать стажировки и&#160;джуновские вакансии с&#160;рынка для еженедельной рассылки в&#160;рамках битвы. \u003C\u002Fp\u003E\u003Cp xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003EРегистрируйтесь, чтобы ничего не&#160;пропустить!\u003C\u002Fp\u003E\u003Cbr \u002F\u003E"},{"id":"events_45","titleHtml":"Joker","startDay":"2023-10-09","finishDay":"2023-10-14","startTime":"16:00","finishTime":"19:30","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fxo\u002Fvw\u002Fd6\u002Fxovwd6picvqcupuizlayrlxiqcq.jpeg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_jkr","geo":["Санкт-Петербург"],"isOnline":true,"descriptionHtml":"\u003Cp\u003EБольшая Java-конференция. 9&#8211;10 октября&#160;&#8212; онлайн часть, 13&#8211;14 октября&#160;&#8212; часть в&#160;Санкт-Петербурге с&#160;возможностью удалённого подключения.\u003C\u002Fp\u003E\u003Cp\u003EВ&#160;программе, как обычно, полезная Java-разработчикам техническая конкретика: инструменты, фреймворки, JVM, языковые нововведения и&#160;не&#160;только.\u003C\u002Fp\u003E\u003Cbr \u002F\u003E"},{"id":"events_55","titleHtml":"Открытый урок «Адаптивная верстка сложных интерфейсов»","startDay":"2023-10-10","finishDay":"2023-10-10","startTime":"20:00","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002F90\u002Fgm\u002Fmn\u002F90gmmni0i-cteiqeexjhahz7ifo.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_otsflt","geo":[],"isOnline":true,"descriptionHtml":"\u003Cp\u003EНаучитесь создавать адаптивные пользовательские интерфейсы за&nbsp;пару часов.\u003C\u002Fp\u003E\u003Cp\u003EЗанятие пройдёт 10&nbsp;октября в&nbsp;20:00 мск в&nbsp;рамках курса &laquo;Flutter Mobile Developer&raquo; на&nbsp;бесплатном открытом уроке &laquo;Адаптивная верстка сложных интерфейсов&raquo; от&nbsp;OTUS.\u003C\u002Fp\u003E\u003Cp\u003EПеред вами откроются новые профессиональные возможности:\u003C\u002Fp\u003E \u003Cul\u003E\u003Cli\u003EРазберёмся, как создавать адаптивные пользовательские интерфейсы, которые могут эффективно масштабироваться и&nbsp;отображаться на&nbsp;разных устройствах.\u003C\u002Fli\u003E \u003Cli\u003EРассмотрим виджеты CustomMultiChildLayout, CustomSingleChildLayout и&nbsp;FlowDelegate, которые позволяют более гибко управлять размещением и&nbsp;позиционированием дочерних виджетов в&nbsp;основном виджете.\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EПреподаватель: Дмитрий Золотов&nbsp;&mdash; Flutter+Kotlin Developer в&nbsp;Yandex.\u003C\u002Fp\u003E\u003Cp\u003EЭто отличная возможность совершенно бесплатно протестировать формат обучения и&nbsp;задать преподавателю любые вопросы в&nbsp;режиме реального времени. Пройдите бесплатное вступительное тестирование прямо сейчас и&nbsp;зарегистрируйтесь на&nbsp;событие.\u003C\u002Fp\u003E"},{"id":"events_61","titleHtml":"Вебинар «Запускаем сайт на Linux Ubuntu 22.04»","startDay":"2023-10-10","finishDay":"2023-10-10","startTime":"19:00","finishTime":"20:30","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002F_6\u002Fei\u002Ftl\u002F_6eitlnsnpntc7xka1flj0-5gko.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_otuslnx","geo":[],"isOnline":true,"descriptionHtml":"\u003Cp\u003EНа&#160;занятии разберём полный процесс запуска популярной CMS Wordpress на&#160;чистой системе с&#160;Ubuntu&#160;22.04. Установим и&#160;настроим все необходимые компоненты. В&#160;результате получим полнофункциональный сайт\u003C\u002Fp\u003E\u003Cbr \u002F\u003E"},{"id":"events_63","titleHtml":"Вебинар «Обзор основных парадигм программирования и их использование в С#»","startDay":"2023-10-11","finishDay":"2023-10-11","startTime":"20:00","finishTime":"21:30","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fi2\u002Fgy\u002F14\u002Fi2gy14re31zlhk46iu3mysjbvno.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_otuscsh","geo":[],"isOnline":true,"descriptionHtml":"\u003Cp\u003EНа&#160;занятии рассмотрим 5&#160;ключевых программных парадигм в&#160;C#: процедурное, объектно-ориентированное, функциональное, событийное и&#160;компонентно-ориентированное программирование. Мы&#160;рассмотрим основные характеристики каждого подхода, их&#160;преимущества и&#160;недостатки, а&#160;также примеры их&#160;применения на&#160;практике.\u003C\u002Fp\u003E\u003Cp\u003EВ&#160;результате вы&#160;сможете:\u003C\u002Fp\u003E\u003Cul xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cli\u003Eразличать и&#160;понимать ключевые концепции каждой парадигмы;\u003C\u002Fli\u003E\u003Cli\u003Eопределить, какая парадигма лучше всего подходит для решения конкретной задачи;\u003C\u002Fli\u003E\u003Cli\u003Eприменять знания на&#160;практике, выбирая правильный подход при разработке программ на&#160;C#;\u003C\u002Fli\u003E\u003Cli\u003Eоценить преимущества и&#160;недостатки каждого подхода в&#160;различных контекстах разработки.\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cbr \u002F\u003E"},{"id":"events_41","titleHtml":"Deep cloud dive. Первая дискуссионная конференция beeline cloud","startDay":"2023-10-12","finishDay":"2023-10-12","startTime":"11:00","finishTime":"14:10","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fsk\u002Fem\u002Fiu\u002Fskemiuqjpev6azkn-imzs2lxasi.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_blndcd","geo":[],"isOnline":true,"descriptionHtml":"\u003Cp\u003EНа&nbsp;одной площадке встретятся эксперты ведущих компаний рынка, чтобы обсудить тренды, затронуть наболевшие проблемы и&nbsp;наметить пути их&nbsp;решения.\u003C\u002Fp\u003E\u003Cp\u003EТри дискуссионных блока:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003ECloud. Локализация рынка облаков, проблематика отечественных продуктов&nbsp;&mdash; что нас ждет дальше?\u003C\u002Fli\u003E\u003Cli\u003EData. Демократизация ИИ&nbsp;и&nbsp;больших данных: примеры внедрений, перспективы развития\u003C\u002Fli\u003E\u003Cli\u003ESecurity. Кибербезопасность: актуальные угрозы, прогнозы и&nbsp;ожидания на&nbsp;2024 год\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EПрограмма мероприятия:\u003Cbr\u003E11:00&nbsp;&mdash; 11:10 Открытие конференции\u003Cbr\u003E11:10&nbsp;&mdash; 12:00 Локализация в&nbsp;сфере Cloud: миграция в&nbsp;российское облако\u003Cbr\u003E12:50&nbsp;&mdash; 13:20 Большие данные и&nbsp;искусственный интеллект: перспективы развития\u003Cbr\u003E13:20&nbsp;&mdash; 14:10&nbsp;Кибербезопасность, ИТ-аутсорсинг: что нас ждет в&nbsp;2024 году\u003C\u002Fp\u003E\u003Cp\u003EДля кого:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003ECTO и&nbsp;руководители бизнеса\u003C\u002Fli\u003E\u003Cli\u003EИТ- и&nbsp;ИБ-директора, топ-менеджеры\u003C\u002Fli\u003E\u003Cli\u003EАрхитекторы, профильные ИТ-специалисты\u003C\u002Fli\u003E\u003Cli\u003EАналитики данных, дата-инженеры\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EНе&nbsp;пропустите интерактивный диалог о&nbsp;рынке ИТ. Мероприятие бесплатное.\u003C\u002Fp\u003E\u003Cp\u003EРегистрируйтесь и&nbsp;мы&nbsp;пришлем вам ссылку на&nbsp;онлайн-трансляцию.\u003C\u002Fp\u003E"},{"id":"event_34","titleHtml":"Курс «Архитектура программного обеспечения» от Яндекс Практикума","startDay":"2023-10-16","finishDay":"2023-10-16","startTime":"09:00","finishTime":"23:00","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fjw\u002Fiy\u002Fj2\u002Fjwiyj2kplvp4rn8uiog74md1xes.jpeg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_yprarch","geo":[],"isOnline":true,"descriptionHtml":"\u003Cp\u003EКурс для опытных разработчиков уровня Middle и&nbsp;Senior, которые хотят научиться создавать с&nbsp;нуля архитектуру сервисов и&nbsp;приложений. Вас ждет много практических заданий, прокачка насмотренности в&nbsp;области архитектуры&nbsp;ПО и&nbsp;экспертиза от&nbsp;техлидов Яндекса и&nbsp;других технологических компаний.\u003C\u002Fp\u003E\u003Cp\u003EЧему вы научитесь:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003Eопределять, какую архитектуру приложения применять&nbsp;&mdash; монолитную или микросервисную;\u003C\u002Fli\u003E\u003Cli\u003Eвыбирать тип хранения данных, формат и&nbsp;протокол обмена данными&nbsp;&mdash; в&nbsp;зависимости от&nbsp;типа вашего приложения;\u003C\u002Fli\u003E\u003Cli\u003Eразбираться в&nbsp;вертикальном и&nbsp;горизонтальном масштабировании, балансировке нагрузки и&nbsp;стратегиях кеширования.\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EГлавное про курс:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003Eвозможность повысить свой грейд, а&nbsp;соответственно&nbsp;&mdash; ценность на&nbsp;рынке;\u003C\u002Fli\u003E\u003Cli\u003E+5&nbsp;новых архитектур в&nbsp;портфолио;\u003C\u002Fli\u003E\u003Cli\u003Eнаставничество и&nbsp;код-ревью от&nbsp;экспертов с&nbsp;большим опытом проектирования архитектуры;\u003C\u002Fli\u003E\u003Cli\u003Eпрограмма длительностью 6&nbsp;месяцев: учёбе нужно уделять от&nbsp;15&nbsp;часов в&nbsp;неделю;\u003C\u002Fli\u003E\u003Cli\u003Eподойдёт для разработчиков с&nbsp;опытом коммерческой бэкенд-разработки от&nbsp;2&nbsp;лет.\u003C\u002Fli\u003E\u003C\u002Ful\u003E"},{"id":"events_54","titleHtml":"Открытый урок «Kafka Streams»","startDay":"2023-10-16","finishDay":"2023-10-16","startTime":"10:00","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Ff0\u002Ffk\u002F7g\u002Ff0fk7gsmss4dhnx_v3mdios0o1a.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_otskfk","geo":[],"isOnline":true,"descriptionHtml":"\u003Cp\u003EДля чего используют Kafka Streams? Она позволяет быстро и&nbsp;просто писать код Java\u002FScala на&nbsp;стороне клиента, при этом разворачивать и&nbsp;использовать распределенное приложение на&nbsp;сервере Kafka в&nbsp;соответствии с&nbsp;DevOps-подходом.\u003C\u002Fp\u003E\u003Cp\u003EИзучите этот инструмент на&nbsp;бесплатном открытом уроке &laquo;Kafka Streams&raquo; от&nbsp;OTUS.\u003C\u002Fp\u003E\u003Cp\u003EВы&nbsp;узнаете: \u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003Eкак создать граф обработчиков с&nbsp;использованием DSL;\u003C\u002Fli\u003E \u003Cli\u003E как читать сообщения из&nbsp;топика;\u003C\u002Fli\u003E \u003Cli\u003E как фильтровать и&nbsp;преобразовывать сообщения;\u003C\u002Fli\u003E \u003Cli\u003E что происходит при изменении ключа;\u003C\u002Fli\u003E \u003Cli\u003E как организовать роутинг сообщений;\u003C\u002Fli\u003E \u003Cli\u003E как работать с&nbsp;состоянием, какие при этом возникают нюансы;\u003C\u002Fli\u003E \u003Cli\u003E как работает join потоков сообщений.\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EЗанятие пройдёт 16&nbsp;октября в&nbsp;20:00 мск в&nbsp;рамках курса &laquo;Apache Kafka&raquo;. Это отличная возможность совершенно бесплатно протестировать формат обучения и&nbsp;задать преподавателю любые вопросы в&nbsp;режиме реального времени.\u003C\u002Fp\u003E\u003Cp\u003EПройдите бесплатное вступительное тестирование прямо сейчас и&nbsp;зарегистрируйтесь на&nbsp;событие.\u003C\u002Fp\u003E"},{"id":"events_60","titleHtml":"Вебинар онлайн-курса «DevOps 1C»","startDay":"2023-10-16","finishDay":"2023-10-16","startTime":"20:00","finishTime":"21:30","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002F-b\u002Fcm\u002F6t\u002F-bcm6tlbmwy1ux3chxa_w5p5sj4.jpeg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_otus1c","geo":[],"isOnline":true,"descriptionHtml":"\u003Cp\u003EНа&nbsp;бесплатном вебинаре &laquo;Переезжаем в&nbsp;EDT из&nbsp;Конфигуратора&raquo; мы&nbsp;обсудим:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003EПочему из&nbsp;Конфигуратора в&nbsp;EDT можно переходить уже сейчас.\u003C\u002Fli\u003E \u003Cli\u003EВозможности, которые в&nbsp;корне изменят ваш процесс разработки.\u003C\u002Fli\u003E \u003Cli\u003EПрактику работы в&nbsp;EDT в&nbsp;Git.\u003C\u002Fli\u003E \u003Cli\u003EУмение эффективно работать с&nbsp;ветками и&nbsp;лаконичное оформление истории своей работы в&nbsp;Git.\u003C\u002Fli\u003E\u003C\u002Ful\u003E \u003Cp\u003EПосле вебинара вы&nbsp;сможете продолжить обучение на&nbsp;курсе по&nbsp;спеццене, в&nbsp;том числе в&nbsp;рассрочку.\u003C\u002Fp\u003E"},{"id":"events_47","titleHtml":"Семинар «Engee – российская платформа для разработки сложных технических систем»","startDay":"2023-10-18","finishDay":"2023-10-18","startTime":"10:00","finishTime":"15:00","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fax\u002Fek\u002Fha\u002Faxekhakoitd28x3e-yf5xg96nlc.jpeg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_xpn","geo":["Москва"],"isOnline":false,"descriptionHtml":"\u003Cp\u003EEngee&#160;&#8212; самая новая платформа на&#160;российском рынке, предназначенная для разработки сложных технических систем. Она позволяет инженерам и&#160;конструкторам предприятий наукоемкой отрасли создавать качественные и&#160;эффективные продукты в&#160;высокотехнологичном программном окружении.\u003C\u002Fp\u003E\u003Cp\u003EНа&#160;семинаре технические специалисты ЦИТМ Экспонента проведут подробную демонстрацию возможностей нашей среды. Вы&#160;увидите актуальные промышленные возможности использования платформы, узнаете, как работать с&#160;интерактивными скриптами и&#160;с&#160;графическими инструментами для построения динамических моделей.\u003C\u002Fp\u003E\u003Cp xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003EНаш семинар будет полезен специалистам, решающим широкий спектр задач, затрагивающих в&#160;своей работе машинное обучение, оптимизацию и&#160;искусственный интеллект, ТАУ, цифровую обработку сигналов, радиосвязь и&#160;многое другое\u003C\u002Fp\u003E\u003Cbr \u002F\u003E"},{"id":"events_56","titleHtml":"Вебинар онлайн-курса «Team Lead разработки»","startDay":"2023-10-18","finishDay":"2023-10-18","startTime":"20:00","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fqk\u002Fdq\u002Few\u002Fqkdqewxgmbulrf5hbjxe2l-fp-m.jpeg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_otusvbtml","geo":[],"isOnline":true,"descriptionHtml":"\u003Cp\u003EОтпуск... Двухнедельный... Звучит как мечта для многих управленцев. Но&nbsp;почему она так недостижима? Что мешает тимлиду уйти в&nbsp;отпуск? Где внутренние причины, где внешние? Узнайте на&nbsp;бесплатном вебинаре онлайн-курса &laquo;Team Lead разработки&raquo; 18&nbsp;октября в&nbsp;20:00&nbsp;ч мск&nbsp;&mdash; &laquo;Готовь сани летом.. или Почему тимлиду нужно начинать готовить команду к&nbsp;своему отпуску еще с&nbsp;осени&raquo;.\u003C\u002Fp\u003E\u003Cp\u003EНа&nbsp;занятии обсудим:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003EКогда можно уйти в&nbsp;отпуск, а&nbsp;когда всё&nbsp;же не&nbsp;стоит?\u003C\u002Fli\u003E \u003Cli\u003EКак подготовить команду и&nbsp;заказчика к&nbsp;своему отпуску?\u003C\u002Fli\u003E \u003Cli\u003EПочему длительный отпуск важен для руководителя?\u003C\u002Fli\u003E \u003Cli\u003EКак переключаться в&nbsp;режим отдыха?\u003C\u002Fli\u003E \u003Cli\u003EКак включиться в&nbsp;работу после?\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EВебинар будет полезен:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003EНачинающим тимлидам и&nbsp;тем, кто близок к&nbsp;выгоранию.\u003C\u002Fli\u003E \u003Cli\u003EУставшим менеджерам, которых окружают безответственные работники.\u003C\u002Fli\u003E\u003C\u002Ful\u003E"},{"id":"events_51","titleHtml":"Питч-сессия pravo (tech) impulse","startDay":"2023-10-19","finishDay":"2023-10-19","startTime":"15:45","finishTime":"17:30","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002F9n\u002Fcx\u002F0q\u002F9ncx0qfe5ovxbbdywoet7scq5za.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_prt","geo":["Москва"],"isOnline":false,"descriptionHtml":"\u003Cp\u003EКомпания PravoTech — разработчик решений для автоматизации бизнес-процессов, пионер LegalTech в России — запускает конкурс IT-проектов pravo (tech) impulse в рамках форума pravo (tech) — крупнейшего делового события в Европе, посвященного LegalTech и цифровой трансформации юридической функции.\u003C\u002Fp\u003E\u003Cp\u003EУчастники, создающие решения в сферах LegalTech, FinTech (FPM), InsurTech, ITSM, ERP (CRM, HRM), CLM (контрактный менеджмент), могут подать заявки до 4 октября. Организаторы принимают проекты на любой стадии: от идеи с описанием технологии, принципов работы и экономического эффекта до готового продукта с выстроенными продажами.\u003C\u002Fp\u003E\u003Cp\u003EВыбор победителя будет происходить в два этапа: заочный отбор заявок и питч-сессия. Эксперты конкурса будут обращать внимание на новизну идеи, актуальность и перспективность применения технологии в своей сфере.\u003C\u002Fp\u003E\u003Cp\u003EВо время питч-сессии стартапы представят свои идеи и проекты жюри и участникам мероприятия, среди которых руководители юридических департаментов корпораций, директора по трансформации бизнеса и IT, консультанты и интеграторы, LegalOps-специалисты, практикующие юристы.\u003C\u002Fp\u003E\u003Cp\u003EАвторы лучшего проекта гарантированно получат денежный приз, а также — при условии взаимного интереса жюри и самого конкурсанта — возможность для дальнейшего коммерческого сотрудничества с PravoTech. Условия такого взаимодействия будут определены индивидуально.\u003C\u002Fp\u003E\u003Cp\u003EЖюри конкурса: \u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003EАлексей Пелевин, CEO и основатель PravoTech;  \u003C\u002Fli\u003E\u003Cli\u003EКирилл Фадеев, коммерческий директор PravoTech;  \u003C\u002Fli\u003E\u003Cli\u003EИлья Королев, партнер и управляющий портфелем ФРИИ, бизнес-ангел.\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EЗаявку можно подать до&nbsp;10&nbsp;октября в&nbsp;электронном виде на&nbsp;сайте конкурса.&nbsp;13&nbsp;октября организаторы объявят проекты-финалисты, которые представят свои идеи 19&nbsp;октября в&nbsp;рамках форума pravo (tech).\u003C\u002Fp\u003E"},{"id":"events_59","titleHtml":"Вебинар «Разработка бэкенда на Clojure»","startDay":"2023-10-24","finishDay":"2023-10-24","startTime":"20:00","finishTime":"21:30","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fa2\u002Fwg\u002F7a\u002Fa2wg7ai6rwmnjibfydenz0p8bbs.jpeg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_otusbcclj","geo":[],"isOnline":true,"descriptionHtml":"\u003Cp\u003EПринципы, на&nbsp;которых основана концепция чистой архитектуры, хорошо описаны и&nbsp;знакомы многим разработчикам. Уникальность этой концепции заключается в&nbsp;том, что её&nbsp;реализация не&nbsp;привязана к&nbsp;какому-либо языку программирования или набору инструментов в&nbsp;том или ином технологическом стеке.\u003C\u002Fp\u003E\u003Cp\u003E24&nbsp;октября в&nbsp;20:00 мск в&nbsp;течение бесплатного вебинара онлайн-курса &laquo;Clojure Developer&raquo;&nbsp;&mdash; &laquo;Duct и&nbsp;Clean Architecture в&nbsp;Clojure&raquo;&nbsp;&mdash; мы&nbsp;попрактикуемся применять эти принципы с&nbsp;использованием языка программирования Clojure и&nbsp;фреймворка Duct. Познакомимся с&nbsp;его модульной системой, реализуем DI-контейнер, подключим адаптеры во&nbsp;все порты и&nbsp;вообще сделаем все, как дедушка Боб нам завещал.\u003C\u002Fp\u003E\u003Cp\u003EЭкспертизой поделится руководитель программы и&nbsp;практик Сергей Ткаченко (Clojure Software developer&nbsp;\u002F Team Lead).\u003C\u002Fp\u003E"},{"id":"event_31","titleHtml":"Russia Risk Conference 2023 — 19-я конференция по риск-менеджменту","startDay":"2023-10-25","finishDay":"2023-10-26","startTime":"10:00","finishTime":"19:00","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fhz\u002Ftg\u002F9k\u002Fhztg9k1w_eanhcx-7f184wdouri.jpeg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_rskcnf","geo":["Москва"],"isOnline":true,"descriptionHtml":"\u003Cp\u003E25&ndash;26 октября состоится Russia Risk Conference 2023&nbsp;&mdash; ключевая конференция по&nbsp;управлению рисками в&nbsp;финансовой сфере.\u003C\u002Fp\u003E\u003Cp\u003EПрограмма конференции включает темы:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003EТехнологии искусственного интеллекта в&nbsp;управлении рисками: LLM, применение&nbsp;ML, управление модельным риском, Reject Inference, Muti-head graph attention-сети, Reinforcement Learning\u003C\u002Fli\u003E\u003Cli\u003EОбсуждение макроэкономических трендов, кредитно-денежной и&nbsp;регуляторной политики. Прогнозирование тенденций риска\u003C\u002Fli\u003E\u003Cli\u003EКредитные риски: тенденции в&nbsp;управлении кредитными рисками в&nbsp;новых условиях. Моделирование отклика клиента на&nbsp;действия кредитора. Оптимизация стратегий кредитования\u003C\u002Fli\u003E\u003Cli\u003EКомплексное управление рисками. Блиц-интервью с&nbsp;директорами по&nbsp;рискам страховых, лизинговых, микрофинансовых и&nbsp;других компаний&nbsp;&mdash; представителей финансового сектора\u003C\u002Fli\u003E\u003Cli\u003EОперационные риски и&nbsp;кибербезопасность\u003C\u002Fli\u003E\u003Cli\u003EЦифровые финансовые активы (ЦФА): риски и&nbsp;возможности цифрового рубля\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EДля кого: CRO, топ-менеджеров, курирующих управление рисками, специалистов по&nbsp;мониторингу и&nbsp;валидации рисков, риск-менеджеров и&nbsp;риск-аналитиков, data scientists, экспертов-практиков в&nbsp;области управления кредитными, рыночными и&nbsp;операционными рисками, специалистов управлений количественного анализа и&nbsp;моделирования рисков.\u003C\u002Fp\u003E"},{"id":"events_62","titleHtml":"«Спокойно, договоримся!» — тренинг по переговорам и отношениям с клиентами в B2B","startDay":"2023-11-03","finishDay":"2023-11-04","startTime":"10:00","finishTime":"18:00","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Ffb\u002F-d\u002F8o\u002Ffb-d8oidhievh0ye-lnmndawdaa.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_hfltr","geo":["Москва"],"isOnline":false,"descriptionHtml":"\u003Cp\u003EПрокачаем навыки переговорщика и&#160;научим, как пересобрать отношения с&#160;клиентами в&#160;B2B. Мы&#160;не&#160;коучи, а&#160;топ-менеджеры с&#160;реальным опытом в&#160;большом бизнесе. За&#160;10+&#160;лет работы мы&#160;научились дружить с&#160;клиентами не&#160;только на&#160;начальном этапе, но&#160;и&#160;развивать зрелые проекты. \u003C\u002Fp\u003E\u003Cp\u003EТренинг будет полезен вам, если:\u003Cem\u003E \u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cul xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cli\u003Eвы&#160;отвечаете за&#160;отношения с&#160;клиентами, ведение проектов и&#160;управление людьми;\u003C\u002Fli\u003E\u003Cli\u003Eвы&#160;много и&#160;тесно работаете с&#160;заказчиками&#160;&#8212; внешними и&#160;внутренними;\u003C\u002Fli\u003E\u003Cli\u003Eвы&#160;работаете в&#160;b2b-продажах в&#160;IT.\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003EКто проведет: \u003C\u002Fp\u003E\u003Cul xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cli\u003EКонстантин Степанов, исполнительный директор HFLabs. За&#160;три года привлек 14&#160;крупных клиентов.\u003C\u002Fli\u003E\u003Cli\u003EНикита Назаров, технический директор HFLabs. Умеет делать так, чтобы клиент становился постоянным клиентом.\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003EСтань участником закрытого клуба по&#160;переговорам с&#160;разбором личных кейсов и&#160;поддержкой экспертов.\u003C\u002Fp\u003E\u003Cbr \u002F\u003E"},{"id":"events_57","titleHtml":"IT Recruiting – HR Forum 2023","startDay":"2023-11-08","finishDay":"2023-11-10","startTime":"9:00","finishTime":"18:00","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fu-\u002Fc5\u002Fds\u002Fu-c5dsndgew3qdycfdjbzu7pn94.jpeg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_ithrfrm","geo":["Москва"],"isOnline":false,"descriptionHtml":"\u003Cp\u003EКак выглядит новый ландшафт рынка IT-кадров? Что сейчас в&nbsp;приоритете у&nbsp;востребованных специалистов? Как выстроить систему обучения внутри компании? Как выиграть конкуренцию за&nbsp;кадры у&nbsp;ведущих IT-компаний?\u003C\u002Fp\u003E \u003Cp\u003E8, 9, 10&nbsp;ноября на&nbsp;iT&nbsp;Recruiting Forum 2023 руководители сферы&nbsp;HR из&nbsp;компаний крупного и&nbsp;среднего бизнеса соберутся для обсуждения лучших практик привлечения, адаптации и&nbsp;развития IT-персонала. В&nbsp;течение трех дней эксперты поделятся реальными кейсами, проанализируют ошибки и&nbsp;трудности, возникшие при реализации новых практик, а&nbsp;также представят аудитории алгоритмы решения актуальных задач.\u003C\u002Fp\u003E \u003Cp\u003E8&nbsp;ноября в&nbsp;рамках форума пройдет день мастер-классов, где эксперты помогут на&nbsp;практике отработать ключевые навыки и&nbsp;зарядиться новыми идеями в&nbsp;рамках групповой работы с&nbsp;коллегами.\u003C\u002Fp\u003E"},{"id":"events_49","titleHtml":"Онлайн IT HR-конференция HR42","startDay":"2023-11-17","finishDay":"2023-11-18","startTime":"10:00","finishTime":"14:00","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fq1\u002Fts\u002Fcv\u002Fq1tscv1wzys8-zdrvnumhwz0ely.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_hr42","geo":[],"isOnline":true,"descriptionHtml":"\u003Cp\u003EHR42&nbsp;&mdash; онлайн-конференция про управление международными и&nbsp;распределенными командами в&nbsp;IT.\u003C\u002Fp\u003E"},{"id":"events_53","titleHtml":"HighLoad++ 2023","startDay":"2023-11-27","finishDay":"2023-11-28","startTime":"9:00","finishTime":"20:00","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fxo\u002F6u\u002Fw1\u002Fxo6uw1o3hf9y9tsxzq4pvya719y.jpeg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_hld","geo":["Москва"],"isOnline":true,"descriptionHtml":"\u003Cp\u003EHighLoad++ 2023&nbsp;&mdash; юбилейная, 20-я конференция HighLoad++. И&nbsp;это будет больше, чем конференция: 3000&nbsp;участников, 120+&nbsp;спикеров, 11&nbsp;залов, 5+&nbsp;мастер-классов.\u003C\u002Fp\u003E \u003Cp\u003EВ&nbsp;этом году в&nbsp;рамках HighLoad++ 2023 пройдет Golang Conf 2023&nbsp;&mdash; конференция для Go-разработчиков. Поговорим о&nbsp;лучших практиках, технологиях, архитектуре и&nbsp;фреймворках, добавим хардкора. И, конечно, 2&nbsp;дня живого общения с&nbsp;единомышленниками и&nbsp;коллегами, нетворкинг, интересные кейсы, последние новости индустрии и&nbsp;современные подходы в&nbsp;разработке высоконагруженных систем.\u003C\u002Fp\u003E \u003Cp\u003EЖдем вас 27&nbsp;и&nbsp;28&nbsp;ноября в&nbsp;Москве на&nbsp;HighLoad 2023&nbsp;&mdash; мероприятии с&nbsp;самой высокой концентрацией IT- профессионалов страны.\u003C\u002Fp\u003E"},{"id":"events_50","titleHtml":"Курс «Разработка высокоскоростных устройств и систем передачи данных»","startDay":"2023-12-09","finishDay":"2023-12-11","startTime":"10:00","finishTime":"17:00","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fsc\u002Fie\u002Ffp\u002Fsciefp-fox1b1kyqn9bwa5ll2um.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_nish","geo":["Москва"],"isOnline":false,"descriptionHtml":"\u003Cp\u003EНовая Инженерная Школа проводит курс повышения квалификации, рассчитанный на&nbsp;инженеров-схемотехников, а&nbsp;также системных инженеров, занимающихся разработкой высокоскоростных устройств.\u003C\u002Fp\u003E\u003Cp\u003EИзучение курса позволит слушателям осознанно подходить к&nbsp;разработке, используя определенный маршрут проектирования, в&nbsp;частности:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003Eпонимать сущность высокоскоростных сигналов;\u003C\u002Fli\u003E\u003Cli\u003Eпонимать проблемы и&nbsp;риски, возникающие при разработке высокоскоростных устройств;\u003C\u002Fli\u003E\u003Cli\u003Eпрогнозировать и&nbsp;нивелировать проблемы на&nbsp;этапе эскизной разработки;\u003C\u002Fli\u003E\u003Cli\u003Eанализировать и&nbsp;устранять проблемы на&nbsp;этапе верификации разработанного устройства;\u003C\u002Fli\u003E\u003Cli\u003Eпроверять прототипы с&nbsp;использованием современной измерительной аппаратуры.\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EТемы курса:\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003EВведение. История развития проблем целостности сигналов и&nbsp;питания.\u003C\u002Fli\u003E\u003Cli\u003EОсновные положения.\u003C\u002Fli\u003E\u003Cli\u003EИдеальная линия передач.\u003C\u002Fli\u003E\u003Cli\u003EПерекрестные помехи.\u003C\u002Fli\u003E\u003Cli\u003EРеальные проводники.\u003C\u002Fli\u003E\u003Cli\u003EДиэлектрики.\u003C\u002Fli\u003E\u003Cli\u003EОсновы теории цепей.\u003C\u002Fli\u003E\u003Cli\u003EСхемотехника.\u003C\u002Fli\u003E\u003Cli\u003EЭквализация.\u003C\u002Fli\u003E\u003Cli\u003EБюджет.\u003C\u002Fli\u003E\u003Cli\u003EПримеры высокоскоростных интерфейсов.\u003C\u002Fli\u003E\u003Cli\u003EЦелостность питания.\u003C\u002Fli\u003E\u003Cli\u003EИзмерения и&nbsp;моделирование.\u003C\u002Fli\u003E\u003C\u002Fol\u003E"},{"id":"events_58","titleHtml":"Курс «Обеспечение электромагнитной совместимости изделий современной техники»","startDay":"2023-12-18","finishDay":"2023-12-20","startTime":"10:00","finishTime":"17:00","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fsl\u002Flv\u002Fe0\u002Fsllve0c9tpnoqnc20iidt7p9ue8.jpeg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_nsh","geo":["Москва"],"isOnline":false,"descriptionHtml":"\u003Cp\u003EНовая Инженерная Школа проводит курс повышения квалификации, направленный на&nbsp;формирование или совершенствование профессиональных компетенций в&nbsp;области внутрисистемной электромагнитной совместимости (ЭМС) изделий современной техники для конструкторов радиоэлектронных средств (РЭС).\u003C\u002Fp\u003E \u003Cp\u003EНастоящая программа рассчитана на&nbsp;инженерно-технических работников с&nbsp;высшим профессиональным образованием, занимающихся конструкторским и&nbsp;технологическим проектированием радиоэлектронной, электронно-вычислительной аппаратуры, систем автоматики и&nbsp;управления и&nbsp;т.п. различного назначения, а&nbsp;также на&nbsp;руководителей среднего звена проектных организаций.\u003C\u002Fp\u003E \u003Cp\u003EТемы курса:\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003EВведение в&nbsp;проблему ЭМС.\u003C\u002Fli\u003E \u003Cli\u003EСертификационные требования ЭМС.\u003C\u002Fli\u003E \u003Cli\u003EСхемотехнические методы обеспечения ЭМС.\u003C\u002Fli\u003E \u003Cli\u003EПомехи в&nbsp;межсоединениях.\u003C\u002Fli\u003E \u003Cli\u003EЭкранирование аппаратуры.\u003C\u002Fli\u003E \u003Cli\u003EМощные электромагнитные воздействия на&nbsp;технические средства и&nbsp;методы защиты.\u003C\u002Fli\u003E \u003Cli\u003EОбеспечение радиационной стойкости современной РЭА.\u003C\u002Fli\u003E\u003C\u002Fol\u003E"}]}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.62e21544.js" defer></script><script src="https://assets.habr.com/habr-web/js/7298.c8f1d73c.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.5e6fa0f9.js" defer></script>



    <script async src="https://www.googletagmanager.com/gtag/js?id=G-S28W1WC23F"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
<script src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true"></script>
</body>
</html>
