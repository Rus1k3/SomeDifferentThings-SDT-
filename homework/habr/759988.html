<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover,maximum-scale=1,user-scalable=0">
  <meta name="referrer" content="unsafe-url">
  <title>Протоколы семейства TCP/IP. Теория и практика / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }

    /* non-breaking hyphen */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/l/font?kit=KFOlCnqEu92Fr1MmEU9vBh0_IsHAlmrO6g&skey=ee881451c540fdec&v=v29) format('woff2');
      unicode-range: U+02011;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.0da14ebf.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.62e21544.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.04c2974e.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.5e6fa0f9.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/js/7298.c8f1d73c.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.0da14ebf.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.04c2974e.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.7af0b043442455352b71a8d77759e80f.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/companies\/ruvds\/articles\/759988\/"},"headline":"Протоколы семейства TCP\/IP. Теория и практика","datePublished":"2023-10-03T12:00:02+03:00","dateModified":"2023-10-03T13:33:23+03:00","author":{"@type":"Person","name":"artyomsoft"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"В сети можно найти огромное количество материала о том, как функционируют сети на базе стека протоколов TCP\/IP, а также как писать компьютерные программы с сет...","url":"https:\/\/habr.com\/ru\/companies\/ruvds\/articles\/759988\/#post-content-body","about":["c_ruvds","h_python","h_system_programming","h_network_technologies","f_develop","f_admin"],"image":["https:\/\/habr.com\/share\/publication\/759988\/793e00b92b7ff229c37857cbe6dc98b1\/","https:\/\/habrastorage.org\/webt\/gl\/fy\/ym\/glfyymidrcebbagd9c3p6oz3k7u.png","https:\/\/habrastorage.org\/webt\/xl\/ev\/8z\/xlev8zvnvvhjcp4tzh7lkcwuwrq.png","https:\/\/habrastorage.org\/webt\/rm\/e_\/cd\/rme_cdwpuntkx3t0pcozi9baiuo.png","https:\/\/habrastorage.org\/webt\/rt\/a6\/ot\/rta6otjht2jdenxbw9hamkt7g_c.png","https:\/\/habrastorage.org\/webt\/ee\/fe\/wm\/eefewm76b5f2atszq3aibtjp14w.png","https:\/\/habrastorage.org\/webt\/-r\/yb\/ud\/-rybudbfve7pvuwx7o3-acvivqo.png","https:\/\/habrastorage.org\/webt\/dx\/21\/xj\/dx21xj1srh19tbds3hdbepy-zjk.png","https:\/\/habrastorage.org\/webt\/g5\/06\/db\/g506db_3gsblkr6bctrpk6tzl_0.png","https:\/\/habrastorage.org\/webt\/ah\/mx\/es\/ahmxes9jgl-re2ulncqr1xvua3q.png","https:\/\/habrastorage.org\/webt\/47\/ew\/2a\/47ew2a1okiz40lti8bvyfjmjr30.png","https:\/\/habrastorage.org\/webt\/v7\/no\/fh\/v7nofhxhmeu57t495bocjapppwa.png","https:\/\/habrastorage.org\/webt\/4x\/va\/vx\/4xvavx7hdhkpv5ee3lnnxdy_ivo.png","https:\/\/habrastorage.org\/webt\/gk\/nq\/il\/gknqilxkrhy67ubbd0civifrcus.png","https:\/\/habrastorage.org\/webt\/jo\/s_\/ss\/jos_sslvm3c3-ggneokp4fyp-kw.png","https:\/\/habrastorage.org\/webt\/8s\/3l\/g5\/8s3lg50dcuer7vd8cxqpxetxniq.png","https:\/\/habrastorage.org\/webt\/qk\/0j\/3e\/qk0j3e9olcwuz3queuuhc5w-_q4.png","https:\/\/habrastorage.org\/webt\/tp\/sk\/z-\/tpskz-7w7a8e74isoowuep40xeg.png"]}</script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.144.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_com"><meta data-vue-meta="ssr" property="og:site_name" content="Хабр" data-vmid="og:site_name"><meta data-vue-meta="ssr" property="og:title" content="Протоколы семейства TCP/IP. Теория и практика" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Протоколы семейства TCP/IP. Теория и практика" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Протоколы семейства TCP/IP. Теория и практика" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="В сети можно найти огромное количество материала о том, как функционируют сети на базе стека протоколов TCP/IP, а также как писать компьютерные программы с сетевыми возможностями. При рассмотрении..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="В сети можно найти огромное количество материала о том, как функционируют сети на базе стека протоколов TCP/IP, а также как писать компьютерные программы с сетевыми возможностями. При рассмотрении..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="В сети можно найти огромное количество материала о том, как функционируют сети на базе стека протоколов TCP/IP, а также как писать компьютерные программы с сетевыми возможностями. При рассмотрении..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="В сети можно найти огромное количество материала о том, как функционируют сети на базе стека протоколов TCP/IP, а также как писать компьютерные программы с сетевыми возможностями. При рассмотрении..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="В сети можно найти огромное количество материала о том, как функционируют сети на базе стека протоколов TCP/IP, а также как писать компьютерные программы с сетевыми возможностями. При рассмотрении..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habrastorage.org/webt/gl/fy/ym/glfyymidrcebbagd9c3p6oz3k7u.png" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habrastorage.org/webt/gl/fy/ym/glfyymidrcebbagd9c3p6oz3k7u.png" data-vmid="og:image"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habrastorage.org/webt/gl/fy/ym/glfyymidrcebbagd9c3p6oz3k7u.png" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habrastorage.org/webt/gl/fy/ym/glfyymidrcebbagd9c3p6oz3k7u.png" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habrastorage.org/webt/gl/fy/ym/glfyymidrcebbagd9c3p6oz3k7u.png?format=vk" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="759988" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2023-10-03T09:00:02.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" content="https://habr.com/ru/companies/ruvds/articles/759988/" property="og:url" data-vmid="og:url"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" name="keywords" content="ruvds_статьи, tcp/ip, tcp, udp, icmp, dns, arp, ip, scapy, wireshark">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/publications/759988/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/companies/ruvds/articles/759988/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" rel="image_src" href="https://habrastorage.org/webt/gl/fy/ym/glfyymidrcebbagd9c3p6oz3k7u.png" data-vmid="image:href">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
  <script async src="https://unpkg.com/pwacompat" crossorigin="anonymous"></script>
  <script>window.yaContextCb = window.yaContextCb || []</script>
  <script src="https://yandex.ru/ads/system/context.js" async></script>
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <div class="tm-feature tm-feature"><!----></div> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><div class="tm-header__burger-nav"><button type="button" class="tm-header__button tm-header__button_burger"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon-burger"><title>Меню</title> <use xlink:href="/img/megazord-v28.2fb1b1c1..svg#header-burger"></use></svg></button></div> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <!----> <div class="tm-header-user-menu tm-header_user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search"><title>Поиск</title> <use xlink:href="/img/megazord-v28.2fb1b1c1..svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item"><button data-test-id="menu-toggle-guest" class="tm-header-user-menu__toggle"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_white"><title>Профиль</title> <use xlink:href="/img/megazord-v28.2fb1b1c1..svg#header-user"></use></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <!----> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" companyName="ruvds" data-async-called="true" class="tm-page"><div class="tm-page-width"><div class="tm-page__header"><div class="tm-company-card__branding tm-company-article__branding tm-company-card__branding_loading"><div class="tm-company-card__branding-placeholder"><!----></div> <a href="https://ruvds.com/ru/windows/?utm_source=habr&amp;utm_medium=banner&amp;utm_campaign=promo&amp;utm_content=link&amp;?erid=LjN8KAR3S"><img src="//habrastorage.org/getpro/habr/branding/0fd/0cd/3f6/0fd0cd3f63dac0cb6ac8359cac986779.jpg" width="100%" class="tm-company-card__branding-image"></a></div></div> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><!----> <div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__icon pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v28.2fb1b1c1..svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet tm-article-snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/artyomsoft/" title="artyomsoft" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt height="32" src="//habrastorage.org/r/w64/getpro/habr/avatars/a58/d90/974/a58d90974bec0e4d915c6ddb006a93cc.jpg" width="32" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user tm-user-info__user_appearance-default"><a href="/ru/users/artyomsoft/" class="tm-user-info__username">
      artyomsoft
      <!----></a> <span class="tm-article-datetime-published"><time datetime="2023-10-03T09:00:02.000Z" title="2023-10-03, 12:00">3  окт   в 12:00</time></span></span></span></div> <!----></div> <h1 lang="ru" class="tm-title tm-title_h1"><span>Протоколы семейства TCP/IP. Теория и практика</span></h1> <div class="tm-article-snippet__stats"><div class="tm-article-complexity tm-article-complexity_complexity-medium"><span class="tm-svg-icon__wrapper tm-article-complexity__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>Уровень сложности</title> <use xlink:href="/img/megazord-v28.2fb1b1c1..svg#complexity-medium"></use></svg></span> <span class="tm-article-complexity__label">
    Средний
  </span></div> <div class="tm-article-reading-time"><span class="tm-svg-icon__wrapper tm-article-reading-time__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>Время на прочтение</title> <use xlink:href="/img/megazord-v28.2fb1b1c1..svg#clock"></use></svg></span> <span class="tm-article-reading-time__label">
    23 мин
  </span></div> <span class="tm-icon-counter tm-data-icons__item"><svg height="24" width="24" class="tm-svg-img tm-icon-counter__icon"><title>Количество просмотров</title> <use xlink:href="/img/megazord-v28.2fb1b1c1..svg#counter-views"></use></svg> <span class="tm-icon-counter__value">23K</span></span></div> <div class="tm-publication-hubs__container"><div class="tm-publication-hubs"><span class="tm-publication-hub__link-container"><a href="/ru/companies/ruvds/articles/" class="router-link-active tm-publication-hub__link"><span>Блог компании RUVDS.com</span> <!----></a></span><span class="tm-publication-hub__link-container"><a href="/ru/hubs/python/" class="tm-publication-hub__link"><span>Python</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-publication-hub__link-container"><a href="/ru/hubs/system_programming/" class="tm-publication-hub__link"><span>Системное программирование</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-publication-hub__link-container"><a href="/ru/hubs/network_technologies/" class="tm-publication-hub__link"><span>Сетевые технологии</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div></div> <div class="tm-article-snippet__labels-container"><div class="tm-article-snippet__labels"><div class="tm-publication-label tm-publication-label_variant-tutorial"><span>
    Туториал
  </span></div> </div></div> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div></div> <div id="post-content-body"><div><div class="article-formatted-body article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml"><a href="https://habr.com/ru/companies/ruvds/articles/759988/"><img src="https://habrastorage.org/r/w1560/webt/gl/fy/ym/glfyymidrcebbagd9c3p6oz3k7u.png" alt="image" data-src="https://habrastorage.org/webt/gl/fy/ym/glfyymidrcebbagd9c3p6oz3k7u.png"/></a><br/>
<br/>
В сети можно найти огромное количество материала о том, как функционируют сети на базе стека протоколов TCP/IP, а также как писать компьютерные программы с сетевыми возможностями. При рассмотрении компьютерных сетей часто углубляются в описание физических основ и структур данных, передаваемых по сети, а при рассмотрении сетевого программирования основное внимание уделяют интернет-сокетам.<br/>
<br/>
Но при изучении и исследовании хочется большего, например, поэкспериментировать с пакетами сетевых протоколов. Многие сетевые протоколы реализованы в ядре операционной системы, и что-либо изменить может оказаться сложной задачей, так как это требует навыков в написании драйверов для операционной системы. Но использование специализированных библиотек позволяет работать с протоколами на низком уровне из пространства пользователя.<br/>
<br/>
В ходе работы над статьёй я написал небольшое приложение, которое послужит отправной точкой для понимания компьютерных сетей и семейства протоколов TCP/IP. С приложением можно экспериментировать, получая дополнительные знания.<br/>
<br/>
Приложение — простое и понятное и, надеюсь, упростит изучение материалов статьи. Ведь именно радость первой победы даёт мотивацию, достаточную для того, чтобы потратить гораздо больше времени на изучение темы.<br/>
<br/>
В статье изложены наиболее важные с моей точки зрения понятия, которые должен знать любой программист, хоть как-то сталкивающийся с компьютерными сетями. Так что без теоретических сведений не обошлось.<a name="habracut"></a><br/>
<br/>
Приложение доступно <a href="https://github.com/artyomsoft/raw-networking-samples-with-scapy">на GitHub</a>.<br/>
<br/>
<h2><font color="#3AC1EF">Содержание</font></h2><br/>
<ul>
<li><a href="#1">Кратко о компьютерных сетях</a></li>
<li><a href="#2">Cтек протоколов TCP/IP</a></li>
<li><a href="#4">Сетевое программирование и анализ сетевого трафика</a></li>
<li><a href="#5">Примеры программного кода</a></li>
<li><a href="#6">Заключение</a></li>
</ul><a name="1"></a><br/>
<h2><font color="#3AC1EF">Кратко о компьютерных сетях</font></h2><br/>
<h3><font color="#3AC1EF">▍ Компьютерная сеть</font></h3><br/>
Компьютерная сеть — это множество вычислительных устройств, взаимодействующих между собой и совместно использующих ресурсы. Понятие сеть близко по смыслу к понятию графа. Cеть также состоит из множества узлов (nodes) и множества звеньев (links). Отличие сети от графа в том, что узлы являются чем-то осмысленным, в данном случае — это вычислительные устройства, а звенья представляют связи этих устройств. В русскоязычной литературе компьютерную сеть иногда называют вычислительной сетью.<br/>
<br/>
<h3><font color="#3AC1EF">▍ Локальные и глобальные компьютерные сети</font></h3><br/>
В зависимости от охвата территории компьютерные сети бывают:<br/>
<br/>
<ol>
<li>Персональные — Personal Area Network (PAN).</li>
<li>Локальные — Local Area Network (LAN).</li>
<li>Городские — Metropolitan Area Network (MAN).</li>
<li>Глобальные — Wide Area Network (WAN).</li>
</ol><br/>
Различные датчики, подключённые к смартфону, образуют сеть PAN. Компьютерная сеть из устройств, подключённых к вашему домашнему роутеру, является LAN-сетью, сеть из абонентов провайдера в городе — это MAN-сеть, а весь интернет, который вам предоставляет провайдер — WAN-сеть. <br/>
<br/>
<h3><font color="#3AC1EF">▍ Сетевые модели</font></h3><br/>
Под сетевой моделью понимаются концептуальные основы, которые стандартизируют сетевое взаимодействие. Это основные термины, а также назначение и функции сетевых компонентов. Сетевая модель разделяет сетевые компоненты и их функции на уровни (слои (layers)). Каждый слой сетевой модели имеет определённое назначение и функции.<br/>
<br/>
Сейчас наиболее распространены две сетевых модели. Это семиуровневая OSI-модель и четырехуровневая TCP/IP-модель.<br/>
<br/>
Приведу схему моделей и как они соотносятся друг с другом.<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/xl/ev/8z/xlev8zvnvvhjcp4tzh7lkcwuwrq.png" data-src="https://habrastorage.org/webt/xl/ev/8z/xlev8zvnvvhjcp4tzh7lkcwuwrq.png"/><br/>
<br/>
В большинстве случаев вы будете иметь дело с сетевой моделью TCP/IP, однако так исторически сложилось, что номера слоёв используются из сетевой модели OSI. Например, когда встречается термин Layer 2 или L2, подразумевается 1-й уровень (канальный уровень) из модели TCP/IP.<br/>
<br/>
Разбивка по слоям позволяет технологиям каждого слоя эволюционировать независимо от всех остальных. Например, благодаря повсеместному внедрению оптоволокна скорость интернета возросла в десятки или даже сотни раз, а интернет как базировался на протоколе IP, так и продолжает базироваться.<br/>
<br/>
<h3><font color="#3AC1EF">▍ Модель TCP/IP</font></h3><br/>
Большинство действующих стандартов интернета и протоколов TCP/IP регламентируются документами Request For Comments (RFC). Учебники по компьютерным сетям ставят целью объяснить модель TCP/IP, но за точной трактовкой понятий лучше обращаться к RFC.<br/>
<br/>
Детально сетевая модель TCP/IP рассмотрена в <a href="https://datatracker.ietf.org/doc/html/rfc1122">RFC 1122 (Requirements for Internet Hosts — Communication Layers )</a> и <a href="https://datatracker.ietf.org/doc/html/rfc1123">RFC-1123 (Requirements for Internet Hosts — Application and Support)</a>. Модель объясняется и расширяется другими RFC, но для понимания основ, я думаю, достаточно этих двух.<br/>
<br/>
Выделим базовые понятия из модели TCP/IP:<br/>
<br/>
<ul>
<li>хост (host);</li>
<li>сообщение;</li>
<li>IP-датаграмма;</li>
<li>пакет;</li>
<li>фрейм;</li>
<li>IP-адрес;</li>
<li>MAC-адрес;</li>
<li>TCP-сегмент;</li>
<li>UDP-датаграмма;</li>
<li>MTU.</li>
</ul><br/>
Чтобы не утомлять вас скучными определениями, я не буду приводить их, а просто расскажу принципы работы сети TCP/IP, используя вышеприведённые термины.<br/>
<br/>
<h3><font color="#3AC1EF">▍ Как работает сеть, построенная на базе TCP/IP</font></h3><br/>
IP-сеть представляет собой множество связанных между собой хостов. Хосты связаны непосредственно или косвенно при помощи ретранслирующих устройств (маршрутизаторов и коммутаторов).<br/>
<br/>
Для приёма сообщений из сети и отправку их в сеть хост использует интерфейсы. Физический интерфейс отправляет и принимает фреймы, а логический интерфейс отправляет и принимает IP-пакеты. Физический интерфейс идентифицируется MAC-адресом, логический интерфейс — IP-адресом.<br/>
<br/>
Передаваемое сообщение представляет собой UDP-датаграмму или TCP-сегмент. Сообщение содержит заголовок и полезные данные. Чтобы передать сообщение внутри IP-сети оно помещается в IP-датаграмму. Конкретный физический интерфейс позволяет передавать данные порциями, которые имеют определённый максимально допустимый размер (MTU). Если размер IP-датаграммы превышает MTU, выполняется её фрагментация и создаётся несколько IP-пакетов, иначе создаётся только один IP-пакет для всей IP-датаграммы.<br/>
<br/>
IP-пакет в соответствии с таблицей маршрутизации хоста передаётся на выбранный логический интерфейс.<br/>
<br/>
Логический интерфейс сам непосредственно не может передать IP-пакет, он использует физический интерфейс. Физический интерфейс передаёт данные фреймами. Фрейм имеет заголовок и полезные данные (payload). В заголовке фрейма указывается MAC-адрес получателя, MAC-адрес отправителя и какому протоколу принадлежат данные в payload (Ethertype). Адрес отправителя известен, это МАС-адрес интерфейса отправляющего хоста. Для протокола IPv4 Ethertype=0x0800.<br/>
<br/>
Адрес физического интерфейса определяется путём посылки ARP-сообщения в широковещательный домен. ARP-сообщение инкапсулируется во фрейм, у которого EtherType = 0x0806 (ARP). В сообщении указывается MAC-адрес отправителя, широковещательный MAC-адрес получателя и интересующий IP-адрес. Хост с физическим интерфейсом, которому назначен этот IP-адрес в ответном сообщении, указывает MAC-адрес этого физического интерфейса. Чтобы не отсылать ARP-сообщение каждый раз, соответствие IP-адреса MAC-адресу сохраняется в кеше хоста.<br/>
 <br/>
После передачи фрейма на другой сетевой интерфейс из него извлекается содержимое IP-пакета, и, если IP-адрес логического интерфейса хоста соответствует IP-адресу получателя, он собирается в IP-датаграмму. Из IP-датаграммы извлекается TCP-сегмент или UDP-датаграмма. Из них извлекаются сами данные и передаются процессу операционной системы, который уже понимает, что с ними делать дальше. <br/>
<br/>
Иначе IP-пакет или отвергается или пересылается далее в соответствии с таблицей маршрутизации хоста. При отсылке он опять передаётся на логический интерфейс. Там упаковывается во фрейм и отсылается.<br/>
<br/>
Это упрощённое описание, так как я не углублялся в виртуальные сетевые интерфейсы, виртуальные частные сети, PPP-соединения, как работают сетевые транспортные протоколы TCP и UDP. <br/>
<br/>
<h3><font color="#3AC1EF">▍ Адресация</font></h3><br/>
Адресация позволяет указать источника и получателя данных. Для слоя L2 получатель и отправитель идентифицируются MAC-адресами, для L3 — IP-адресами, для L4 — портами.<br/>
<br/>
Что касается MAC-адресации, вам достаточно знать, что в большинстве случаев физический интерфейс имеет уникальный MAC-адрес, состоящий из 6 байт.<br/>
<br/>
Что касается IP-адресации, тут всё немного интереснее. Начнём с того, что всего возможно 2^32 IP-адресов, но количество допустимых IP-адресов хостов меньше, а глобальных (IP-адресов, видимых в интернете) ещё меньше. Попробую объяснить, почему так происходит.<br/>
<br/>
Интернет проектировался как множество соединённых компьютерных сетей, хосты которых взаимодействуют между собой.<br/>
<br/>
Для идентификации сетей используется то же адресное пространство, что и для идентификации интерфейсов хостов. Как это реализуется?<br/>
<br/>
Каждый IP-адрес — это последовательность из 32 бит. Первые n-бит в IP-адресе несут информацию о том, к какой сети принадлежит IP-адрес, оставшиеся биты — это уникальный адрес внутри этой сети. Однако адреса, у которых все биты 0 или все биты 1 имеют особое значение. Если все биты 0 — это сеть, если 1 — это широковещательный адрес.<br/>
<br/>
Сколько первых бит в IP-адресе несут информацию о сети определяется маской сети. Если выполнить побитовое “И” IP-адреса с маской сети, то получится идентификатор сети. Если выполнить побитовое “И” с инвертированной маской сети, то мы получим уникальный адрес внутри сети. Чтобы можно было проще представить информацию об IP-адресе, и какая его часть используется для идентификации сети, используется CIDR-нотация.<br/>
<br/>
Например, запись 192.168.0.0/24 означает: сеть имеет идентификатор 192.168.0.0, 24 первых бита используются для идентификации сети. Для кодирования хостов используется 8 последних бит. Максимальное количество хостов в сети — 254 (0 — сеть, 255 — широковещательный адрес). <br/>
Но это ещё не всё. Не все сети могут быть видимыми в сети и некоторые из них используются для специальных целей.<br/>
<br/>
Как мы видим, количество IP-адресов хостов в интернете не так уж и велико, поэтому выполняется переход на IPv6-адресацию, где количество IP-адресов гораздо больше.<br/>
<br/>
<h3><font color="#3AC1EF">▍ Сегмент сети, подсеть, широковещательный домен, виды адресов</font></h3><br/>
Когда рассматривается сеть, нужно всегда иметь представление на каком уровне это выполняется. Если сеть рассматривается на канальном уровне, она состоит из устройств, имеющих MAC-адреса. Если она рассматривается на сетевом уровне, она состоит из хостов, имеющих IP-адреса. <br/>
<br/>
С целью упрощения управления, сети на канальном уровне разделяются на сегменты, а на сетевом уровне на подсети. И сегмент сети и подсеть являются широковещательным доменом. Иногда подсети называют также сегментами, однако нужно понимать, что подразумевается сегмент сети на уровне L3.<br/>
<br/>
Сетевое устройство или хост могут иметь следующие типы адресов:<br/>
<br/>
<ul>
<li>индивидуальный адрес (unicast address);</li>
<li>широковещательный адрес (broadcast address);</li>
<li>групповой адрес (multicast address).</li>
</ul><br/>
Индивидуальный адрес — это уникальный адрес в сегменте сети, или локальной (глобальной) сети.<br/>
<br/>
Широковещательный адрес — общий для всех сетевых устройств, имеющих MAC-адрес или для всех хостов подсети. Сообщения, посылаемые на широковещательный адрес, будут получены всеми узлами.<br/>
<br/>
Можно сделать так, чтобы сообщения отсылались только тем узлам, которые в них заинтересованы. Для этого используются групповые адреса. Но это уже отдельная тема, требующая отдельного и более широкого объяснения.<br/>
<br/>
<h3><font color="#3AC1EF">▍ Маршрутизация в IP-сетях</font></h3><br/>
Маршрутизация обычному пользователю сети выглядит следующим образом. Если необходимо отправить IP-пакет по определённому адресу, то каждый раз просматривается таблица маршрутизации хоста, и на основании её определяется, нужно его отправлять на хост внутри сети, которой принадлежит отправляющий хост, или нужно его перенаправить на особый хост (маршрутизатор, шлюз), который решит, что делать с ним дальше. В локальных домашних сетях часто таким шлюзом является WiFi-роутер.<br/>
<br/>
WiFi-роутер обладает рядом функций и фактически состоит из нескольких устройств. Одной из важных функций WiFi-роутера является функция трансляции сетевых устройств (Network Address Translation — NAT), позволяющая устройствам из локальной сети получить доступ в интернет. Доступ этот немного ограниченный, но большинству пользователей этого достаточно.<br/>
<br/>
Суть работы NAT в том, что хост, который находится за NAT, виден для глобальной сети как хост, у которого IP-адрес такой же, как и внешний адрес NAT, что позволяет более экономно расходовать глобальные IP-адреса. Подробное описание работы NAT потребует отдельной статьи, а то и книги.<br/>
<br/>
<h3><font color="#3AC1EF">▍ Расчёт контрольной суммы</font></h3><br/>
При передаче данных по сети могут происходить различные ситуации, когда принятые данные могут отличаться от тех, которые были переданы. Чтобы определить такие случаи, с данными передаётся контрольная сумма, вычислив которую на принимающей стороне и сравнив с принятой, можно дать ответ, передались ли данные верно, или где-то произошла ошибка передачи данных. Как правило, сообщения с неверной контрольной суммой отвергаются, и сообщение считается потерявшимся. На различных уровнях стека используются различные варианты подсчёта контрольной суммы. Например, для Ethernet-фрейма используется CRC-32. Для вычисления контрольной суммы IP-заголовка, ICMP-сообщения, UDP-датаграммы и TCP-сегмента используется расчёт контрольной суммы с использованием обратного кода (one’s complement checksum). Чтобы не тратить процессорное время на вычисление контрольных сумм для передаваемых Ethernet-фреймов или IP-пакетов, используется механизм разгрузки (offloading), который заключается в том, что контрольные суммы вычисляются сетевым адаптером.<br/>
<br/>
<h3><font color="#3AC1EF">▍ Порядок байтов и битов</font></h3><br/>
Данные в компьютере хранятся и обрабатываются в виде двоичного кода. Двоичный код подразумевает, что информация кодируется при помощи двух значений — 0 и 1. Один 0 или одна 1 содержат минимальное количество информации, которое называется бит. Процессор обычно оперирует не отдельными битами, а порциями по 8, 16, 32, 64 и т. д. Минимальная такая порция это 8 бит. 8 бит называются байтом. Можно сказать, что информация в памяти хранится в виде последовательности байт. Но байт может принимать только 256 значений, что явно недостаточно для большинства математических операций, поэтому байты группируются в слова (2 байта), двойное слово (4 байта) и т. д. Но хранить эти группы байт в памяти можно по-разному. Возьмём двойное слово 4 байта 0x12345678, оно состоит из 4 байт со значениями 0x12, 0x34, 0x56, 0x78. В памяти их можно разместить в следующем порядке 0x12, 0x34, 0x56, 0x78 или 0x78, 0x56, 0x34, 0x12. Как они будут размещены в памяти зависит от архитектуры процессора. Например в архитектуре x86 это будет порядок, при котором байт с менее значимыми битами будет храниться раньше байта с более значимыми битами.<br/>
<br/>
Так исторически сложилось, что данные в пакетах, передаваемых в IP-сетях, имеют сетевой порядок байтов, который подразумевает, что байт, содержащий старшие биты, хранится первый.<br/>
Что касается порядка битов, то если не углубляться в вопросы кодирования передаваемых данных на уровне сигналов, порядок не важен, так как сетевой адаптер сделает всё без вмешательства программиста.<a name="2"></a><br/>
<br/>
<h2><font color="#3AC1EF">Cтек протоколов TCP/IP</font></h2><br/>
Существует ряд протоколов, на которых всё основывается:<br/>
<br/>
<ul>
<li>Ethernet II;</li>
<li>IP — Internet Protocol;</li>
<li>ICMP — Internet Control Management Protocol;</li>
<li>UDP — User Datagram Protocol;</li>
<li>TCP — Transmission Control Protocol;</li>
<li>DHCP — Dynamic Host Configuration Protocol;</li>
<li>DNS — Domain Name Service.</li>
</ul> <br/>
Рассмотрим их поподробнее. Данные передаются порциями, которые называются Protocol Data Unit (PDU). PDU состоит из заголовка (header) и полезных данных (payload). PDU одного протокола в полезных данных могут содержать PDU другого протокола. Это называется инкапсуляцией. В зависимости от уровня, на котором работает сетевой протокол, PDU могут называться по-разному:<br/>
<br/>
<ul>
<li>на канальном уровне — фрейм;</li>
<li>на сетевом уровне — пакет (IP, ICMP); </li>
<li>на транспортном уровне — сегмент или датаграмма (TCP, UDP);</li>
<li>на прикладном уровне — сообщение (DNS, DHCP).</li>
</ul><br/>
Но в разной литературе могут не следовать правилу, например, часто можно встретить IP-датаграмму, TCP-пакеты или UDP-пакеты. А в программах по анализу трафика в сети все PDU называются пакетами. По мере приобретения опыта, вы будете лучше ориентироваться, что имелось в виду при употреблении того или иного термина. <a name="3"></a><br/>
 <br/>
<h2><font color="#3AC1EF">Протокол Ethernet</font></h2><br/>
Обычно при описании протокола Ethernet опускаются чуть ли не до бит, а то и сигналов, передаваемых по сети. Я не буду углубляться в такие подробности, к тому же с большой долей вероятности вы используете WiFi-соединение, поэтому различные средства для перехвата сетевого трафика, как правило, будут показывать его как IP-пакеты, инкапсулированные в Ethernet II фреймы. Эти фреймы имеют мало чего общего с фреймами WiFi, но унифицируют работу с канальным уровнем. Вообще, информация о том, как работает WiFi, заслуживает отдельной статьи.<br/>
<br/>
Ethernet-фрейм, который передаётся или принимается драйвером сетевого адаптера, состоит из заголовка и полезных данных.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/rm/e_/cd/rme_cdwpuntkx3t0pcozi9baiuo.png" data-src="https://habrastorage.org/webt/rm/e_/cd/rme_cdwpuntkx3t0pcozi9baiuo.png"/></div><br/>
Часто можно встретить информацию о минимальном размере Ethernet-фрейма, преамбуле и контрольной сумме. Но это уровень реализации драйвера сетевого адаптера или аппаратной реализации самого адаптера, поэтому не буду рассматривать его в статье. Для нас Ethernet-фрейм содержит MAC-адрес получателя, MAC-адрес отправителя, тип фрейма и сами данные.<br/>
<br/>
<h3><font color="#3AC1EF">▍ Протокол IP</font></h3><br/>
Оригинальное описание протокола находится в <a href="https://datatracker.ietf.org/doc/html/rfc791">RFC 791 Internet Protocol — DARPA Internet Program Protocol Specification</a>.<br/>
<br/>
<h4><font color="#3AC1EF">▍ Структура пакетов</font></h4><br/>
Структура IP-пакета приведена ниже. <br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/rt/a6/ot/rta6otjht2jdenxbw9hamkt7g_c.png" data-src="https://habrastorage.org/webt/rt/a6/ot/rta6otjht2jdenxbw9hamkt7g_c.png"/><br/>
<br/>
<h4><font color="#3AC1EF">▍ IP-пакеты и IP-датаграммы</font></h4><br/>
Протокол IP позволяет передавать данные порциями. В литературе можно встретить два похожих термина: IP-датаграмма и IP-пакет. Иногда их неверно употребляют. Я хочу уточнить это различие. IP-датаграмма — это те данные, которые передаются на сетевой уровень, а IP-пакет — это те данные, которые передаются в IP-сети. Размер IP-датаграммы ограничивается максимальным значением в поле Total Length. Размер IP-пакета ограничивается MTU (Maximum Transmission Unit) — максимально возможное количество данных, которые могут быть переданы одним фреймом на канальном уровне. Чтобы передать IP-датаграмму, которая содержит полезных данных больше, чем может поместиться в один IP-пакет, используется фрагментация. <br/>
<br/>
<h4><font color="#3AC1EF">▍ Фрагментация IP-датаграмм</font></h4><br/>
Протокол IP поддерживает фрагментацию IP-датаграмм. Cуть фрагментации заключается в том, что максимальный размер передаваемых данных в одной IP-датаграмме составляет 65535 байт (октетов), а максимальный размер данных, который может поместиться в PDU канального уровня (MTU), гораздо меньше (обычно он составляет 1500 или около байт). Если размер IP-датаграммы больше MTU, она будет разбита на несколько IP-пакетов, каждый из которых можно будет передать в PDU канального уровня. При получении IP-пакетов они будут собраны в IP-датаграмму, и она будет разобрана на транспортном уровне.<br/>
<br/>
Все IP-пакеты одной IP-датаграммы имеют одинаковое значение в поле Identification, а поле Offset содержит смещение в payload IP-датаграммы. <br/>
<br/>
Хотя фрагментация позволяет соединять хосты в разнородных сетях, её желательно избегать, так как она усложняет передачу данных и увеличивает нагрузку на сеть из-за создания новых IP-пакетов и перерасчёта контрольных сумм. Поэтому желательно, чтобы TCP-сегмент или UDP-датаграмма имела размер не больше MTU по пути следования IP-пакетов. <br/>
<br/>
<h3><font color="#3AC1EF">▍ Протокол ARP</font></h3><br/>
Протокол ARP используется для определения МАС-адреса физического интерфейса хоста по его IP-адресу. Описание протокола приведено в <a href="https://datatracker.ietf.org/doc/html/rfc826">RFC 826 — An Ethernet Address Resolution Protocol</a>. MAC-адрес не обязательно должен быть адресом в Ethernet-сети, но ниже я привожу структуру ARP-сообщения для Ethernet-сети.<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/ee/fe/wm/eefewm76b5f2atszq3aibtjp14w.png" data-src="https://habrastorage.org/webt/ee/fe/wm/eefewm76b5f2atszq3aibtjp14w.png"/><br/>
<br/>
<h3><font color="#3AC1EF">▍ Протокол ICMP</font></h3><br/>
Описание протокола приведено в <a href="https://datatracker.ietf.org/doc/html/rfc792">RFC 792 (Internet Protocol DARPA Internet Program Protocol Specification) </a>.<br/>
<br/>
<h4><font color="#3AC1EF">▍ Структура сообщений</font></h4><br/>
В описании протокола приведено много различных сообщений, но нам достаточно для начала разобраться с сообщениями Echo и Reply<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/-r/yb/ud/-rybudbfve7pvuwx7o3-acvivqo.png" data-src="https://habrastorage.org/webt/-r/yb/ud/-rybudbfve7pvuwx7o3-acvivqo.png"/><br/>
<br/>
Хотя сообщения, используемые протоколом, инкапсулируются в IP-датаграммы, ICMP причисляют к тому же уровню, что и IP — сетевому.<br/>
<br/>
<h3><font color="#3AC1EF">▍ Протокол UDP</font></h3><br/>
Описание протокола приведено в <a href="https://datatracker.ietf.org/doc/html/rfc768">RFC 768 (User Datagram Protocol)</a>.<br/>
<br/>
Протокол позволяет двум процессам обмениваться UDP-датаграммами. Каждая UDP-датаграмма содержит в себе порт отправителя (Source Port), порт получателя (Destination Port), длину дейтаграммы (Length), контрольную сумму (Checksum) и собственно сами передаваемые данные.<br/>
<br/>
При расчёте контрольной суммы добавляется псевдозаголовок, который не передаётся, а только участвует в расчёте контрольной суммы.<br/>
<br/>
Протокол используется в качестве транспортного протокола там, где на транспортном уровне допускается дублирование получаемых данных, пропуск данных или не важен порядок, в котором данные будут доставлены.<br/>
<br/>
Как правило, обработка этих случаев возлагается на протоколы уровня приложений или не осуществляется вовсе. Например, в потоковом видео или аудио данные пропускаются, так как повторная передача данных является в этом случае бессмысленной. Но если вы хотите гарантированную доставку данных на транспортном уровне, то вам необходимо использовать протокол TCP.<br/>
<br/>
<h3><font color="#3AC1EF">▍ Структура сообщений</font></h3><br/>
Структуры псевдозаголовка, используемого при вычислении контрольной суммы и UDP-датаграммы, приведены ниже.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/dx/21/xj/dx21xj1srh19tbds3hdbepy-zjk.png" data-src="https://habrastorage.org/webt/dx/21/xj/dx21xj1srh19tbds3hdbepy-zjk.png"/></div><br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/g5/06/db/g506db_3gsblkr6bctrpk6tzl_0.png" data-src="https://habrastorage.org/webt/g5/06/db/g506db_3gsblkr6bctrpk6tzl_0.png"/></div><br/>
<h3><font color="#3AC1EF">▍ Протокол TCP</font></h3><br/>
Протокол TCP — самый из сложный из всех, приведённых в статье. Назначение протокола TCP — создать надёжное виртуальное полнодуплексное соединение между процессами. На данный момент самое свежее описание протокола приведено в <a href="https://datatracker.ietf.org/doc/html/rfc9293">RFC 9293 — Transmission Control Protocol (TCP)</a>.<br/>
<br/>
<h4><font color="#3AC1EF">▍ Структура сообщений</font></h4><br/>
Сообщения, используемые в протоколе TCP, называются TCP-сегментами. Просьба не путать с сегментами сети. Они с ними не имеют ничего общего. При расчёте контрольной суммы для TCP-сегмента как и в UPD используется псевдозаголовок. Но если для UDP расчёт контрольной суммы не является обязательным, то для TCP он таким не является.<br/>
<br/>
Структура псевдозаголовка и TCP-сегмента приведена ниже.<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/ah/mx/es/ahmxes9jgl-re2ulncqr1xvua3q.png" data-src="https://habrastorage.org/webt/ah/mx/es/ahmxes9jgl-re2ulncqr1xvua3q.png"/><br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/47/ew/2a/47ew2a1okiz40lti8bvyfjmjr30.png" data-src="https://habrastorage.org/webt/47/ew/2a/47ew2a1okiz40lti8bvyfjmjr30.png"/><br/>
<br/>
Как видно из структуры заголовка, в протокол TCP, как и в протокол IP, заложены возможности для расширения и эволюции протокола при помощи поля Options. <br/>
<br/>
Ключевые понятия, необходимые для понимания TCP:<br/>
<br/>
<ul>
<li>Segment;</li>
<li>Sequence Number;</li>
<li>Acknowledge number;</li>
<li>TCP Window;</li>
<li>TCP Handshake;</li>
<li>MSS — Maximum Segment Size;</li>
<li>TCP Flags and TCP Options;</li>
<li>Window Scaling;</li>
<li>Selective Acknowledgement.</li>
</ul><br/>
Для надёжной передачи данных используются Sequence Number, Acknowledge Number и Window Size. Рассмотрим, как они работают вместе. Передаваемые данные разбиваются на TCP-сегменты.<br/>
<br/>
За каждым TCP-сегментом закрепляется Sequence number.<br/>
<br/>
Sequence Number может принимать значения от 0x00000000 до 0xffffffff. Если каждому передаваемому байту присвоить номер и разбить на сегменты, то Sequence Number — это номер первого байта каждого сегмента.<br/>
<br/>
Sequence Number служит для упорядочивания сегментов, которые пришли не в порядке их отсылки (out of order), подтверждения полученных сегментов (acknowledgement), а также для повторной отсылки потерявшихся сегментов (retransmitting).<br/>
<br/>
Каждый передаваемый по сети TCP-сегмент содержит поля Sequence Number и Acknowledge Number. Sequence Number идентифицирует отправляемый сегмент, а Acknowledge Number указывает на то, какой сегмент ожидается.<br/>
<br/>
Значения Sequence Number и Acknowledge Number позволяют отслеживать прогресс передачи данных по TCP-соединению. Каждая сторона генерирует случайное число из диапазона от 0 до 2^32, которое называется ISN. Это число является началом для генерирования Sequence Numbers отсылаемых сегментов.<br/>
 <br/>
Сегменты отсылаются только те, которые попадают в окно. Размер этого окна сообщается отправителю при установлении соединения, но может быть изменён принимающей стороной в дальнейшем. <br/>
<br/>
По мере получения подтверждений с принимающей стороны, окно сдвигается по кругу. <br/>
Перед передачей данных, необходимо установить соединение. При установке соединения стороны обмениваются параметрами будущего соединения. Любая сторона может инициировать разрыв соединения.<br/>
<br/>
При установке соединения стороны обмениваются параметрами Sequence Number, Acknowledge Number, Window Size, а также параметрами, которые передаются в поле TCP Options (MSS, Window scale). <br/>
<br/>
<h4><font color="#3AC1EF">▍ Флаги TCP</font></h4><br/>
Для управления TCP-соединением используются флаги в отсылаемых TCP-сегментах. Наиболее важными являются:<br/>
<br/>
<ul>
<li>SYN — используется при установлении TCP-соединения;</li>
<li>ACK — означает, что сегмент был получен принимающей стороной;</li>
<li>FIN — используется при нормальном (graceful) закрытии TCP-соединении;</li>
<li>RST — используется при аварийном закрытии TCP-соединения.</li>
</ul><br/>
<h4><font color="#3AC1EF">▍ Опции TCP</font></h4><br/>
Протокол TCP разработан таким образом, что его можно расширять используя механизм опций. Опции это дополнительные поля, которые передаются в заголовке. Например, при установлении соединения стороны обмениваются опциями, Window Scale, MSS. В зависимости от настроек стека в TCP-сегменте может передаваться опция TCP timestamp. Если опция не поддерживается, она игнорируется стеком.<br/>
<br/>
<h4><font color="#3AC1EF">▍ Открытие соединения, передача данных, закрытие соединения</font></h4><br/>
В RFC 9293 приведено подробное описание и представлена диаграмма состояний для TCP-соединения. Я не буду её здесь приводить. При желании вы её можете разобрать. Но хочу сразу сказать, её сложно читать. Ниже представлена диаграмма последовательностей для жизненного цикла TCP соединения.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/v7/no/fh/v7nofhxhmeu57t495bocjapppwa.png" data-src="https://habrastorage.org/webt/v7/no/fh/v7nofhxhmeu57t495bocjapppwa.png"/></div><br/>
Обратите внимание, как меняются значения в полях SequenceNumber и AcknowledgeNumber предаваемых TCP сегментов.<br/>
<br/>
Если при установлении TCP-соединения используется 3-way handshake, то с закрытием существует множество различных вариантов. На диаграмме приведен 4-way handshake, который будет в случае, если сервер не обработал все данные от клиента при получении TCP-сегмента FIN,ACK. В случае, если данные все обработанные, то выполняется 3-way handshake (сервер отсылает только сегмент FIN,ACK). <br/>
<br/>
Чтобы вам было понятнее в механизме передачи и приёма TCP-сегментов, я нарисовал схематический рисунок.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/4x/va/vx/4xvavx7hdhkpv5ee3lnnxdy_ivo.png" data-src="https://habrastorage.org/webt/4x/va/vx/4xvavx7hdhkpv5ee3lnnxdy_ivo.png"/></div> <br/>
<h4><font color="#3AC1EF">▍ Настройка стека TCP/IP</font></h4><br/>
Работу стека протоколов TCP/IP можно настраивать в операционной системе, только делать это лучше в том случае, если вы точно осознаёте, что именно вы изменяете и зачем.<br/>
<br/>
В Windows стек можно настроить командой netsh, В Linux/MacOS — командой sysctl. В зависимости от операционной системы перечень и значения по умолчанию настраиваемых параметров могут отличаться. Например, в Windows tcp timestamps отключены по умолчанию. Чтобы включить, нужно выполнить команду:<br/>
<br/>
<pre><code class="bash">netsh int tcp set global timestamps=enabled</code></pre><br/>
В Linux, напротив, tcp timestamps включены, если вы хотите их отключить нужно выполнить команду:<br/>
<br/>
<pre><code class="bash">sysctl -w net.ipv4.tcp_timestamps=0</code></pre><br/>
В MacOS включить/отключить tcp timestamps у вас не получится.<br/>
<br/>
<h3><font color="#3AC1EF">▍ Протокол DHCP</font></h3><br/>
Для работы в сети TCP/IP хост необходимо настроить. Минимально необходимо указать его IP-адрес и маску подсети. Также может понадобиться указать адрес шлюза и адрес DNS-сервера. Протокол DHCP позволяет хосту получить эти данные автоматически из сети.<br/>
<br/>
Существуют различные варианты использования данного протокола, но мы рассмотрим основной успешный сценарий получения IP-адреса хостом, который состоит из обмена 4 сообщениями.<br/>
<br/>
<h4><font color="#3AC1EF">▍ Получение конфигурации</font></h4><br/>
1. Изначально хост не имеет IP-адреса и не знает, где расположен DHCP-сервер, который ему эту информацию может предоставить. Поэтому он посылает широковещательное сообщение DHCP Discover в свой сегмент сети. <br/>
<br/>
2. Если в сети присутствует DHCP-сервер, он отвечает unicast-сообщением DHCP Offer, в котором содержится предлагаемая конфигурация для хоста. <br/>
<br/>
3. Хост посылает unicast-сообщение DHCP Request, в котором указывает, назначенный ему IP-адрес<br/>
<br/>
4. Сервер отвечает unicast-сообщением DHCP Acknowledge, которое говорит о том, что конфигурация хосту назначена.<br/>
<br/>
Диаграмма последовательностей приведена ниже.<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/gk/nq/il/gknqilxkrhy67ubbd0civifrcus.png" data-src="https://habrastorage.org/webt/gk/nq/il/gknqilxkrhy67ubbd0civifrcus.png"/></div><br/>
<br/>
<h4><font color="#3AC1EF">▍ Структура сообщений</font></h4><br/>
Описание протокола приведено в <a href="https://datatracker.ietf.org/doc/html/rfc2131">RFC 2131 — Dynamic Host Configuration Protocol</a>. DHCP-протокол является расширением более раннего протокола BOOTP (<a href="https://datatracker.ietf.org/doc/html/rfc951">RFC 951 Bootstrap Protocol</a>). Поэтому заголовок DHCP-сообщения почти полностью совпадает с BOOTP-сообщением. Поле options всегда начинается с магического числа 0x62825363, за которым следуют DHCP-опции, описанные в <a href="https://datatracker.ietf.org/doc/html/rfc2132">RFC 2132 DHCP Options and BOOTP Vendor Extensions </a>.<br/>
<br/>
Каждая опция состоит из кода, длины и одного или нескольких октетов сообщения. Исключение составляют опции с кодами 0x00 (заполнитель) и 0xff (конец опций). Размер DHCP-сообщения в октетах должен быть кратным четырём, поэтому после опции с кодом 0xff может быть одна или несколько опций с кодом 0x00.<br/>
<br/>
Как выглядит DHCP-сообщение, приведено ниже:<br/>
<br/>
<img src="https://habrastorage.org/r/w1560/webt/jo/s_/ss/jos_sslvm3c3-ggneokp4fyp-kw.png" data-src="https://habrastorage.org/webt/jo/s_/ss/jos_sslvm3c3-ggneokp4fyp-kw.png"/><br/>
<br/>
<h3><font color="#3AC1EF">▍ Протокол DNS</font></h3><br/>
Протокол DNS регламентируется <a href="https://datatracker.ietf.org/doc/html/rfc1035">RFC 1035 DOMAIN NAMES — IMPLEMENTATION AND SPECIFICATION</a>.<br/>
<br/>
Скорее всего, вы имеете представление о службе DNS, так она используется для преобразования доменного имени хоста в его IP-адрес. Вроде бы всё просто, и для программиста всё скрывается за простым API, но этот факт затрудняет понимание сути DNS. IP-адрес хоста — это лишь часть той информации, которую может хранить DNS.<br/>
<br/>
Программы типа nslookup и функции в Winsock или glibc запутывают в понимании DNS. Я бы советовал начинать изучение DNS с экспериментов с утилитой dig и анализа трафика. DNS нужно рассматривать, не привязываясь к IP. DNS — это распределённая иерархическая база данных доменов.<br/>
<br/>
Чтобы убедиться, что это действительно база данных можете зайти <a href="https://trendoceans.com/dns-toys/">на сайт</a> и увидеть тому подтверждение.<br/>
<br/>
<h4><font color="#3AC1EF">▍ Домен</font></h4><br/>
Что такое домен? Домен можно определить как именованную сущность, которая содержит метаинформацию о себе и находится в ведении организации или частного лица. К такой информации относятся IP-адрес, имя используемого почтового сервера, имена серверов имён, обслуживающих данный домен и др. Для упрощения управления доменами они организовываются в иерархию.<br/>
<br/>
Домены не существуют сами по себе, они хранятся серверами имён. Информация, связанная с доменом, объединяется в зону, которая обслуживается конкретным сервером имён.<br/>
<br/>
<h4><font color="#3AC1EF">▍ Зона</font></h4><br/>
Зона — это информация о доменах, размещённая на DNS-сервере.<br/>
<br/>
Корневую зону доменов интернета можно посмотреть <a href="https://www.internic.net/domain/root.zone">здесь</a>.<br/>
<br/>
Корневая зона доменов обслуживается <a href="https://www.iana.org/domains/root/servers">13 корневыми доменными серверами</a>.<br/>
<br/>
<h4><font color="#3AC1EF">▍ Ресурсная запись</font></h4><br/>
Система доменных имён позволяет структурировано хранить информацию. Доменные имена организуются в древовидную структуру, листьями которой являются ресурсные записи (Resource Record (RR)). Каждая RR имеет класс и тип. Как правило, классы могут принимать следующие значения:<br/>
<br/>
<ul>
<li>IN (Internet);</li>
<li>CH (Chaos);</li>
<li>HS (Hesiod).</li>
</ul><br/>
Хотя можно встретить классы CH и HS, применение их специфическое, и с большой долей вероятности вы с ними не столкнётесь.<br/>
<br/>
А вот типов RR гораздо больше, и часть из них знать обязательно:<br/>
<br/>
<ul>
<li>A (Address) — IP-адрес, закреплённый за доменным именем;</li>
<li>AAAA (IPv6 Address) — IPv6-адрес, закреплённый за доменным именем;</li>
<li>CNAME (Canonical Name);</li>
<li>MX (Mail Exchanger);</li>
<li>NS (Name Server);</li>
<li>PTR (Pointer);</li>
<li>SOA (Start of Authority);</li>
<li>TXT (Text);</li>
<li>SRV (Service).</li>
</ul><br/>
<h4><font color="#3AC1EF">▍ Резолвер</font></h4><br/>
Domain Name Service позволяет по имени хоста получить его IP-адрес. Реализуется это при помощи распределённой базы данных, работающих на множестве хостов. Хост, как правило, взаимодействует с локальным компонентом, называемым резолвером (resolver). К резолверу можно обратиться через API операционной системы или библиотеки языка программирования.<br/>
<br/>
При выполнении API-функции резолвер проверяет в своём локальном кэше IP-адрес для имени хоста. Если не находит, то пытается сделать запрос DNS-серверу, адрес которого прописан в конфигурации. Что может происходить дальше опустим, для упрощения описания. В конечном итоге DNS-сервер возвращает IP-адрес для имени хоста или ошибку, если такой хост отсутствует. Резолвер помещает эту информацию в кэш и возвращает значение вызвавшему коду. В Linux API к резолверу находится в библиотеке glibc, в Windows — в библиотеке Winsock.<br/>
<br/>
Обычно в примерах по сетевому программированию приводится именно работа с API резолвера. Я же в практической части покажу, как можно послать запрос DNS-серверу на низком уровне, сформировав IP-пакет, содержащий DNS-запрос. <br/>
<br/>
<h4><font color="#3AC1EF">▍ Структура пакетов</font></h4><br/>
Простой DNS-запрос выглядит следующим образом:<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/8s/3l/g5/8s3lg50dcuer7vd8cxqpxetxniq.png" data-src="https://habrastorage.org/webt/8s/3l/g5/8s3lg50dcuer7vd8cxqpxetxniq.png"/></div><br/>
Пример DNS-ответа приведён ниже:<br/>
<br/>
<div style="text-align:center;"><img src="https://habrastorage.org/r/w1560/webt/qk/0j/3e/qk0j3e9olcwuz3queuuhc5w-_q4.png" data-src="https://habrastorage.org/webt/qk/0j/3e/qk0j3e9olcwuz3queuuhc5w-_q4.png"/></div><br/>
Как правило, запросы и ответы отсылаются с использованием UDP в качестве транспортного протокола. Однако если ответ слишком большой, сервер вернёт флаг TC. Это означает, что для получения полного ответа нужно использовать TCP в качестве транспорта.<a name="4"></a><br/>
<br/>
<h2><font color="#3AC1EF">Сетевое программирование и анализ сетевого трафика</font></h2><br/>
<h3><font color="#3AC1EF">▍ Стеки протоколов TCP/IP и программные интерфейсы<br/>
</font></h3><br/>
Практически любая современная операционная система имеет поддержку работы с семейством протоколов TCP/IP. Набор компонентов операционной системы, которые обеспечивают коммуникацию посредством семейства протоколов TCP/IP, называют стеком протоколов. Разные операционные системы предоставляют доступ к стеку, используя различные программные интерфейсы. Наиболее распространённым является интерфейс сокетов.<br/>
<br/>
Хотя и существуют различия в этом интерфейсе для различных операционных систем, большинство функций схожи. Работа с сокетами подразумевает программирование на языке С. Однако для различных языков написаны обёртки, которые позволяют кроссплатформенно работать с сокетами. В зависимости от языка, обёртки могут предоставлять больше или меньше функций. Например обёртка в Python больше зависит от платформы, на которой исполняется, чем обёртка в Java. <br/>
<br/>
<h3><font color="#3AC1EF">▍ Анализ пакетов в сети </font></h3><br/>
Обычно в литературе по сетевым технологиям рассматриваются основы компьютерных сетей, потом сокеты. Но то, как именно можно создать и послать пакет, структура которого подробно расписана, не приводится. Я хочу восполнить этот пробел.<br/>
<br/>
Инструкции процессора в операционной системе могут исполняться в режиме ядра или режиме пользователя. Большинств кода, который пишет программист — это инструкции процессору, которые выполняются в режиме пользователя. В режиме ядра выполняется код драйверов и ядра операционной системы.<br/>
<br/>
Стек TCP/IP выполняется в режиме ядра, а из режима пользователя он, как правило, доступен только через вызов АPI-сокетов. Поэтому программист только может выполнить высокоуровневые операции, такие как открыть TCP-соединение, передать данные по TCP-соединению или передать данные как UDP-датаграмму. Доступа к формируемым пакетам он не имеет.<br/>
<br/>
Чтобы получить доступ к формируемым пакетам, используются так называемые Raw-сокеты. Замечу, что в Windows Raw-сокеты имеют ограниченный функционал. Например, невозможно создать Raw-сокет, который бы позволял работать с Ethernet-фреймами. Поэтому для получения доступа к формированию Ethernet-фреймов используют специальный NDIS-драйвер и библиотеку npcap. В Linux же достаточно же просто создать AF_PACKET Raw-сокет. <br/>
<br/>
<h3><font color="#3AC1EF">▍ libpcap</font></h3> <br/>
Библиотека предоставляет высокоуровневый, если так можно сказать, API для формирования, фильтрации и перехвата пакетов, который прячет детали реализации для разных платформ.<br/>
 <br/>
<h3><font color="#3AC1EF">▍ Scapy</font></h3> <br/>
Для Windows существует библиотека npcap, для Unix-подобных систем — libpcap. Python-библиотека Scapy позволяет писать платформо-независимые приложения, игнорируя этот факт. Также она поддерживает многие сетевые протоколы. И содержит средства для разбора, генерации и отсылки пакетов из пространства пользователя. Например, расчёт контрольной суммы для заголовка IP-пакета, указание правильного Ethertype или Protocol при инкапсуляции пакетов. Библиотека удобна для экспериментирования и исследования сетевых протоколов. <br/>
<br/>
<h3><font color="#3AC1EF">▍ Wireshark</font></h3> <br/>
Программа Wireshark, можно сказать, самая распространённая программа для анализа сетевого трафика. При помощи графического интерфейса, можно записывать сетевой трафик на диск, фильтровать пакеты, рассматривать их структуру, отслеживать работу TCP-сессий и многое другое. Совместно с Scapy, это, наверное, лучший набор для изучения основ сетевых протоколов и проведения различных экспериментов. <a name="5"></a><br/>
<br/>
<h2><font color="#3AC1EF">Примеры программного кода</font></h2><br/>
Далее я хочу привести фрагменты из моего приложения для упрощения понимания основ TCP/IP.<br/>
<br/>
<h3><font color="#3AC1EF">▍ Создание ARP-запроса</font></h3><br/>
<pre><code class="python">def create_arp_request(ip):
    return Ether(dst="ff:ff:ff:ff:ff:ff")/ARP(pdst=ip)
</code></pre><br/>
<h3><font color="#3AC1EF">▍ Создание сообщения Echo, используемого в протоколе ICMP</font></h3><br/>
<pre><code class="python">def create_ping_request(ip):
    return IP(dst=ip)/ICMP()
</code></pre><br/>
<h3><font color="#3AC1EF">▍ Создание сообщений DHCP Discover и DHCP Request</font></h3><br/>
<pre><code class="python">def create_dhcp_discover(mac):
    return (Ether(src=mac, dst='ff:ff:ff:ff:ff:ff')
            / IP(src='0.0.0.0', dst='255.255.255.255')
            / UDP(dport=67, sport=68)
            / BOOTP(op=1, chaddr=mac_to_bytes(mac))
            / DHCP(options=[('message-type', 'discover'), 'end']))
</code></pre><br/>
<pre><code class="python">def create_dhcp_request(mac, ip):
    return (Ether(src=mac, dst='ff:ff:ff:ff:ff:ff')
            / IP(src='0.0.0.0', dst='255.255.255.255')
            / UDP(dport=67, sport=68)
            / BOOTP(op=1, chaddr=mac_to_bytes(mac), ciaddr=ip)
            / DHCP(options=[('message-type', 'request'), 'end']))
</code></pre><br/>
<h3><font color="#3AC1EF">▍ Создание сообщения DNS на получение Resource Record типа AA</font></h3><br/>
<pre><code class="python">    return IP(dst=dns_server)/UDP()/DNS(rd=1, qd=DNSQR(qname=host_name))
</code></pre><br/>
<h3><font color="#3AC1EF">▍ Организация TCP соединения</font></h3><br/>
<pre><code class="python">def create_tcp_syn(src, sport, dst, dport, seq):
    return IP(src=src, dst=dst)/TCP(seq=seq,sport=sport, dport=dport, flags="S")

def create_tcp_ack(src, sport, dst, dport, ack, seq):
    return IP(src=src, dst=dst)/TCP(ack=ack, seq=seq, sport=sport, dport=dport, flags="A")


def create_tcp_fin_ack(src, sport, dst, dport, ack, seq):
    return IP(src=src, dst=dst)/TCP(ack=ack, seq=seq, sport=sport, dport=dport, flags="F")

def create_and_close_tcp_connection(host, dport):
    dst = socket.gethostbyname(host)
    src = get_default_interface_ip()
    sport = 12360
    seq = 1000
    syn = packets.create_tcp_syn(src=src, sport=sport, dst=dst, dport=dport, seq=seq)
    response = send_receive_l3(syn)
    ack = packets.create_tcp_ack(src=src, sport=sport, dst=dst, dport=dport, seq=response[TCP].ack, ack=response[TCP].seq+1)
    send_l3(ack)

    fin_ack = packets.create_tcp_fin_ack(src=src, sport=sport, dst=dst, dport=dport, seq=response[TCP].ack, ack=response[TCP].seq+1)
    response = send_receive_l3(fin_ack)
    ack = packets.create_tcp_ack(src=src, sport=sport, dst=dst, dport=dport, seq=response[TCP].ack, ack=response[TCP].seq+1)
    send_l3(ack)

</code></pre><br/>
Так как мы вмешиваемся в стандартную работу стека протоколов TCP/IP, и стек не догадывается о нашем вмешательстве, то он может отсылать RST-сегменты на сегменты, которые он не ожидает. Чтобы такого не было, нам придётся временно запретить отсылку RST-сегментов. В MacOS это выполняется при помощи команды pfctl. В Linux можно использовать iptables.<br/>
<br/>
<code>echo "block drop out proto tcp from any to any flags R/R" | cat /etc/pf.conf - | sudo /sbin/pfctl -Ef -</code><a name="6"></a><br/>
<br/>
<h2><font color="#3AC1EF">Заключение</font></h2><br/>
Изначально я хотел осветить вопросы перехвата трафика в компьютерных сетях для начинающих, но потом подумал, что было бы хорошо осветить основы компьютерных сетей с точки зрения программиста, чтобы дать начальные знания. Тема оказалась очень обширная, и, к сожалению, размер статьи не позволил включить всё. Но для понимания основ и примеров я привёл достаточно материала. <br/>
<br/>
Использование Scapy позволяет экспериментировать с отсылкой кастомных пакетов из пространства пользователя, написав минимальное количество кода, не погружаясь в дебри программирования драйверов. А Wireshark удобен для анализа пакетов, передаваемых по сети и изучения их структуры.<br/>
<br/>
Я написал статью о том, чего мне не хватало, когда я сам начинал изучать сетевое программирование.<br/>
<br/>
Примеры, приведённые в статье, не годятся для использования в реальных приложениях, они всего лишь позволяют разобраться в основах сетевых протоколов. C большой долей вероятности, вам не понадобится собственная реализация ARP-протокола, написание DHCP-клиента, DNS-клиента или реализация команды ping. Но экспериментируя с ними можно улучшить своё понимание сетевых протоколов, а ещё, увидеть как ведут себя реализации сетевых протоколов в различных непредвиденных ситуациях.<br/>
<br/>
<blockquote><b><font color="#3AC1EF"><a href="https://t.me/ruvds_community">Telegram-канал с розыгрышами призов, новостями IT и постами о ретроиграх 🕹️</a></font></b></blockquote><a href="http://ruvds.com/ru-rub?utm_source=habr&amp;utm_medium=article&amp;utm_campaign=artyomsoft&amp;utm_content=protokoly_semejstva_tcpip_teoriya_i_praktika"><img src="https://habrastorage.org/r/w1560/webt/tp/sk/z-/tpskz-7w7a8e74isoowuep40xeg.png" data-src="https://habrastorage.org/webt/tp/sk/z-/tpskz-7w7a8e74isoowuep40xeg.png"/></a></div></div></div> <!----> <!----></div> <!----> <!----></div> <!----> <div class="tm-article-presenter__meta"><div class="tm-article-presenter__meta-list tm-separated-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bruvds_%D1%81%D1%82%D0%B0%D1%82%D1%8C%D0%B8%5D" class="tm-tags-list__link">ruvds_статьи</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Btcp%2Fip%5D" class="tm-tags-list__link">tcp/ip</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Btcp%5D" class="tm-tags-list__link">tcp</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Budp%5D" class="tm-tags-list__link">udp</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bicmp%5D" class="tm-tags-list__link">icmp</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bdns%5D" class="tm-tags-list__link">dns</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Barp%5D" class="tm-tags-list__link">arp</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bip%5D" class="tm-tags-list__link">ip</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bscapy%5D" class="tm-tags-list__link">scapy</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bwireshark%5D" class="tm-tags-list__link">wireshark</a></li> <!----></ul></div> <div class="tm-article-presenter__meta-list tm-separated-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/companies/ruvds/articles/" class="tm-hubs-list__link router-link-active">Блог компании RUVDS.com</a></li><li class="tm-separated-list__item"><a href="/ru/hubs/python/" class="tm-hubs-list__link">Python</a></li><li class="tm-separated-list__item"><a href="/ru/hubs/system_programming/" class="tm-hubs-list__link">Системное программирование</a></li><li class="tm-separated-list__item"><a href="/ru/hubs/network_technologies/" class="tm-hubs-list__link">Сетевые технологии</a></li> <!----></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="24" width="24" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon tm-votes-meter__icon_appearance-article"><title>Всего голосов 69: ↑69 и ↓0</title> <use xlink:href="/img/megazord-v28.2fb1b1c1..svg#counter-rating"></use></svg> <span title="Всего голосов 69: ↑69 и ↓0" class="tm-votes-meter__value tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_appearance-article tm-votes-meter__value_rating">+69</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <!----> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="24" width="24" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v28.2fb1b1c1..svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    432
  </span></button> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="tm-sharing__icon"><path fill="currentColor" d="M13.8 13.8V18l7.2-6.6L13.8 5v3.9C5 8.9 3 18.6 3 18.6c2.5-4.4 6-4.8 10.8-4.8z"></path></svg></button> <DIV class="v-portal" style="display:none;"></DIV></div> <div title="Читать комментарии" class="tm-article-comments-counter-link tm-data-icons__item"><a href="/ru/companies/ruvds/articles/759988/comments/" class="tm-article-comments-counter-link__link"><svg height="24" width="24" class="tm-svg-img tm-article-comments-counter-link__icon"><title>Комментарии</title> <use xlink:href="/img/megazord-v28.2fb1b1c1..svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      5
    </span></a> <!----></div> <!----> <DIV class="v-portal" style="display:none;"></DIV></div></div></div>  <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <div></div> <section class="tm-block tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"><div class="tm-article-author__company"><div class="tm-article-author__company-card"><div class="tm-company-snippet"><a href="/ru/companies/ruvds/profile/" class="tm-company-snippet__logo-link"><div class="tm-entity-image"><img alt height="40" src="//habrastorage.org/getpro/habr/company/027/b19/cea/027b19cea984722a8d806edcc56c2c00.png" width="40" class="tm-entity-image__pic"></div></a> <div class="tm-company-snippet__info"><a href="/ru/companies/ruvds/profile/" class="tm-company-snippet__title">RUVDS.com</a> <div class="tm-company-snippet__description">VDS/VPS-хостинг. Скидка 15% по коду <b>HABR15</b></div></div></div> <div class="tm-article-author__buttons"><!----> <!----></div></div> <div class="tm-article-author__company-contacts"><a href="https://telegram.me/ruvds_community" rel="noopener" target="_blank" class="tm-article-author__contact">
      Telegram
    </a><a href="https://vk.com/ru_vds" rel="noopener" target="_blank" class="tm-article-author__contact">
      ВКонтакте
    </a><a href="https://twitter.com/ru_vds" rel="noopener" target="_blank" class="tm-article-author__contact">
      Twitter
    </a></div> <div class="tm-article-author__separator"></div></div> <div class="tm-user-card tm-article-author__user-card tm-user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/artyomsoft/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt src="//habrastorage.org/getpro/habr/avatars/a58/d90/974/a58d90974bec0e4d915c6ddb006a93cc.jpg" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 131 голос " class="tm-counter-container tm-karma tm-karma"><div class="tm-counter-container__header"><div class="tm-karma__votes tm-karma__votes_positive">
      123
    </div></div> <div class="tm-counter-container__footer"><div class="tm-karma__text">
      Карма
    </div> <DIV class="v-portal" style="display:none;"></DIV></div></div> <div title="Рейтинг пользователя" class="tm-counter-container"><div class="tm-counter-container__header"> <div class="tm-votes-lever tm-votes-lever tm-votes-lever_appearance-rating"><!----> <div class="tm-votes-lever__score tm-votes-lever__score tm-votes-lever__score_appearance-rating"><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter tm-votes-lever__score-counter_rating">
        67
      </span></div> <!----></div></div> <div class="tm-counter-container__footer"><span class="tm-rating__text tm-rating__text">
      Рейтинг
    </span></div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title tm-user-card__title_variant-article"><!----> <a href="/ru/users/artyomsoft/" class="tm-user-card__nickname tm-user-card__nickname tm-user-card__nickname_variant-article">
          @artyomsoft
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info tm-user-card__short-info_variant-article">Пользователь</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section>  <div class="tm-article-blocks__comments"><div id="publication-comments" class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/companies/ruvds/articles/759988/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="24" width="24" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v28.2fb1b1c1..svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 5 
    </span></a> <!----></div></div></div>  <section class="tm-block tm-block tm-block_spacing-bottom"><header class="tm-block__header tm-block__header tm-block__header_variant-borderless"><div class="tm-block__header-container"><h2 class="tm-block__title tm-block__title tm-block__title_variant-large">Публикации</h2> </div> <!----></header> <div class="tm-block__body tm-block__body tm-block__body_variant-condensed-slim"><div class="tm-tabs tm-tabs"><div><span class="tm-tabs__tab-item"><button class="tm-tabs__tab-link tm-tabs__tab-link tm-tabs__tab-link_active tm-tabs__tab-link_slim">
        Лучшие за сутки
      </button></span><span class="tm-tabs__tab-item"><button class="tm-tabs__tab-link tm-tabs__tab-link tm-tabs__tab-link_slim">
        Похожие
      </button></span></div> <!----></div> <div class="similar-and-daily__tab-view"><div class="placeholder-wrapper"><!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <div class="tm-placeholder-article-cards"><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div></div> <!----> <!----> <!----> <!----></div> <!----></div></div> <!----></section> <div class="placeholder-wrapper"><!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <div class="tm-placeholder-inset tm-placeholder-vacancies"><div class="tm-placeholder-inset__header"><div class="tm-placeholder__line tm-placeholder__line_inset-header loads"></div></div> <div class="tm-placeholder-inset__body"><ul class="tm-placeholder-list"><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li></ul></div> <div class="tm-placeholder-inset__footer"><div class="tm-placeholder__line tm-placeholder__line_inset-footer loads"></div></div></div> <!----> <!----> <!----> <!----> <!----> <!----></div> <!----> </div></div></div></div></div> <div class="tm-page__sidebar"><!----></div></div></div></div></main> <!----></div> <!----> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><div class="tm-footer__title"><a href="/ru/" class="tm-svg-icon__wrapper tm-footer__title-link router-link-active"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a></div> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="36" width="36" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="36" width="36" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="36" width="36" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-vk"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="36" width="36" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="36" width="36" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://dzen.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="36" width="36" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/new-social-icons-sprite.svg#social-logo-dzen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><svg height="16" width="16" class="tm-svg-img tm-footer__icon"><title>Язык</title> <use xlink:href="/img/megazord-v28.2fb1b1c1..svg#lang"></use></svg>
        Настройка языка
      </button> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2023, </span> <span class="tm-copyright__name"><a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a></span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"759988":{"id":"759988","timePublished":"2023-10-03T09:00:02+00:00","isCorporative":true,"lang":"ru","titleHtml":"Протоколы семейства TCP\u002FIP. Теория и практика","leadData":{"textHtml":"\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Fruvds\u002Farticles\u002F759988\u002F\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fgl\u002Ffy\u002Fym\u002Fglfyymidrcebbagd9c3p6oz3k7u.png\" alt=\"image\"\u003E\u003C\u002Fa\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ сети можно найти огромное количество материала о том, как функционируют сети на базе стека протоколов TCP\u002FIP, а также как писать компьютерные программы с сетевыми возможностями. При рассмотрении компьютерных сетей часто углубляются в описание физических основ и структур данных, передаваемых по сети, а при рассмотрении сетевого программирования основное внимание уделяют интернет-сокетам.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nНо при изучении и исследовании хочется большего, например, поэкспериментировать с пакетами сетевых протоколов. Многие сетевые протоколы реализованы в ядре операционной системы, и что-либо изменить может оказаться сложной задачей, так как это требует навыков в написании драйверов для операционной системы. Но использование специализированных библиотек позволяет работать с протоколами на низком уровне из пространства пользователя.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ ходе работы над статьёй я написал небольшое приложение, которое послужит отправной точкой для понимания компьютерных сетей и семейства протоколов TCP\u002FIP. С приложением можно экспериментировать, получая дополнительные знания.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nПриложение — простое и понятное и, надеюсь, упростит изучение материалов статьи. Ведь именно радость первой победы даёт мотивацию, достаточную для того, чтобы потратить гораздо больше времени на изучение темы.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ статье изложены наиболее важные с моей точки зрения понятия, которые должен знать любой программист, хоть как-то сталкивающийся с компьютерными сетями. Так что без теоретических сведений не обошлось.","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"editorVersion":"1.0","postType":"article","postLabels":[],"author":{"id":"3275257","alias":"artyomsoft","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fa58\u002Fd90\u002F974\u002Fa58d90974bec0e4d915c6ddb006a93cc.jpg","speciality":null,"scoreStats":{"score":123,"votesCount":131},"rating":67,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"donationsMethod":null},"statistics":{"commentsCount":5,"favoritesCount":432,"readingCount":22972,"score":69,"votesCount":69,"votesCountPlus":69,"votesCountMinus":0},"hubs":[{"id":"19791","alias":"ruvds","type":"corporative","title":"Блог компании RUVDS.com","titleHtml":"Блог компании RUVDS.com","isProfiled":false,"relatedData":null},{"id":"340","alias":"python","type":"collective","title":"Python","titleHtml":"Python","isProfiled":true,"relatedData":null},{"id":"5767","alias":"system_programming","type":"collective","title":"Системное программирование","titleHtml":"Системное программирование","isProfiled":true,"relatedData":null},{"id":"17123","alias":"network_technologies","type":"collective","title":"Сетевые технологии","titleHtml":"Сетевые технологии","isProfiled":true,"relatedData":null}],"flows":[{"id":"1","alias":"develop","title":"Разработка","titleHtml":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование","titleHtml":"Администрирование"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Fruvds\u002Farticles\u002F759988\u002F\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fgl\u002Ffy\u002Fym\u002Fglfyymidrcebbagd9c3p6oz3k7u.png\" alt=\"image\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fgl\u002Ffy\u002Fym\u002Fglfyymidrcebbagd9c3p6oz3k7u.png\"\u002F\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ сети можно найти огромное количество материала о том, как функционируют сети на базе стека протоколов TCP\u002FIP, а также как писать компьютерные программы с сетевыми возможностями. При рассмотрении компьютерных сетей часто углубляются в описание физических основ и структур данных, передаваемых по сети, а при рассмотрении сетевого программирования основное внимание уделяют интернет-сокетам.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНо при изучении и исследовании хочется большего, например, поэкспериментировать с пакетами сетевых протоколов. Многие сетевые протоколы реализованы в ядре операционной системы, и что-либо изменить может оказаться сложной задачей, так как это требует навыков в написании драйверов для операционной системы. Но использование специализированных библиотек позволяет работать с протоколами на низком уровне из пространства пользователя.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ ходе работы над статьёй я написал небольшое приложение, которое послужит отправной точкой для понимания компьютерных сетей и семейства протоколов TCP\u002FIP. С приложением можно экспериментировать, получая дополнительные знания.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПриложение — простое и понятное и, надеюсь, упростит изучение материалов статьи. Ведь именно радость первой победы даёт мотивацию, достаточную для того, чтобы потратить гораздо больше времени на изучение темы.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ статье изложены наиболее важные с моей точки зрения понятия, которые должен знать любой программист, хоть как-то сталкивающийся с компьютерными сетями. Так что без теоретических сведений не обошлось.\u003Ca name=\"habracut\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПриложение доступно \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fartyomsoft\u002Fraw-networking-samples-with-scapy\"\u003Eна GitHub\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cfont color=\"#3AC1EF\"\u003EСодержание\u003C\u002Ffont\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003E\u003Ca href=\"#1\"\u003EКратко о компьютерных сетях\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Ca href=\"#2\"\u003ECтек протоколов TCP\u002FIP\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Ca href=\"#4\"\u003EСетевое программирование и анализ сетевого трафика\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Ca href=\"#5\"\u003EПримеры программного кода\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Ca href=\"#6\"\u003EЗаключение\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Ca name=\"1\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cfont color=\"#3AC1EF\"\u003EКратко о компьютерных сетях\u003C\u002Ffont\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Компьютерная сеть\u003C\u002Ffont\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nКомпьютерная сеть — это множество вычислительных устройств, взаимодействующих между собой и совместно использующих ресурсы. Понятие сеть близко по смыслу к понятию графа. Cеть также состоит из множества узлов (nodes) и множества звеньев (links). Отличие сети от графа в том, что узлы являются чем-то осмысленным, в данном случае — это вычислительные устройства, а звенья представляют связи этих устройств. В русскоязычной литературе компьютерную сеть иногда называют вычислительной сетью.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Локальные и глобальные компьютерные сети\u003C\u002Ffont\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nВ зависимости от охвата территории компьютерные сети бывают:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Col\u003E\r\n\u003Cli\u003EПерсональные — Personal Area Network (PAN).\u003C\u002Fli\u003E\r\n\u003Cli\u003EЛокальные — Local Area Network (LAN).\u003C\u002Fli\u003E\r\n\u003Cli\u003EГородские — Metropolitan Area Network (MAN).\u003C\u002Fli\u003E\r\n\u003Cli\u003EГлобальные — Wide Area Network (WAN).\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003E\u003Cbr\u002F\u003E\r\nРазличные датчики, подключённые к смартфону, образуют сеть PAN. Компьютерная сеть из устройств, подключённых к вашему домашнему роутеру, является LAN-сетью, сеть из абонентов провайдера в городе — это MAN-сеть, а весь интернет, который вам предоставляет провайдер — WAN-сеть. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Сетевые модели\u003C\u002Ffont\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nПод сетевой моделью понимаются концептуальные основы, которые стандартизируют сетевое взаимодействие. Это основные термины, а также назначение и функции сетевых компонентов. Сетевая модель разделяет сетевые компоненты и их функции на уровни (слои (layers)). Каждый слой сетевой модели имеет определённое назначение и функции.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСейчас наиболее распространены две сетевых модели. Это семиуровневая OSI-модель и четырехуровневая TCP\u002FIP-модель.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПриведу схему моделей и как они соотносятся друг с другом.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fxl\u002Fev\u002F8z\u002Fxlev8zvnvvhjcp4tzh7lkcwuwrq.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fxl\u002Fev\u002F8z\u002Fxlev8zvnvvhjcp4tzh7lkcwuwrq.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ большинстве случаев вы будете иметь дело с сетевой моделью TCP\u002FIP, однако так исторически сложилось, что номера слоёв используются из сетевой модели OSI. Например, когда встречается термин Layer 2 или L2, подразумевается 1-й уровень (канальный уровень) из модели TCP\u002FIP.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nРазбивка по слоям позволяет технологиям каждого слоя эволюционировать независимо от всех остальных. Например, благодаря повсеместному внедрению оптоволокна скорость интернета возросла в десятки или даже сотни раз, а интернет как базировался на протоколе IP, так и продолжает базироваться.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Модель TCP\u002FIP\u003C\u002Ffont\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nБольшинство действующих стандартов интернета и протоколов TCP\u002FIP регламентируются документами Request For Comments (RFC). Учебники по компьютерным сетям ставят целью объяснить модель TCP\u002FIP, но за точной трактовкой понятий лучше обращаться к RFC.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДетально сетевая модель TCP\u002FIP рассмотрена в \u003Ca href=\"https:\u002F\u002Fdatatracker.ietf.org\u002Fdoc\u002Fhtml\u002Frfc1122\"\u003ERFC 1122 (Requirements for Internet Hosts — Communication Layers )\u003C\u002Fa\u003E и \u003Ca href=\"https:\u002F\u002Fdatatracker.ietf.org\u002Fdoc\u002Fhtml\u002Frfc1123\"\u003ERFC-1123 (Requirements for Internet Hosts — Application and Support)\u003C\u002Fa\u003E. Модель объясняется и расширяется другими RFC, но для понимания основ, я думаю, достаточно этих двух.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВыделим базовые понятия из модели TCP\u002FIP:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003Eхост (host);\u003C\u002Fli\u003E\r\n\u003Cli\u003Eсообщение;\u003C\u002Fli\u003E\r\n\u003Cli\u003EIP-датаграмма;\u003C\u002Fli\u003E\r\n\u003Cli\u003Eпакет;\u003C\u002Fli\u003E\r\n\u003Cli\u003Eфрейм;\u003C\u002Fli\u003E\r\n\u003Cli\u003EIP-адрес;\u003C\u002Fli\u003E\r\n\u003Cli\u003EMAC-адрес;\u003C\u002Fli\u003E\r\n\u003Cli\u003ETCP-сегмент;\u003C\u002Fli\u003E\r\n\u003Cli\u003EUDP-датаграмма;\u003C\u002Fli\u003E\r\n\u003Cli\u003EMTU.\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\nЧтобы не утомлять вас скучными определениями, я не буду приводить их, а просто расскажу принципы работы сети TCP\u002FIP, используя вышеприведённые термины.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Как работает сеть, построенная на базе TCP\u002FIP\u003C\u002Ffont\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nIP-сеть представляет собой множество связанных между собой хостов. Хосты связаны непосредственно или косвенно при помощи ретранслирующих устройств (маршрутизаторов и коммутаторов).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДля приёма сообщений из сети и отправку их в сеть хост использует интерфейсы. Физический интерфейс отправляет и принимает фреймы, а логический интерфейс отправляет и принимает IP-пакеты. Физический интерфейс идентифицируется MAC-адресом, логический интерфейс — IP-адресом.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПередаваемое сообщение представляет собой UDP-датаграмму или TCP-сегмент. Сообщение содержит заголовок и полезные данные. Чтобы передать сообщение внутри IP-сети оно помещается в IP-датаграмму. Конкретный физический интерфейс позволяет передавать данные порциями, которые имеют определённый максимально допустимый размер (MTU). Если размер IP-датаграммы превышает MTU, выполняется её фрагментация и создаётся несколько IP-пакетов, иначе создаётся только один IP-пакет для всей IP-датаграммы.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nIP-пакет в соответствии с таблицей маршрутизации хоста передаётся на выбранный логический интерфейс.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЛогический интерфейс сам непосредственно не может передать IP-пакет, он использует физический интерфейс. Физический интерфейс передаёт данные фреймами. Фрейм имеет заголовок и полезные данные (payload). В заголовке фрейма указывается MAC-адрес получателя, MAC-адрес отправителя и какому протоколу принадлежат данные в payload (Ethertype). Адрес отправителя известен, это МАС-адрес интерфейса отправляющего хоста. Для протокола IPv4 Ethertype=0x0800.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nАдрес физического интерфейса определяется путём посылки ARP-сообщения в широковещательный домен. ARP-сообщение инкапсулируется во фрейм, у которого EtherType = 0x0806 (ARP). В сообщении указывается MAC-адрес отправителя, широковещательный MAC-адрес получателя и интересующий IP-адрес. Хост с физическим интерфейсом, которому назначен этот IP-адрес в ответном сообщении, указывает MAC-адрес этого физического интерфейса. Чтобы не отсылать ARP-сообщение каждый раз, соответствие IP-адреса MAC-адресу сохраняется в кеше хоста.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\nПосле передачи фрейма на другой сетевой интерфейс из него извлекается содержимое IP-пакета, и, если IP-адрес логического интерфейса хоста соответствует IP-адресу получателя, он собирается в IP-датаграмму. Из IP-датаграммы извлекается TCP-сегмент или UDP-датаграмма. Из них извлекаются сами данные и передаются процессу операционной системы, который уже понимает, что с ними делать дальше. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИначе IP-пакет или отвергается или пересылается далее в соответствии с таблицей маршрутизации хоста. При отсылке он опять передаётся на логический интерфейс. Там упаковывается во фрейм и отсылается.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЭто упрощённое описание, так как я не углублялся в виртуальные сетевые интерфейсы, виртуальные частные сети, PPP-соединения, как работают сетевые транспортные протоколы TCP и UDP. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Адресация\u003C\u002Ffont\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nАдресация позволяет указать источника и получателя данных. Для слоя L2 получатель и отправитель идентифицируются MAC-адресами, для L3 — IP-адресами, для L4 — портами.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЧто касается MAC-адресации, вам достаточно знать, что в большинстве случаев физический интерфейс имеет уникальный MAC-адрес, состоящий из 6 байт.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЧто касается IP-адресации, тут всё немного интереснее. Начнём с того, что всего возможно 2^32 IP-адресов, но количество допустимых IP-адресов хостов меньше, а глобальных (IP-адресов, видимых в интернете) ещё меньше. Попробую объяснить, почему так происходит.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИнтернет проектировался как множество соединённых компьютерных сетей, хосты которых взаимодействуют между собой.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДля идентификации сетей используется то же адресное пространство, что и для идентификации интерфейсов хостов. Как это реализуется?\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКаждый IP-адрес — это последовательность из 32 бит. Первые n-бит в IP-адресе несут информацию о том, к какой сети принадлежит IP-адрес, оставшиеся биты — это уникальный адрес внутри этой сети. Однако адреса, у которых все биты 0 или все биты 1 имеют особое значение. Если все биты 0 — это сеть, если 1 — это широковещательный адрес.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСколько первых бит в IP-адресе несут информацию о сети определяется маской сети. Если выполнить побитовое “И” IP-адреса с маской сети, то получится идентификатор сети. Если выполнить побитовое “И” с инвертированной маской сети, то мы получим уникальный адрес внутри сети. Чтобы можно было проще представить информацию об IP-адресе, и какая его часть используется для идентификации сети, используется CIDR-нотация.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНапример, запись 192.168.0.0\u002F24 означает: сеть имеет идентификатор 192.168.0.0, 24 первых бита используются для идентификации сети. Для кодирования хостов используется 8 последних бит. Максимальное количество хостов в сети — 254 (0 — сеть, 255 — широковещательный адрес). \u003Cbr\u002F\u003E\r\nНо это ещё не всё. Не все сети могут быть видимыми в сети и некоторые из них используются для специальных целей.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКак мы видим, количество IP-адресов хостов в интернете не так уж и велико, поэтому выполняется переход на IPv6-адресацию, где количество IP-адресов гораздо больше.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Сегмент сети, подсеть, широковещательный домен, виды адресов\u003C\u002Ffont\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nКогда рассматривается сеть, нужно всегда иметь представление на каком уровне это выполняется. Если сеть рассматривается на канальном уровне, она состоит из устройств, имеющих MAC-адреса. Если она рассматривается на сетевом уровне, она состоит из хостов, имеющих IP-адреса. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nС целью упрощения управления, сети на канальном уровне разделяются на сегменты, а на сетевом уровне на подсети. И сегмент сети и подсеть являются широковещательным доменом. Иногда подсети называют также сегментами, однако нужно понимать, что подразумевается сегмент сети на уровне L3.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСетевое устройство или хост могут иметь следующие типы адресов:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003Eиндивидуальный адрес (unicast address);\u003C\u002Fli\u003E\r\n\u003Cli\u003Eшироковещательный адрес (broadcast address);\u003C\u002Fli\u003E\r\n\u003Cli\u003Eгрупповой адрес (multicast address).\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\nИндивидуальный адрес — это уникальный адрес в сегменте сети, или локальной (глобальной) сети.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nШироковещательный адрес — общий для всех сетевых устройств, имеющих MAC-адрес или для всех хостов подсети. Сообщения, посылаемые на широковещательный адрес, будут получены всеми узлами.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nМожно сделать так, чтобы сообщения отсылались только тем узлам, которые в них заинтересованы. Для этого используются групповые адреса. Но это уже отдельная тема, требующая отдельного и более широкого объяснения.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Маршрутизация в IP-сетях\u003C\u002Ffont\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nМаршрутизация обычному пользователю сети выглядит следующим образом. Если необходимо отправить IP-пакет по определённому адресу, то каждый раз просматривается таблица маршрутизации хоста, и на основании её определяется, нужно его отправлять на хост внутри сети, которой принадлежит отправляющий хост, или нужно его перенаправить на особый хост (маршрутизатор, шлюз), который решит, что делать с ним дальше. В локальных домашних сетях часто таким шлюзом является WiFi-роутер.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nWiFi-роутер обладает рядом функций и фактически состоит из нескольких устройств. Одной из важных функций WiFi-роутера является функция трансляции сетевых устройств (Network Address Translation — NAT), позволяющая устройствам из локальной сети получить доступ в интернет. Доступ этот немного ограниченный, но большинству пользователей этого достаточно.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСуть работы NAT в том, что хост, который находится за NAT, виден для глобальной сети как хост, у которого IP-адрес такой же, как и внешний адрес NAT, что позволяет более экономно расходовать глобальные IP-адреса. Подробное описание работы NAT потребует отдельной статьи, а то и книги.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Расчёт контрольной суммы\u003C\u002Ffont\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nПри передаче данных по сети могут происходить различные ситуации, когда принятые данные могут отличаться от тех, которые были переданы. Чтобы определить такие случаи, с данными передаётся контрольная сумма, вычислив которую на принимающей стороне и сравнив с принятой, можно дать ответ, передались ли данные верно, или где-то произошла ошибка передачи данных. Как правило, сообщения с неверной контрольной суммой отвергаются, и сообщение считается потерявшимся. На различных уровнях стека используются различные варианты подсчёта контрольной суммы. Например, для Ethernet-фрейма используется CRC-32. Для вычисления контрольной суммы IP-заголовка, ICMP-сообщения, UDP-датаграммы и TCP-сегмента используется расчёт контрольной суммы с использованием обратного кода (one’s complement checksum). Чтобы не тратить процессорное время на вычисление контрольных сумм для передаваемых Ethernet-фреймов или IP-пакетов, используется механизм разгрузки (offloading), который заключается в том, что контрольные суммы вычисляются сетевым адаптером.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Порядок байтов и битов\u003C\u002Ffont\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nДанные в компьютере хранятся и обрабатываются в виде двоичного кода. Двоичный код подразумевает, что информация кодируется при помощи двух значений — 0 и 1. Один 0 или одна 1 содержат минимальное количество информации, которое называется бит. Процессор обычно оперирует не отдельными битами, а порциями по 8, 16, 32, 64 и т. д. Минимальная такая порция это 8 бит. 8 бит называются байтом. Можно сказать, что информация в памяти хранится в виде последовательности байт. Но байт может принимать только 256 значений, что явно недостаточно для большинства математических операций, поэтому байты группируются в слова (2 байта), двойное слово (4 байта) и т. д. Но хранить эти группы байт в памяти можно по-разному. Возьмём двойное слово 4 байта 0x12345678, оно состоит из 4 байт со значениями 0x12, 0x34, 0x56, 0x78. В памяти их можно разместить в следующем порядке 0x12, 0x34, 0x56, 0x78 или 0x78, 0x56, 0x34, 0x12. Как они будут размещены в памяти зависит от архитектуры процессора. Например в архитектуре x86 это будет порядок, при котором байт с менее значимыми битами будет храниться раньше байта с более значимыми битами.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТак исторически сложилось, что данные в пакетах, передаваемых в IP-сетях, имеют сетевой порядок байтов, который подразумевает, что байт, содержащий старшие биты, хранится первый.\u003Cbr\u002F\u003E\r\nЧто касается порядка битов, то если не углубляться в вопросы кодирования передаваемых данных на уровне сигналов, порядок не важен, так как сетевой адаптер сделает всё без вмешательства программиста.\u003Ca name=\"2\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cfont color=\"#3AC1EF\"\u003ECтек протоколов TCP\u002FIP\u003C\u002Ffont\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nСуществует ряд протоколов, на которых всё основывается:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003EEthernet II;\u003C\u002Fli\u003E\r\n\u003Cli\u003EIP — Internet Protocol;\u003C\u002Fli\u003E\r\n\u003Cli\u003EICMP — Internet Control Management Protocol;\u003C\u002Fli\u003E\r\n\u003Cli\u003EUDP — User Datagram Protocol;\u003C\u002Fli\u003E\r\n\u003Cli\u003ETCP — Transmission Control Protocol;\u003C\u002Fli\u003E\r\n\u003Cli\u003EDHCP — Dynamic Host Configuration Protocol;\u003C\u002Fli\u003E\r\n\u003Cli\u003EDNS — Domain Name Service.\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E \u003Cbr\u002F\u003E\r\nРассмотрим их поподробнее. Данные передаются порциями, которые называются Protocol Data Unit (PDU). PDU состоит из заголовка (header) и полезных данных (payload). PDU одного протокола в полезных данных могут содержать PDU другого протокола. Это называется инкапсуляцией. В зависимости от уровня, на котором работает сетевой протокол, PDU могут называться по-разному:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003Eна канальном уровне — фрейм;\u003C\u002Fli\u003E\r\n\u003Cli\u003Eна сетевом уровне — пакет (IP, ICMP); \u003C\u002Fli\u003E\r\n\u003Cli\u003Eна транспортном уровне — сегмент или датаграмма (TCP, UDP);\u003C\u002Fli\u003E\r\n\u003Cli\u003Eна прикладном уровне — сообщение (DNS, DHCP).\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\nНо в разной литературе могут не следовать правилу, например, часто можно встретить IP-датаграмму, TCP-пакеты или UDP-пакеты. А в программах по анализу трафика в сети все PDU называются пакетами. По мере приобретения опыта, вы будете лучше ориентироваться, что имелось в виду при употреблении того или иного термина. \u003Ca name=\"3\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cfont color=\"#3AC1EF\"\u003EПротокол Ethernet\u003C\u002Ffont\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nОбычно при описании протокола Ethernet опускаются чуть ли не до бит, а то и сигналов, передаваемых по сети. Я не буду углубляться в такие подробности, к тому же с большой долей вероятности вы используете WiFi-соединение, поэтому различные средства для перехвата сетевого трафика, как правило, будут показывать его как IP-пакеты, инкапсулированные в Ethernet II фреймы. Эти фреймы имеют мало чего общего с фреймами WiFi, но унифицируют работу с канальным уровнем. Вообще, информация о том, как работает WiFi, заслуживает отдельной статьи.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nEthernet-фрейм, который передаётся или принимается драйвером сетевого адаптера, состоит из заголовка и полезных данных.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Frm\u002Fe_\u002Fcd\u002Frme_cdwpuntkx3t0pcozi9baiuo.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Frm\u002Fe_\u002Fcd\u002Frme_cdwpuntkx3t0pcozi9baiuo.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nЧасто можно встретить информацию о минимальном размере Ethernet-фрейма, преамбуле и контрольной сумме. Но это уровень реализации драйвера сетевого адаптера или аппаратной реализации самого адаптера, поэтому не буду рассматривать его в статье. Для нас Ethernet-фрейм содержит MAC-адрес получателя, MAC-адрес отправителя, тип фрейма и сами данные.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Протокол IP\u003C\u002Ffont\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nОригинальное описание протокола находится в \u003Ca href=\"https:\u002F\u002Fdatatracker.ietf.org\u002Fdoc\u002Fhtml\u002Frfc791\"\u003ERFC 791 Internet Protocol — DARPA Internet Program Protocol Specification\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Структура пакетов\u003C\u002Ffont\u003E\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nСтруктура IP-пакета приведена ниже. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Frt\u002Fa6\u002Fot\u002Frta6otjht2jdenxbw9hamkt7g_c.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Frt\u002Fa6\u002Fot\u002Frta6otjht2jdenxbw9hamkt7g_c.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ IP-пакеты и IP-датаграммы\u003C\u002Ffont\u003E\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nПротокол IP позволяет передавать данные порциями. В литературе можно встретить два похожих термина: IP-датаграмма и IP-пакет. Иногда их неверно употребляют. Я хочу уточнить это различие. IP-датаграмма — это те данные, которые передаются на сетевой уровень, а IP-пакет — это те данные, которые передаются в IP-сети. Размер IP-датаграммы ограничивается максимальным значением в поле Total Length. Размер IP-пакета ограничивается MTU (Maximum Transmission Unit) — максимально возможное количество данных, которые могут быть переданы одним фреймом на канальном уровне. Чтобы передать IP-датаграмму, которая содержит полезных данных больше, чем может поместиться в один IP-пакет, используется фрагментация. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Фрагментация IP-датаграмм\u003C\u002Ffont\u003E\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nПротокол IP поддерживает фрагментацию IP-датаграмм. Cуть фрагментации заключается в том, что максимальный размер передаваемых данных в одной IP-датаграмме составляет 65535 байт (октетов), а максимальный размер данных, который может поместиться в PDU канального уровня (MTU), гораздо меньше (обычно он составляет 1500 или около байт). Если размер IP-датаграммы больше MTU, она будет разбита на несколько IP-пакетов, каждый из которых можно будет передать в PDU канального уровня. При получении IP-пакетов они будут собраны в IP-датаграмму, и она будет разобрана на транспортном уровне.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВсе IP-пакеты одной IP-датаграммы имеют одинаковое значение в поле Identification, а поле Offset содержит смещение в payload IP-датаграммы. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nХотя фрагментация позволяет соединять хосты в разнородных сетях, её желательно избегать, так как она усложняет передачу данных и увеличивает нагрузку на сеть из-за создания новых IP-пакетов и перерасчёта контрольных сумм. Поэтому желательно, чтобы TCP-сегмент или UDP-датаграмма имела размер не больше MTU по пути следования IP-пакетов. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Протокол ARP\u003C\u002Ffont\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nПротокол ARP используется для определения МАС-адреса физического интерфейса хоста по его IP-адресу. Описание протокола приведено в \u003Ca href=\"https:\u002F\u002Fdatatracker.ietf.org\u002Fdoc\u002Fhtml\u002Frfc826\"\u003ERFC 826 — An Ethernet Address Resolution Protocol\u003C\u002Fa\u003E. MAC-адрес не обязательно должен быть адресом в Ethernet-сети, но ниже я привожу структуру ARP-сообщения для Ethernet-сети.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fee\u002Ffe\u002Fwm\u002Feefewm76b5f2atszq3aibtjp14w.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fee\u002Ffe\u002Fwm\u002Feefewm76b5f2atszq3aibtjp14w.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Протокол ICMP\u003C\u002Ffont\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nОписание протокола приведено в \u003Ca href=\"https:\u002F\u002Fdatatracker.ietf.org\u002Fdoc\u002Fhtml\u002Frfc792\"\u003ERFC 792 (Internet Protocol DARPA Internet Program Protocol Specification) \u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Структура сообщений\u003C\u002Ffont\u003E\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nВ описании протокола приведено много различных сообщений, но нам достаточно для начала разобраться с сообщениями Echo и Reply\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002F-r\u002Fyb\u002Fud\u002F-rybudbfve7pvuwx7o3-acvivqo.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F-r\u002Fyb\u002Fud\u002F-rybudbfve7pvuwx7o3-acvivqo.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nХотя сообщения, используемые протоколом, инкапсулируются в IP-датаграммы, ICMP причисляют к тому же уровню, что и IP — сетевому.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Протокол UDP\u003C\u002Ffont\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nОписание протокола приведено в \u003Ca href=\"https:\u002F\u002Fdatatracker.ietf.org\u002Fdoc\u002Fhtml\u002Frfc768\"\u003ERFC 768 (User Datagram Protocol)\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПротокол позволяет двум процессам обмениваться UDP-датаграммами. Каждая UDP-датаграмма содержит в себе порт отправителя (Source Port), порт получателя (Destination Port), длину дейтаграммы (Length), контрольную сумму (Checksum) и собственно сами передаваемые данные.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПри расчёте контрольной суммы добавляется псевдозаголовок, который не передаётся, а только участвует в расчёте контрольной суммы.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПротокол используется в качестве транспортного протокола там, где на транспортном уровне допускается дублирование получаемых данных, пропуск данных или не важен порядок, в котором данные будут доставлены.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКак правило, обработка этих случаев возлагается на протоколы уровня приложений или не осуществляется вовсе. Например, в потоковом видео или аудио данные пропускаются, так как повторная передача данных является в этом случае бессмысленной. Но если вы хотите гарантированную доставку данных на транспортном уровне, то вам необходимо использовать протокол TCP.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Структура сообщений\u003C\u002Ffont\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nСтруктуры псевдозаголовка, используемого при вычислении контрольной суммы и UDP-датаграммы, приведены ниже.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fdx\u002F21\u002Fxj\u002Fdx21xj1srh19tbds3hdbepy-zjk.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fdx\u002F21\u002Fxj\u002Fdx21xj1srh19tbds3hdbepy-zjk.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fg5\u002F06\u002Fdb\u002Fg506db_3gsblkr6bctrpk6tzl_0.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fg5\u002F06\u002Fdb\u002Fg506db_3gsblkr6bctrpk6tzl_0.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Протокол TCP\u003C\u002Ffont\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nПротокол TCP — самый из сложный из всех, приведённых в статье. Назначение протокола TCP — создать надёжное виртуальное полнодуплексное соединение между процессами. На данный момент самое свежее описание протокола приведено в \u003Ca href=\"https:\u002F\u002Fdatatracker.ietf.org\u002Fdoc\u002Fhtml\u002Frfc9293\"\u003ERFC 9293 — Transmission Control Protocol (TCP)\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Структура сообщений\u003C\u002Ffont\u003E\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nСообщения, используемые в протоколе TCP, называются TCP-сегментами. Просьба не путать с сегментами сети. Они с ними не имеют ничего общего. При расчёте контрольной суммы для TCP-сегмента как и в UPD используется псевдозаголовок. Но если для UDP расчёт контрольной суммы не является обязательным, то для TCP он таким не является.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСтруктура псевдозаголовка и TCP-сегмента приведена ниже.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fah\u002Fmx\u002Fes\u002Fahmxes9jgl-re2ulncqr1xvua3q.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fah\u002Fmx\u002Fes\u002Fahmxes9jgl-re2ulncqr1xvua3q.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002F47\u002Few\u002F2a\u002F47ew2a1okiz40lti8bvyfjmjr30.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F47\u002Few\u002F2a\u002F47ew2a1okiz40lti8bvyfjmjr30.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКак видно из структуры заголовка, в протокол TCP, как и в протокол IP, заложены возможности для расширения и эволюции протокола при помощи поля Options. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКлючевые понятия, необходимые для понимания TCP:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003ESegment;\u003C\u002Fli\u003E\r\n\u003Cli\u003ESequence Number;\u003C\u002Fli\u003E\r\n\u003Cli\u003EAcknowledge number;\u003C\u002Fli\u003E\r\n\u003Cli\u003ETCP Window;\u003C\u002Fli\u003E\r\n\u003Cli\u003ETCP Handshake;\u003C\u002Fli\u003E\r\n\u003Cli\u003EMSS — Maximum Segment Size;\u003C\u002Fli\u003E\r\n\u003Cli\u003ETCP Flags and TCP Options;\u003C\u002Fli\u003E\r\n\u003Cli\u003EWindow Scaling;\u003C\u002Fli\u003E\r\n\u003Cli\u003ESelective Acknowledgement.\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\nДля надёжной передачи данных используются Sequence Number, Acknowledge Number и Window Size. Рассмотрим, как они работают вместе. Передаваемые данные разбиваются на TCP-сегменты.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЗа каждым TCP-сегментом закрепляется Sequence number.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nSequence Number может принимать значения от 0x00000000 до 0xffffffff. Если каждому передаваемому байту присвоить номер и разбить на сегменты, то Sequence Number — это номер первого байта каждого сегмента.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nSequence Number служит для упорядочивания сегментов, которые пришли не в порядке их отсылки (out of order), подтверждения полученных сегментов (acknowledgement), а также для повторной отсылки потерявшихся сегментов (retransmitting).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКаждый передаваемый по сети TCP-сегмент содержит поля Sequence Number и Acknowledge Number. Sequence Number идентифицирует отправляемый сегмент, а Acknowledge Number указывает на то, какой сегмент ожидается.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЗначения Sequence Number и Acknowledge Number позволяют отслеживать прогресс передачи данных по TCP-соединению. Каждая сторона генерирует случайное число из диапазона от 0 до 2^32, которое называется ISN. Это число является началом для генерирования Sequence Numbers отсылаемых сегментов.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\nСегменты отсылаются только те, которые попадают в окно. Размер этого окна сообщается отправителю при установлении соединения, но может быть изменён принимающей стороной в дальнейшем. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПо мере получения подтверждений с принимающей стороны, окно сдвигается по кругу. \u003Cbr\u002F\u003E\r\nПеред передачей данных, необходимо установить соединение. При установке соединения стороны обмениваются параметрами будущего соединения. Любая сторона может инициировать разрыв соединения.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПри установке соединения стороны обмениваются параметрами Sequence Number, Acknowledge Number, Window Size, а также параметрами, которые передаются в поле TCP Options (MSS, Window scale). \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Флаги TCP\u003C\u002Ffont\u003E\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nДля управления TCP-соединением используются флаги в отсылаемых TCP-сегментах. Наиболее важными являются:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003ESYN — используется при установлении TCP-соединения;\u003C\u002Fli\u003E\r\n\u003Cli\u003EACK — означает, что сегмент был получен принимающей стороной;\u003C\u002Fli\u003E\r\n\u003Cli\u003EFIN — используется при нормальном (graceful) закрытии TCP-соединении;\u003C\u002Fli\u003E\r\n\u003Cli\u003ERST — используется при аварийном закрытии TCP-соединения.\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Опции TCP\u003C\u002Ffont\u003E\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nПротокол TCP разработан таким образом, что его можно расширять используя механизм опций. Опции это дополнительные поля, которые передаются в заголовке. Например, при установлении соединения стороны обмениваются опциями, Window Scale, MSS. В зависимости от настроек стека в TCP-сегменте может передаваться опция TCP timestamp. Если опция не поддерживается, она игнорируется стеком.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Открытие соединения, передача данных, закрытие соединения\u003C\u002Ffont\u003E\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nВ RFC 9293 приведено подробное описание и представлена диаграмма состояний для TCP-соединения. Я не буду её здесь приводить. При желании вы её можете разобрать. Но хочу сразу сказать, её сложно читать. Ниже представлена диаграмма последовательностей для жизненного цикла TCP соединения.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fv7\u002Fno\u002Ffh\u002Fv7nofhxhmeu57t495bocjapppwa.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fv7\u002Fno\u002Ffh\u002Fv7nofhxhmeu57t495bocjapppwa.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nОбратите внимание, как меняются значения в полях SequenceNumber и AcknowledgeNumber предаваемых TCP сегментов.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЕсли при установлении TCP-соединения используется 3-way handshake, то с закрытием существует множество различных вариантов. На диаграмме приведен 4-way handshake, который будет в случае, если сервер не обработал все данные от клиента при получении TCP-сегмента FIN,ACK. В случае, если данные все обработанные, то выполняется 3-way handshake (сервер отсылает только сегмент FIN,ACK). \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЧтобы вам было понятнее в механизме передачи и приёма TCP-сегментов, я нарисовал схематический рисунок.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002F4x\u002Fva\u002Fvx\u002F4xvavx7hdhkpv5ee3lnnxdy_ivo.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F4x\u002Fva\u002Fvx\u002F4xvavx7hdhkpv5ee3lnnxdy_ivo.png\"\u002F\u003E\u003C\u002Fdiv\u003E \u003Cbr\u002F\u003E\r\n\u003Ch4\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Настройка стека TCP\u002FIP\u003C\u002Ffont\u003E\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nРаботу стека протоколов TCP\u002FIP можно настраивать в операционной системе, только делать это лучше в том случае, если вы точно осознаёте, что именно вы изменяете и зачем.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ Windows стек можно настроить командой netsh, В Linux\u002FMacOS — командой sysctl. В зависимости от операционной системы перечень и значения по умолчанию настраиваемых параметров могут отличаться. Например, в Windows tcp timestamps отключены по умолчанию. Чтобы включить, нужно выполнить команду:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"bash\"\u003Enetsh int tcp set global timestamps=enabled\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nВ Linux, напротив, tcp timestamps включены, если вы хотите их отключить нужно выполнить команду:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"bash\"\u003Esysctl -w net.ipv4.tcp_timestamps=0\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nВ MacOS включить\u002Fотключить tcp timestamps у вас не получится.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Протокол DHCP\u003C\u002Ffont\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nДля работы в сети TCP\u002FIP хост необходимо настроить. Минимально необходимо указать его IP-адрес и маску подсети. Также может понадобиться указать адрес шлюза и адрес DNS-сервера. Протокол DHCP позволяет хосту получить эти данные автоматически из сети.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСуществуют различные варианты использования данного протокола, но мы рассмотрим основной успешный сценарий получения IP-адреса хостом, который состоит из обмена 4 сообщениями.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Получение конфигурации\u003C\u002Ffont\u003E\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\n1. Изначально хост не имеет IP-адреса и не знает, где расположен DHCP-сервер, который ему эту информацию может предоставить. Поэтому он посылает широковещательное сообщение DHCP Discover в свой сегмент сети. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n2. Если в сети присутствует DHCP-сервер, он отвечает unicast-сообщением DHCP Offer, в котором содержится предлагаемая конфигурация для хоста. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n3. Хост посылает unicast-сообщение DHCP Request, в котором указывает, назначенный ему IP-адрес\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n4. Сервер отвечает unicast-сообщением DHCP Acknowledge, которое говорит о том, что конфигурация хосту назначена.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДиаграмма последовательностей приведена ниже.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fgk\u002Fnq\u002Fil\u002Fgknqilxkrhy67ubbd0civifrcus.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fgk\u002Fnq\u002Fil\u002Fgknqilxkrhy67ubbd0civifrcus.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Структура сообщений\u003C\u002Ffont\u003E\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nОписание протокола приведено в \u003Ca href=\"https:\u002F\u002Fdatatracker.ietf.org\u002Fdoc\u002Fhtml\u002Frfc2131\"\u003ERFC 2131 — Dynamic Host Configuration Protocol\u003C\u002Fa\u003E. DHCP-протокол является расширением более раннего протокола BOOTP (\u003Ca href=\"https:\u002F\u002Fdatatracker.ietf.org\u002Fdoc\u002Fhtml\u002Frfc951\"\u003ERFC 951 Bootstrap Protocol\u003C\u002Fa\u003E). Поэтому заголовок DHCP-сообщения почти полностью совпадает с BOOTP-сообщением. Поле options всегда начинается с магического числа 0x62825363, за которым следуют DHCP-опции, описанные в \u003Ca href=\"https:\u002F\u002Fdatatracker.ietf.org\u002Fdoc\u002Fhtml\u002Frfc2132\"\u003ERFC 2132 DHCP Options and BOOTP Vendor Extensions \u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКаждая опция состоит из кода, длины и одного или нескольких октетов сообщения. Исключение составляют опции с кодами 0x00 (заполнитель) и 0xff (конец опций). Размер DHCP-сообщения в октетах должен быть кратным четырём, поэтому после опции с кодом 0xff может быть одна или несколько опций с кодом 0x00.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКак выглядит DHCP-сообщение, приведено ниже:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fjo\u002Fs_\u002Fss\u002Fjos_sslvm3c3-ggneokp4fyp-kw.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fjo\u002Fs_\u002Fss\u002Fjos_sslvm3c3-ggneokp4fyp-kw.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Протокол DNS\u003C\u002Ffont\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nПротокол DNS регламентируется \u003Ca href=\"https:\u002F\u002Fdatatracker.ietf.org\u002Fdoc\u002Fhtml\u002Frfc1035\"\u003ERFC 1035 DOMAIN NAMES — IMPLEMENTATION AND SPECIFICATION\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСкорее всего, вы имеете представление о службе DNS, так она используется для преобразования доменного имени хоста в его IP-адрес. Вроде бы всё просто, и для программиста всё скрывается за простым API, но этот факт затрудняет понимание сути DNS. IP-адрес хоста — это лишь часть той информации, которую может хранить DNS.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПрограммы типа nslookup и функции в Winsock или glibc запутывают в понимании DNS. Я бы советовал начинать изучение DNS с экспериментов с утилитой dig и анализа трафика. DNS нужно рассматривать, не привязываясь к IP. DNS — это распределённая иерархическая база данных доменов.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЧтобы убедиться, что это действительно база данных можете зайти \u003Ca href=\"https:\u002F\u002Ftrendoceans.com\u002Fdns-toys\u002F\"\u003Eна сайт\u003C\u002Fa\u003E и увидеть тому подтверждение.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Домен\u003C\u002Ffont\u003E\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nЧто такое домен? Домен можно определить как именованную сущность, которая содержит метаинформацию о себе и находится в ведении организации или частного лица. К такой информации относятся IP-адрес, имя используемого почтового сервера, имена серверов имён, обслуживающих данный домен и др. Для упрощения управления доменами они организовываются в иерархию.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДомены не существуют сами по себе, они хранятся серверами имён. Информация, связанная с доменом, объединяется в зону, которая обслуживается конкретным сервером имён.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Зона\u003C\u002Ffont\u003E\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nЗона — это информация о доменах, размещённая на DNS-сервере.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКорневую зону доменов интернета можно посмотреть \u003Ca href=\"https:\u002F\u002Fwww.internic.net\u002Fdomain\u002Froot.zone\"\u003Eздесь\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКорневая зона доменов обслуживается \u003Ca href=\"https:\u002F\u002Fwww.iana.org\u002Fdomains\u002Froot\u002Fservers\"\u003E13 корневыми доменными серверами\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Ресурсная запись\u003C\u002Ffont\u003E\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nСистема доменных имён позволяет структурировано хранить информацию. Доменные имена организуются в древовидную структуру, листьями которой являются ресурсные записи (Resource Record (RR)). Каждая RR имеет класс и тип. Как правило, классы могут принимать следующие значения:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003EIN (Internet);\u003C\u002Fli\u003E\r\n\u003Cli\u003ECH (Chaos);\u003C\u002Fli\u003E\r\n\u003Cli\u003EHS (Hesiod).\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\nХотя можно встретить классы CH и HS, применение их специфическое, и с большой долей вероятности вы с ними не столкнётесь.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nА вот типов RR гораздо больше, и часть из них знать обязательно:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003EA (Address) — IP-адрес, закреплённый за доменным именем;\u003C\u002Fli\u003E\r\n\u003Cli\u003EAAAA (IPv6 Address) — IPv6-адрес, закреплённый за доменным именем;\u003C\u002Fli\u003E\r\n\u003Cli\u003ECNAME (Canonical Name);\u003C\u002Fli\u003E\r\n\u003Cli\u003EMX (Mail Exchanger);\u003C\u002Fli\u003E\r\n\u003Cli\u003ENS (Name Server);\u003C\u002Fli\u003E\r\n\u003Cli\u003EPTR (Pointer);\u003C\u002Fli\u003E\r\n\u003Cli\u003ESOA (Start of Authority);\u003C\u002Fli\u003E\r\n\u003Cli\u003ETXT (Text);\u003C\u002Fli\u003E\r\n\u003Cli\u003ESRV (Service).\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Резолвер\u003C\u002Ffont\u003E\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nDomain Name Service позволяет по имени хоста получить его IP-адрес. Реализуется это при помощи распределённой базы данных, работающих на множестве хостов. Хост, как правило, взаимодействует с локальным компонентом, называемым резолвером (resolver). К резолверу можно обратиться через API операционной системы или библиотеки языка программирования.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПри выполнении API-функции резолвер проверяет в своём локальном кэше IP-адрес для имени хоста. Если не находит, то пытается сделать запрос DNS-серверу, адрес которого прописан в конфигурации. Что может происходить дальше опустим, для упрощения описания. В конечном итоге DNS-сервер возвращает IP-адрес для имени хоста или ошибку, если такой хост отсутствует. Резолвер помещает эту информацию в кэш и возвращает значение вызвавшему коду. В Linux API к резолверу находится в библиотеке glibc, в Windows — в библиотеке Winsock.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОбычно в примерах по сетевому программированию приводится именно работа с API резолвера. Я же в практической части покажу, как можно послать запрос DNS-серверу на низком уровне, сформировав IP-пакет, содержащий DNS-запрос. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Структура пакетов\u003C\u002Ffont\u003E\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nПростой DNS-запрос выглядит следующим образом:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002F8s\u002F3l\u002Fg5\u002F8s3lg50dcuer7vd8cxqpxetxniq.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F8s\u002F3l\u002Fg5\u002F8s3lg50dcuer7vd8cxqpxetxniq.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nПример DNS-ответа приведён ниже:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Fqk\u002F0j\u002F3e\u002Fqk0j3e9olcwuz3queuuhc5w-_q4.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fqk\u002F0j\u002F3e\u002Fqk0j3e9olcwuz3queuuhc5w-_q4.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nКак правило, запросы и ответы отсылаются с использованием UDP в качестве транспортного протокола. Однако если ответ слишком большой, сервер вернёт флаг TC. Это означает, что для получения полного ответа нужно использовать TCP в качестве транспорта.\u003Ca name=\"4\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cfont color=\"#3AC1EF\"\u003EСетевое программирование и анализ сетевого трафика\u003C\u002Ffont\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Стеки протоколов TCP\u002FIP и программные интерфейсы\u003Cbr\u002F\u003E\r\n\u003C\u002Ffont\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nПрактически любая современная операционная система имеет поддержку работы с семейством протоколов TCP\u002FIP. Набор компонентов операционной системы, которые обеспечивают коммуникацию посредством семейства протоколов TCP\u002FIP, называют стеком протоколов. Разные операционные системы предоставляют доступ к стеку, используя различные программные интерфейсы. Наиболее распространённым является интерфейс сокетов.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nХотя и существуют различия в этом интерфейсе для различных операционных систем, большинство функций схожи. Работа с сокетами подразумевает программирование на языке С. Однако для различных языков написаны обёртки, которые позволяют кроссплатформенно работать с сокетами. В зависимости от языка, обёртки могут предоставлять больше или меньше функций. Например обёртка в Python больше зависит от платформы, на которой исполняется, чем обёртка в Java. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Анализ пакетов в сети \u003C\u002Ffont\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nОбычно в литературе по сетевым технологиям рассматриваются основы компьютерных сетей, потом сокеты. Но то, как именно можно создать и послать пакет, структура которого подробно расписана, не приводится. Я хочу восполнить этот пробел.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИнструкции процессора в операционной системе могут исполняться в режиме ядра или режиме пользователя. Большинств кода, который пишет программист — это инструкции процессору, которые выполняются в режиме пользователя. В режиме ядра выполняется код драйверов и ядра операционной системы.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСтек TCP\u002FIP выполняется в режиме ядра, а из режима пользователя он, как правило, доступен только через вызов АPI-сокетов. Поэтому программист только может выполнить высокоуровневые операции, такие как открыть TCP-соединение, передать данные по TCP-соединению или передать данные как UDP-датаграмму. Доступа к формируемым пакетам он не имеет.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЧтобы получить доступ к формируемым пакетам, используются так называемые Raw-сокеты. Замечу, что в Windows Raw-сокеты имеют ограниченный функционал. Например, невозможно создать Raw-сокет, который бы позволял работать с Ethernet-фреймами. Поэтому для получения доступа к формированию Ethernet-фреймов используют специальный NDIS-драйвер и библиотеку npcap. В Linux же достаточно же просто создать AF_PACKET Raw-сокет. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ libpcap\u003C\u002Ffont\u003E\u003C\u002Fh3\u003E \u003Cbr\u002F\u003E\r\nБиблиотека предоставляет высокоуровневый, если так можно сказать, API для формирования, фильтрации и перехвата пакетов, который прячет детали реализации для разных платформ.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Scapy\u003C\u002Ffont\u003E\u003C\u002Fh3\u003E \u003Cbr\u002F\u003E\r\nДля Windows существует библиотека npcap, для Unix-подобных систем — libpcap. Python-библиотека Scapy позволяет писать платформо-независимые приложения, игнорируя этот факт. Также она поддерживает многие сетевые протоколы. И содержит средства для разбора, генерации и отсылки пакетов из пространства пользователя. Например, расчёт контрольной суммы для заголовка IP-пакета, указание правильного Ethertype или Protocol при инкапсуляции пакетов. Библиотека удобна для экспериментирования и исследования сетевых протоколов. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Wireshark\u003C\u002Ffont\u003E\u003C\u002Fh3\u003E \u003Cbr\u002F\u003E\r\nПрограмма Wireshark, можно сказать, самая распространённая программа для анализа сетевого трафика. При помощи графического интерфейса, можно записывать сетевой трафик на диск, фильтровать пакеты, рассматривать их структуру, отслеживать работу TCP-сессий и многое другое. Совместно с Scapy, это, наверное, лучший набор для изучения основ сетевых протоколов и проведения различных экспериментов. \u003Ca name=\"5\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cfont color=\"#3AC1EF\"\u003EПримеры программного кода\u003C\u002Ffont\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nДалее я хочу привести фрагменты из моего приложения для упрощения понимания основ TCP\u002FIP.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Создание ARP-запроса\u003C\u002Ffont\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003Edef create_arp_request(ip):\n    return Ether(dst=\"ff:ff:ff:ff:ff:ff\")\u002FARP(pdst=ip)\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Создание сообщения Echo, используемого в протоколе ICMP\u003C\u002Ffont\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003Edef create_ping_request(ip):\n    return IP(dst=ip)\u002FICMP()\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Создание сообщений DHCP Discover и DHCP Request\u003C\u002Ffont\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003Edef create_dhcp_discover(mac):\n    return (Ether(src=mac, dst='ff:ff:ff:ff:ff:ff')\n            \u002F IP(src='0.0.0.0', dst='255.255.255.255')\n            \u002F UDP(dport=67, sport=68)\n            \u002F BOOTP(op=1, chaddr=mac_to_bytes(mac))\n            \u002F DHCP(options=[('message-type', 'discover'), 'end']))\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003Edef create_dhcp_request(mac, ip):\n    return (Ether(src=mac, dst='ff:ff:ff:ff:ff:ff')\n            \u002F IP(src='0.0.0.0', dst='255.255.255.255')\n            \u002F UDP(dport=67, sport=68)\n            \u002F BOOTP(op=1, chaddr=mac_to_bytes(mac), ciaddr=ip)\n            \u002F DHCP(options=[('message-type', 'request'), 'end']))\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Создание сообщения DNS на получение Resource Record типа AA\u003C\u002Ffont\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003E    return IP(dst=dns_server)\u002FUDP()\u002FDNS(rd=1, qd=DNSQR(qname=host_name))\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Ch3\u003E\u003Cfont color=\"#3AC1EF\"\u003E▍ Организация TCP соединения\u003C\u002Ffont\u003E\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003Edef create_tcp_syn(src, sport, dst, dport, seq):\n    return IP(src=src, dst=dst)\u002FTCP(seq=seq,sport=sport, dport=dport, flags=\"S\")\n\ndef create_tcp_ack(src, sport, dst, dport, ack, seq):\n    return IP(src=src, dst=dst)\u002FTCP(ack=ack, seq=seq, sport=sport, dport=dport, flags=\"A\")\n\n\ndef create_tcp_fin_ack(src, sport, dst, dport, ack, seq):\n    return IP(src=src, dst=dst)\u002FTCP(ack=ack, seq=seq, sport=sport, dport=dport, flags=\"F\")\n\ndef create_and_close_tcp_connection(host, dport):\n    dst = socket.gethostbyname(host)\n    src = get_default_interface_ip()\n    sport = 12360\n    seq = 1000\n    syn = packets.create_tcp_syn(src=src, sport=sport, dst=dst, dport=dport, seq=seq)\n    response = send_receive_l3(syn)\n    ack = packets.create_tcp_ack(src=src, sport=sport, dst=dst, dport=dport, seq=response[TCP].ack, ack=response[TCP].seq+1)\n    send_l3(ack)\n\n    fin_ack = packets.create_tcp_fin_ack(src=src, sport=sport, dst=dst, dport=dport, seq=response[TCP].ack, ack=response[TCP].seq+1)\n    response = send_receive_l3(fin_ack)\n    ack = packets.create_tcp_ack(src=src, sport=sport, dst=dst, dport=dport, seq=response[TCP].ack, ack=response[TCP].seq+1)\n    send_l3(ack)\n\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nТак как мы вмешиваемся в стандартную работу стека протоколов TCP\u002FIP, и стек не догадывается о нашем вмешательстве, то он может отсылать RST-сегменты на сегменты, которые он не ожидает. Чтобы такого не было, нам придётся временно запретить отсылку RST-сегментов. В MacOS это выполняется при помощи команды pfctl. В Linux можно использовать iptables.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ccode\u003Eecho \"block drop out proto tcp from any to any flags R\u002FR\" | cat \u002Fetc\u002Fpf.conf - | sudo \u002Fsbin\u002Fpfctl -Ef -\u003C\u002Fcode\u003E\u003Ca name=\"6\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch2\u003E\u003Cfont color=\"#3AC1EF\"\u003EЗаключение\u003C\u002Ffont\u003E\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\nИзначально я хотел осветить вопросы перехвата трафика в компьютерных сетях для начинающих, но потом подумал, что было бы хорошо осветить основы компьютерных сетей с точки зрения программиста, чтобы дать начальные знания. Тема оказалась очень обширная, и, к сожалению, размер статьи не позволил включить всё. Но для понимания основ и примеров я привёл достаточно материала. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИспользование Scapy позволяет экспериментировать с отсылкой кастомных пакетов из пространства пользователя, написав минимальное количество кода, не погружаясь в дебри программирования драйверов. А Wireshark удобен для анализа пакетов, передаваемых по сети и изучения их структуры.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЯ написал статью о том, чего мне не хватало, когда я сам начинал изучать сетевое программирование.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПримеры, приведённые в статье, не годятся для использования в реальных приложениях, они всего лишь позволяют разобраться в основах сетевых протоколов. C большой долей вероятности, вам не понадобится собственная реализация ARP-протокола, написание DHCP-клиента, DNS-клиента или реализация команды ping. Но экспериментируя с ними можно улучшить своё понимание сетевых протоколов, а ещё, увидеть как ведут себя реализации сетевых протоколов в различных непредвиденных ситуациях.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Cb\u003E\u003Cfont color=\"#3AC1EF\"\u003E\u003Ca href=\"https:\u002F\u002Ft.me\u002Fruvds_community\"\u003ETelegram-канал с розыгрышами призов, новостями IT и постами о ретроиграх 🕹️\u003C\u002Fa\u003E\u003C\u002Ffont\u003E\u003C\u002Fb\u003E\u003C\u002Fblockquote\u003E\u003Ca href=\"http:\u002F\u002Fruvds.com\u002Fru-rub?utm_source=habr&amp;utm_medium=article&amp;utm_campaign=artyomsoft&amp;utm_content=protokoly_semejstva_tcpip_teoriya_i_praktika\"\u003E\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw1560\u002Fwebt\u002Ftp\u002Fsk\u002Fz-\u002Ftpskz-7w7a8e74isoowuep40xeg.png\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Ftp\u002Fsk\u002Fz-\u002Ftpskz-7w7a8e74isoowuep40xeg.png\"\u002F\u003E\u003C\u002Fa\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"ruvds_статьи"},{"titleHtml":"tcp\u002Fip"},{"titleHtml":"tcp"},{"titleHtml":"udp"},{"titleHtml":"icmp"},{"titleHtml":"dns"},{"titleHtml":"arp"},{"titleHtml":"ip"},{"titleHtml":"scapy"},{"titleHtml":"wireshark"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fgl\u002Ffy\u002Fym\u002Fglfyymidrcebbagd9c3p6oz3k7u.png","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fgl\u002Ffy\u002Fym\u002Fglfyymidrcebbagd9c3p6oz3k7u.png","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompanies\\\u002Fruvds\\\u002Farticles\\\u002F759988\\\u002F\"},\"headline\":\"Протоколы семейства TCP\\\u002FIP. Теория и практика\",\"datePublished\":\"2023-10-03T12:00:02+03:00\",\"dateModified\":\"2023-10-03T13:33:23+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"artyomsoft\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"В сети можно найти огромное количество материала о том, как функционируют сети на базе стека протоколов TCP\\\u002FIP, а также как писать компьютерные программы с сет...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompanies\\\u002Fruvds\\\u002Farticles\\\u002F759988\\\u002F#post-content-body\",\"about\":[\"c_ruvds\",\"h_python\",\"h_system_programming\",\"h_network_technologies\",\"f_develop\",\"f_admin\"],\"image\":[\"https:\\\u002F\\\u002Fhabr.com\\\u002Fshare\\\u002Fpublication\\\u002F759988\\\u002F793e00b92b7ff229c37857cbe6dc98b1\\\u002F\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fgl\\\u002Ffy\\\u002Fym\\\u002Fglfyymidrcebbagd9c3p6oz3k7u.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fxl\\\u002Fev\\\u002F8z\\\u002Fxlev8zvnvvhjcp4tzh7lkcwuwrq.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Frm\\\u002Fe_\\\u002Fcd\\\u002Frme_cdwpuntkx3t0pcozi9baiuo.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Frt\\\u002Fa6\\\u002Fot\\\u002Frta6otjht2jdenxbw9hamkt7g_c.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fee\\\u002Ffe\\\u002Fwm\\\u002Feefewm76b5f2atszq3aibtjp14w.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002F-r\\\u002Fyb\\\u002Fud\\\u002F-rybudbfve7pvuwx7o3-acvivqo.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fdx\\\u002F21\\\u002Fxj\\\u002Fdx21xj1srh19tbds3hdbepy-zjk.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fg5\\\u002F06\\\u002Fdb\\\u002Fg506db_3gsblkr6bctrpk6tzl_0.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fah\\\u002Fmx\\\u002Fes\\\u002Fahmxes9jgl-re2ulncqr1xvua3q.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002F47\\\u002Few\\\u002F2a\\\u002F47ew2a1okiz40lti8bvyfjmjr30.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fv7\\\u002Fno\\\u002Ffh\\\u002Fv7nofhxhmeu57t495bocjapppwa.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002F4x\\\u002Fva\\\u002Fvx\\\u002F4xvavx7hdhkpv5ee3lnnxdy_ivo.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fgk\\\u002Fnq\\\u002Fil\\\u002Fgknqilxkrhy67ubbd0civifrcus.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fjo\\\u002Fs_\\\u002Fss\\\u002Fjos_sslvm3c3-ggneokp4fyp-kw.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002F8s\\\u002F3l\\\u002Fg5\\\u002F8s3lg50dcuer7vd8cxqpxetxniq.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fqk\\\u002F0j\\\u002F3e\\\u002Fqk0j3e9olcwuz3queuuhc5w-_q4.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Ftp\\\u002Fsk\\\u002Fz-\\\u002Ftpskz-7w7a8e74isoowuep40xeg.png\"]}","metaDescription":"В сети можно найти огромное количество материала о том, как функционируют сети на базе стека протоколов TCP\u002FIP, а также как писать компьютерные программы с сетевыми возможностями. При рассмотрении...","mainImageUrl":null,"amp":false,"customTrackerLinks":[]},"polls":[],"commentsEnabled":{"status":true,"reason":null},"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"hasPinnedComments":false,"format":"tutorial","banner":null,"multiwidget":null,"readingTime":23,"complexity":"medium","isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"postReasonsList":null,"view":"list","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"viewedPosts":[],"karma":{"userReasonsList":null}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":""},"comments":{"articleComments":{},"articlePinnedComments":{},"searchCommentsResults":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{"ruvds":{"alias":"ruvds","imageUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fcompany\u002F027\u002Fb19\u002Fcea\u002F027b19cea984722a8d806edcc56c2c00.png","titleHtml":"RUVDS.com","descriptionHtml":"VDS\u002FVPS-хостинг. Скидка 15% по коду \u003Cb\u003EHABR15\u003C\u002Fb\u003E","relatedData":null,"statistics":{"subscribersCount":84410,"rating":1905.55,"invest":null,"postsCount":3141,"threadsCount":0,"newsCount":148,"vacanciesCount":0,"employeesCount":68,"careerRating":null},"foundationDate":{"year":"2015","month":"07","day":"27"},"location":{"city":{"id":"447159","title":"Москва"},"region":{"id":"1885","title":"Москва и Московская обл."},"country":{"id":"168","title":"Россия"}},"siteUrl":"https:\u002F\u002Fruvds.com","staffNumber":"11–30 человек","registrationDate":"2016-03-18T05:43:01+00:00","representativeUser":{"alias":"ruvds","fullname":null},"contacts":[{"title":"Telegram","url":"https:\u002F\u002Ftelegram.me\u002Fruvds_community","siteTitle":"Telegram: Contact @ruvds_community","favicon":"https:\u002F\u002Ftelegram.org\u002Fimg\u002Fwebsite_icon.svg?4"},{"title":"ВКонтакте","url":"https:\u002F\u002Fvk.com\u002Fru_vds","siteTitle":"VK | VK","favicon":"https:\u002F\u002Fm.vk.com\u002Fimages\u002Ficons\u002Ffavicons\u002Ffav_logo.ico?8"},{"title":"Twitter","url":"https:\u002F\u002Ftwitter.com\u002Fru_vds","siteTitle":null,"favicon":null}],"settings":{"analyticsSettings":[{"type":"ym","trackingId":"33905479"}],"branding":{"imageUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fbranding\u002F0fd\u002F0cd\u002F3f6\u002F0fd0cd3f63dac0cb6ac8359cac986779.jpg","linkUrl":"https:\u002F\u002Fruvds.com\u002Fru\u002Fwindows\u002F?utm_source=habr&utm_medium=banner&utm_campaign=promo&utm_content=link&?erid=LjN8KAR3S","pixelUrl":"https:\u002F\u002Fmc.yandex.ru\u002Fpixel\u002F6846806368140084213?rnd=%252525aw_random%252525"},"status":"active","isStartup":false,"hasActivePolls":false},"metadata":{"titleHtml":"RUVDS.com, Москва - VDS\u002FVPS-хостинг. Скидка 15% по коду \u003Cb\u003EHABR15\u003C\u002Fb\u003E с 27 июля 2015 г.","title":"RUVDS.com, Москва - VDS\u002FVPS-хостинг. Скидка 15% по коду HABR15 с 27 июля 2015 г.","keywords":["Читальный зал","Научно-популярное","DIY или Сделай сам","Программирование","Электроника для начинающих","ruvds_статьи","ruvds_перевод","разработка","ruvds_статьи_выходного_дня","ruvds_новости","linux","игры","diy","ruvds","системное администрирование","программирование","arduino","javascript","ruvds_переводы","хабрахабр","python","unix","raspberry pi","информационная безопасность","css"],"descriptionHtml":"3 141 статья от авторов компании RUVDS.com","description":"3 141 статья от авторов компании RUVDS.com"},"aDeskSettings":null,"careerAlias":"ruvds","schoolAlias":null}},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"multiwidgets":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"multiwidgetLoading":false,"vacancies":{},"companiesGalleries":{},"companiesBanners":{},"companiesLandingVacancies":{},"companiesTechnologies":{},"workplaceInfo":null},"companyAdmin":{"companyInfo":null,"companyInfoLoading":false,"faqArticles":null,"brandingPreviewImageUrl":null,"jivoStatus":0,"adminNotifications":null},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":true},"flows":{"updates":{"countNewPostsBySubscription":null,"countNewThreadsBySubscription":null,"countNewNewsBySubscription":null,"countNewPostsAll":30,"countNewNewsAll":9,"countNewThreadsAll":8},"flows":[{"alias":"develop","id":"1","route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":"6","route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":"2","route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":"3","route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":"4","route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":"7","route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"mobile","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"welcomePage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""}},"me":{"user":null,"uuid":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"modal":{"modals":[]},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"promoData":{"isLoading":false,"hasLoaded":false,"featurer":null,"megaposts":null,"promoLinks":null,"promoPosts":null},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"search":{"searchQueryError":null},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"stories":{"stories":[{"id":"story-590","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F45b\u002F799\u002F86e\u002F45b79986ec96f34a155b11bba319ed84.png","title":"Хабр Карьера","link":"https:\u002F\u002Fu.habr.com\u002FprmWX"},"title":"Менторство в IT","lang":"ru","startTime":"2023-10-06T17:24:00+03:00","finishTime":"2023-10-22T17:24:00+03:00","slides":[{"id":"story-590_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F1ef\u002F0aa\u002F928\u002F1ef0aa9286c8638b203681aa110799f5.png","button":null},{"id":"story-590_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa1a\u002F9c4\u002F3c7\u002Fa1a9c43c7da0e2d76855970e15be5e73.png","button":null},{"id":"story-590_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fdc5\u002Fc06\u002F3ca\u002Fdc5c063ca2973e961474f6b765110c98.png","button":null},{"id":"story-590_4","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F4a1\u002Fc7b\u002Fad8\u002F4a1c7bad8af84a38abfa09416eeb5a5c.png","button":{"title":"Узнать больше","link":"https:\u002F\u002Fu.habr.com\u002FprmWX","colorType":"light"}}]},{"id":"story-588","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F41a\u002Fc52\u002F5a8\u002F41ac525a8029b479529b8503d76d9047.png","title":"Хабр","link":null},"title":"Каким был Хабр в сентябре","lang":"ru","startTime":"2023-10-05T10:30:32+03:00","finishTime":"2023-10-11T15:50:32+03:00","slides":[{"id":"story-588_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9fe\u002F263\u002F650\u002F9fe263650210435186a27468e839d5b7.jpg","button":null},{"id":"story-588_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F959\u002F7fd\u002F520\u002F9597fd520792a128d3f0a5f8399aaab3.jpg","button":{"title":"Читать длинный текст","link":"https:\u002F\u002Fu.habr.com\u002Fsept_01","colorType":"light"}},{"id":"story-588_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F196\u002F6ed\u002F16d\u002F1966ed16db086c4deac770f546aeb3f2.jpg","button":{"title":"К статье","link":"https:\u002F\u002Fu.habr.com\u002Fsept_02","colorType":"light"}},{"id":"story-588_4","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fc82\u002Fa27\u002F574\u002Fc82a27574b20c501cbb7fd9a224fac49.jpg","button":{"title":"Заглянуть в комменты","link":"https:\u002F\u002Fu.habr.com\u002Fsept_03","colorType":"light"}},{"id":"story-588_5","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F1d1\u002F0b9\u002Fc31\u002F1d10b9c31d1dfe7e85fcdeee20a223cb.jpg","button":{"title":"Приобщиться","link":"https:\u002F\u002Fu.habr.com\u002Fsept_04","colorType":"light"}},{"id":"story-588_6","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F2a4\u002F34e\u002F059\u002F2a434e059e65c60e662b76cd893eb63c.jpg","button":{"title":"Тоже посмотреть","link":"https:\u002F\u002Fu.habr.com\u002Fsept_05","colorType":"light"}},{"id":"story-588_7","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe03\u002F90b\u002F133\u002Fe0390b133eb647be045c3642f460e925.jpg","button":null}]},{"id":"story-586","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F8b0\u002F35e\u002Fe84\u002F8b035ee84c821bb85556a8b89ba9f672.png","title":"Хабр","link":null},"title":"По ту сторону собеседований","lang":"ru","startTime":"2023-10-04T14:10:00+03:00","finishTime":"2023-10-11T14:10:39+03:00","slides":[{"id":"story-586_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F350\u002F1f7\u002Fab0\u002F3501f7ab0f70539f72ad397ea8122ef0.jpg","button":null},{"id":"story-586_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe23\u002F8a8\u002F6f3\u002Fe238a86f32a15604c570ca284ad26e3e.jpg","button":{"title":"Графики и списки","link":"https:\u002F\u002Fu.habr.com\u002Fsbs_01","colorType":"light"}},{"id":"story-586_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F80b\u002Fb54\u002F353\u002F80bb54353c634c1c8d768f6af0d104ca.jpg","button":{"title":"Всего понемногу","link":"https:\u002F\u002Fu.habr.com\u002Fsbs_02","colorType":"light"}},{"id":"story-586_4","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fc14\u002F77e\u002F168\u002Fc1477e1680b319a46d2395a84ef6d1f2.jpg","button":{"title":"Итоги расследования","link":"https:\u002F\u002Fu.habr.com\u002Fsbs_03","colorType":"light"}},{"id":"story-586_5","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9d7\u002F688\u002Febb\u002F9d7688ebb2263441d0ccd2fc127dc613.jpg","button":{"title":"Взгляд наоборот","link":"https:\u002F\u002Fu.habr.com\u002Fsbs_04","colorType":"dark"}},{"id":"story-586_6","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F63f\u002F365\u002F9da\u002F63f3659da279130b2b8fe34f2cf36de2.jpg","button":{"title":"Ускориться","link":"https:\u002F\u002Fu.habr.com\u002Fsbs_05","colorType":"light"}},{"id":"story-586_7","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fc24\u002F06e\u002F414\u002Fc2406e4146c063fd59f1ea1be5e0a857.jpg","button":{"title":"История жизни","link":"https:\u002F\u002Fu.habr.com\u002Fsbs_06","colorType":"light"}},{"id":"story-586_8","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fcc7\u002F940\u002F74f\u002Fcc794074f387758a0e93249178bf5c2b.jpg","button":{"title":"Анти-топ","link":"https:\u002F\u002Fu.habr.com\u002Fsbs_07","colorType":"light"}}]},{"id":"story-582","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe3c\u002F24c\u002F3d0\u002Fe3c24c3d0b5dac995250df3f74978d73.png","title":"Хабр Карьера","link":"https:\u002F\u002Fu.habr.com\u002F64zR3"},"title":"Битва пет-проектов","lang":"ru","startTime":"2023-10-02T10:12:00+03:00","finishTime":"2023-10-29T10:12:00+03:00","slides":[{"id":"story-582_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F4a6\u002Fe99\u002F23e\u002F4a6e9923e404eef0499c779430af3d18.png","button":{"title":"Подробнее","link":"https:\u002F\u002Fu.habr.com\u002F64zR3","colorType":"light"}},{"id":"story-582_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Ff74\u002F2ca\u002F5a8\u002Ff742ca5a85f2e6c068e19de292221317.png","button":null},{"id":"story-582_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Ff95\u002F019\u002F16b\u002Ff9501916bf81d95b1f699e48c9e7f562.png","button":null},{"id":"story-582_4","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F966\u002Fbdd\u002F415\u002F966bdd4151319973765f9c86577e0456.png","button":{"title":"Следить за битвой","link":"https:\u002F\u002Fu.habr.com\u002F64zR3","colorType":"light"}}]},{"id":"story-580","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa55\u002Faae\u002F1b5\u002Fa55aae1b596e0c38f0764914d2148a41.png","title":"Хабр","link":null},"title":"Лица SmartDev 2023","lang":"ru","startTime":"2023-09-28T08:01:00+03:00","finishTime":"2023-10-08T23:59:00+03:00","slides":[{"id":"story-580_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fbf1\u002Fd90\u002F57b\u002Fbf1d9057b296d0f3e2d00160c0998ac7.jpg","button":null},{"id":"story-580_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F363\u002F4f1\u002Ff13\u002F3634f1f13ab20010261c0e78ad41602d.png","button":{"title":"Развитие DevOps","link":"https:\u002F\u002Fu.habr.com\u002Fsmdv_01","colorType":"dark"}},{"id":"story-580_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F928\u002F71d\u002Fa63\u002F92871da63ccebb2d53e6fbb732ab7910.png","button":{"title":"Грани LLM","link":"https:\u002F\u002Fu.habr.com\u002Fsmdv_02","colorType":"dark"}},{"id":"story-580_4","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F3a6\u002F823\u002F61c\u002F3a682361c28562a924d4678b6b90a4eb.png","button":{"title":"Мультимодальные ИИ","link":"https:\u002F\u002Fu.habr.com\u002Fsmdv_03","colorType":"dark"}},{"id":"story-580_5","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F75d\u002Faba\u002F926\u002F75daba92654ba4f698629eb4e4216d71.png","button":{"title":"Смотреть интервью","link":"https:\u002F\u002Fu.habr.com\u002Fsmdv_04","colorType":"dark"}},{"id":"story-580_6","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Ff57\u002Fd81\u002F1a7\u002Ff57d811a7df706c40cd5ce19cc804c83.png","button":{"title":"На новый рынок","link":"https:\u002F\u002Fu.habr.com\u002Fsmdv_05","colorType":"dark"}},{"id":"story-580_7","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Faec\u002Fbb7\u002Ff73\u002Faecbb7f73f1a75983c4df5c8d1ef4b26.png","button":{"title":"Антихрупкость","link":"https:\u002F\u002Fu.habr.com\u002Fsmdv_06","colorType":"dark"}},{"id":"story-580_8","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F9b2\u002F816\u002Feb8\u002F9b2816eb849d048ef5e91aaee7d90759.png","button":{"title":"Внедрение AppSec","link":"https:\u002F\u002Fu.habr.com\u002Fsmdv_07","colorType":"dark"}},{"id":"story-580_9","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F784\u002F602\u002Ffe7\u002F784602fe7cc437c0a794b6a8dec8b08d.png","button":{"title":"Синтетические данные","link":"https:\u002F\u002Fu.habr.com\u002Fsmdv_08","colorType":"dark"}}]},{"id":"story-036","author":{"logo":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fa0c\u002F355\u002F563\u002Fa0c355563809fa85dbc88c1792e60682.png","title":"Хабр","link":"https:\u002F\u002Fu.habr.com\u002FywfBl"},"title":"Почему программисты пишут?","lang":"ru","startTime":"2023-09-25T11:00:00+03:00","finishTime":"2023-10-08T23:59:00+03:00","slides":[{"id":"story-036_1","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F780\u002Fb8c\u002F5cb\u002F780b8c5cb305a046ba9aae5c16eea6aa.jpg","button":null},{"id":"story-036_2","image":"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fif\u002Fqz\u002Fc6\u002Fifqzc6m-9o6x0iqo6miwf4oug3m.jpeg","button":null},{"id":"story-036_3","image":"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fqc\u002Fog\u002Fva\u002Fqcogvahks1_jii9r3xtkpgin4sq.jpeg","button":null},{"id":"story-036_4","image":"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fcd\u002Fcy\u002Fnb\u002Fcdcynb5jekmbcm60qmarzydroli.jpeg","button":null},{"id":"story-036_5","image":"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fli\u002F7a\u002Fne\u002Fli7anevj8eheziz7bpglee4gyjy.jpeg","button":null},{"id":"story-036_6","image":"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F8a\u002Fib\u002Fjh\u002F8aibjh3bsnjoc67lt-vm8eadhus.jpeg","button":null},{"id":"story-036_7","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fddf\u002F87f\u002Faa2\u002Fddf87faa2d7006cd8ebad14cf9ca625c.jpg","button":null},{"id":"story-036_8","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F1cc\u002Fb99\u002F7e3\u002F1ccb997e34a625188e24c87d0a39c7f2.jpg","button":null},{"id":"story-036_9","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002Fe4e\u002Ff1b\u002F86a\u002Fe4ef1b86aa9e1e78a4a84c8b7cf9267b.jpg","button":null},{"id":"story-036_10","image":"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fupload_files\u002F1b9\u002Fbd7\u002Fdeb\u002F1b9bd7debdd0b09ab08783502de1a746.jpg","button":{"title":"Узнать все мотивы","link":"https:\u002F\u002Fu.habr.com\u002FywfBl","colorType":"light"}}]}]},"technotext":{"years":[],"technotextDocForNominees":null,"technotextDocForWinners":null,"technotextInfo":{},"technotextInfoLoading":false,"technotextWinners":{},"technotextWinnersLoading":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"userVotes":{"karmaVotesList":[],"karmaVotesPagesCount":null,"karmaVotesListLoading":false,"commentsVotesList":[],"commentsVotesPagesCount":null,"commentsVotesListLoading":false,"postsVotesList":[],"postsVotesPagesCount":null,"postsVotesListLoading":false,"userVotesList":[],"userVotesPagesCount":null,"userVotesListLoading":false},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"userSpecialization":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"notificationsLoading":false,"notificationsList":[],"notificationsPageCount":0,"pendingMarkNotificationsRead":[],"publicationsLoading":true,"publicationsList":[],"publicationsPageCount":0,"pendingDeletePublications":false,"pendingMarkPublicationsRead":false},"events":{"events":[{"id":"events_46","titleHtml":"Битва пет-проектов","startDay":"2023-09-25","finishDay":"2023-11-30","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fq4\u002Fbl\u002Ftl\u002Fq4bltl5nykwetj_aaaauhdaow6u.png","eventUrl":"https:\u002F\u002Fpet-project.habr.com\u002F?utm_source=special&utm_medium=calendar&utm_campaign=pet_project","geo":[],"isOnline":true,"descriptionHtml":"\u003Cp\u003EСобрали две команды стажеров и&#160;джунов, которые будут работать над пет-проектами под кураторством опытных менторов. А&#160;определять победителей, которые получат стажировку в&#160;компании, будете&#160;вы.\u003C\u002Fp\u003E\u003Cp\u003EВнутри много движухи для зрителей: воркшопы по&#160;разработке, разборы резюме, публичные собеседования, Q&#38;A-сессии и&#160;даже чат, где можно найти себе команду и&#160;запилить какой-нибудь крутой пет-проект. \u003C\u002Fp\u003E\u003Cp xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003EЕсть отличный бонус для начинающих: будем собирать стажировки и&#160;джуновские вакансии с&#160;рынка для еженедельной рассылки в&#160;рамках битвы. \u003C\u002Fp\u003E\u003Cp xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003EРегистрируйтесь, чтобы ничего не&#160;пропустить!\u003C\u002Fp\u003E\u003Cbr \u002F\u003E"},{"id":"events_45","titleHtml":"Joker","startDay":"2023-10-09","finishDay":"2023-10-14","startTime":"16:00","finishTime":"19:30","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fxo\u002Fvw\u002Fd6\u002Fxovwd6picvqcupuizlayrlxiqcq.jpeg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_jkr","geo":["Санкт-Петербург"],"isOnline":true,"descriptionHtml":"\u003Cp\u003EБольшая Java-конференция. 9&#8211;10 октября&#160;&#8212; онлайн часть, 13&#8211;14 октября&#160;&#8212; часть в&#160;Санкт-Петербурге с&#160;возможностью удалённого подключения.\u003C\u002Fp\u003E\u003Cp\u003EВ&#160;программе, как обычно, полезная Java-разработчикам техническая конкретика: инструменты, фреймворки, JVM, языковые нововведения и&#160;не&#160;только.\u003C\u002Fp\u003E\u003Cbr \u002F\u003E"},{"id":"events_55","titleHtml":"Открытый урок «Адаптивная верстка сложных интерфейсов»","startDay":"2023-10-10","finishDay":"2023-10-10","startTime":"20:00","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002F90\u002Fgm\u002Fmn\u002F90gmmni0i-cteiqeexjhahz7ifo.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_otsflt","geo":[],"isOnline":true,"descriptionHtml":"\u003Cp\u003EНаучитесь создавать адаптивные пользовательские интерфейсы за&nbsp;пару часов.\u003C\u002Fp\u003E\u003Cp\u003EЗанятие пройдёт 10&nbsp;октября в&nbsp;20:00 мск в&nbsp;рамках курса &laquo;Flutter Mobile Developer&raquo; на&nbsp;бесплатном открытом уроке &laquo;Адаптивная верстка сложных интерфейсов&raquo; от&nbsp;OTUS.\u003C\u002Fp\u003E\u003Cp\u003EПеред вами откроются новые профессиональные возможности:\u003C\u002Fp\u003E \u003Cul\u003E\u003Cli\u003EРазберёмся, как создавать адаптивные пользовательские интерфейсы, которые могут эффективно масштабироваться и&nbsp;отображаться на&nbsp;разных устройствах.\u003C\u002Fli\u003E \u003Cli\u003EРассмотрим виджеты CustomMultiChildLayout, CustomSingleChildLayout и&nbsp;FlowDelegate, которые позволяют более гибко управлять размещением и&nbsp;позиционированием дочерних виджетов в&nbsp;основном виджете.\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EПреподаватель: Дмитрий Золотов&nbsp;&mdash; Flutter+Kotlin Developer в&nbsp;Yandex.\u003C\u002Fp\u003E\u003Cp\u003EЭто отличная возможность совершенно бесплатно протестировать формат обучения и&nbsp;задать преподавателю любые вопросы в&nbsp;режиме реального времени. Пройдите бесплатное вступительное тестирование прямо сейчас и&nbsp;зарегистрируйтесь на&nbsp;событие.\u003C\u002Fp\u003E"},{"id":"events_61","titleHtml":"Вебинар «Запускаем сайт на Linux Ubuntu 22.04»","startDay":"2023-10-10","finishDay":"2023-10-10","startTime":"19:00","finishTime":"20:30","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002F_6\u002Fei\u002Ftl\u002F_6eitlnsnpntc7xka1flj0-5gko.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_otuslnx","geo":[],"isOnline":true,"descriptionHtml":"\u003Cp\u003EНа&#160;занятии разберём полный процесс запуска популярной CMS Wordpress на&#160;чистой системе с&#160;Ubuntu&#160;22.04. Установим и&#160;настроим все необходимые компоненты. В&#160;результате получим полнофункциональный сайт\u003C\u002Fp\u003E\u003Cbr \u002F\u003E"},{"id":"events_63","titleHtml":"Вебинар «Обзор основных парадигм программирования и их использование в С#»","startDay":"2023-10-11","finishDay":"2023-10-11","startTime":"20:00","finishTime":"21:30","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fi2\u002Fgy\u002F14\u002Fi2gy14re31zlhk46iu3mysjbvno.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_otuscsh","geo":[],"isOnline":true,"descriptionHtml":"\u003Cp\u003EНа&#160;занятии рассмотрим 5&#160;ключевых программных парадигм в&#160;C#: процедурное, объектно-ориентированное, функциональное, событийное и&#160;компонентно-ориентированное программирование. Мы&#160;рассмотрим основные характеристики каждого подхода, их&#160;преимущества и&#160;недостатки, а&#160;также примеры их&#160;применения на&#160;практике.\u003C\u002Fp\u003E\u003Cp\u003EВ&#160;результате вы&#160;сможете:\u003C\u002Fp\u003E\u003Cul xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cli\u003Eразличать и&#160;понимать ключевые концепции каждой парадигмы;\u003C\u002Fli\u003E\u003Cli\u003Eопределить, какая парадигма лучше всего подходит для решения конкретной задачи;\u003C\u002Fli\u003E\u003Cli\u003Eприменять знания на&#160;практике, выбирая правильный подход при разработке программ на&#160;C#;\u003C\u002Fli\u003E\u003Cli\u003Eоценить преимущества и&#160;недостатки каждого подхода в&#160;различных контекстах разработки.\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cbr \u002F\u003E"},{"id":"events_41","titleHtml":"Deep cloud dive. Первая дискуссионная конференция beeline cloud","startDay":"2023-10-12","finishDay":"2023-10-12","startTime":"11:00","finishTime":"14:10","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fsk\u002Fem\u002Fiu\u002Fskemiuqjpev6azkn-imzs2lxasi.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_blndcd","geo":[],"isOnline":true,"descriptionHtml":"\u003Cp\u003EНа&nbsp;одной площадке встретятся эксперты ведущих компаний рынка, чтобы обсудить тренды, затронуть наболевшие проблемы и&nbsp;наметить пути их&nbsp;решения.\u003C\u002Fp\u003E\u003Cp\u003EТри дискуссионных блока:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003ECloud. Локализация рынка облаков, проблематика отечественных продуктов&nbsp;&mdash; что нас ждет дальше?\u003C\u002Fli\u003E\u003Cli\u003EData. Демократизация ИИ&nbsp;и&nbsp;больших данных: примеры внедрений, перспективы развития\u003C\u002Fli\u003E\u003Cli\u003ESecurity. Кибербезопасность: актуальные угрозы, прогнозы и&nbsp;ожидания на&nbsp;2024 год\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EПрограмма мероприятия:\u003Cbr\u003E11:00&nbsp;&mdash; 11:10 Открытие конференции\u003Cbr\u003E11:10&nbsp;&mdash; 12:00 Локализация в&nbsp;сфере Cloud: миграция в&nbsp;российское облако\u003Cbr\u003E12:50&nbsp;&mdash; 13:20 Большие данные и&nbsp;искусственный интеллект: перспективы развития\u003Cbr\u003E13:20&nbsp;&mdash; 14:10&nbsp;Кибербезопасность, ИТ-аутсорсинг: что нас ждет в&nbsp;2024 году\u003C\u002Fp\u003E\u003Cp\u003EДля кого:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003ECTO и&nbsp;руководители бизнеса\u003C\u002Fli\u003E\u003Cli\u003EИТ- и&nbsp;ИБ-директора, топ-менеджеры\u003C\u002Fli\u003E\u003Cli\u003EАрхитекторы, профильные ИТ-специалисты\u003C\u002Fli\u003E\u003Cli\u003EАналитики данных, дата-инженеры\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EНе&nbsp;пропустите интерактивный диалог о&nbsp;рынке ИТ. Мероприятие бесплатное.\u003C\u002Fp\u003E\u003Cp\u003EРегистрируйтесь и&nbsp;мы&nbsp;пришлем вам ссылку на&nbsp;онлайн-трансляцию.\u003C\u002Fp\u003E"},{"id":"event_34","titleHtml":"Курс «Архитектура программного обеспечения» от Яндекс Практикума","startDay":"2023-10-16","finishDay":"2023-10-16","startTime":"09:00","finishTime":"23:00","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fjw\u002Fiy\u002Fj2\u002Fjwiyj2kplvp4rn8uiog74md1xes.jpeg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_yprarch","geo":[],"isOnline":true,"descriptionHtml":"\u003Cp\u003EКурс для опытных разработчиков уровня Middle и&nbsp;Senior, которые хотят научиться создавать с&nbsp;нуля архитектуру сервисов и&nbsp;приложений. Вас ждет много практических заданий, прокачка насмотренности в&nbsp;области архитектуры&nbsp;ПО и&nbsp;экспертиза от&nbsp;техлидов Яндекса и&nbsp;других технологических компаний.\u003C\u002Fp\u003E\u003Cp\u003EЧему вы научитесь:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003Eопределять, какую архитектуру приложения применять&nbsp;&mdash; монолитную или микросервисную;\u003C\u002Fli\u003E\u003Cli\u003Eвыбирать тип хранения данных, формат и&nbsp;протокол обмена данными&nbsp;&mdash; в&nbsp;зависимости от&nbsp;типа вашего приложения;\u003C\u002Fli\u003E\u003Cli\u003Eразбираться в&nbsp;вертикальном и&nbsp;горизонтальном масштабировании, балансировке нагрузки и&nbsp;стратегиях кеширования.\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EГлавное про курс:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003Eвозможность повысить свой грейд, а&nbsp;соответственно&nbsp;&mdash; ценность на&nbsp;рынке;\u003C\u002Fli\u003E\u003Cli\u003E+5&nbsp;новых архитектур в&nbsp;портфолио;\u003C\u002Fli\u003E\u003Cli\u003Eнаставничество и&nbsp;код-ревью от&nbsp;экспертов с&nbsp;большим опытом проектирования архитектуры;\u003C\u002Fli\u003E\u003Cli\u003Eпрограмма длительностью 6&nbsp;месяцев: учёбе нужно уделять от&nbsp;15&nbsp;часов в&nbsp;неделю;\u003C\u002Fli\u003E\u003Cli\u003Eподойдёт для разработчиков с&nbsp;опытом коммерческой бэкенд-разработки от&nbsp;2&nbsp;лет.\u003C\u002Fli\u003E\u003C\u002Ful\u003E"},{"id":"events_54","titleHtml":"Открытый урок «Kafka Streams»","startDay":"2023-10-16","finishDay":"2023-10-16","startTime":"10:00","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Ff0\u002Ffk\u002F7g\u002Ff0fk7gsmss4dhnx_v3mdios0o1a.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_otskfk","geo":[],"isOnline":true,"descriptionHtml":"\u003Cp\u003EДля чего используют Kafka Streams? Она позволяет быстро и&nbsp;просто писать код Java\u002FScala на&nbsp;стороне клиента, при этом разворачивать и&nbsp;использовать распределенное приложение на&nbsp;сервере Kafka в&nbsp;соответствии с&nbsp;DevOps-подходом.\u003C\u002Fp\u003E\u003Cp\u003EИзучите этот инструмент на&nbsp;бесплатном открытом уроке &laquo;Kafka Streams&raquo; от&nbsp;OTUS.\u003C\u002Fp\u003E\u003Cp\u003EВы&nbsp;узнаете: \u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003Eкак создать граф обработчиков с&nbsp;использованием DSL;\u003C\u002Fli\u003E \u003Cli\u003E как читать сообщения из&nbsp;топика;\u003C\u002Fli\u003E \u003Cli\u003E как фильтровать и&nbsp;преобразовывать сообщения;\u003C\u002Fli\u003E \u003Cli\u003E что происходит при изменении ключа;\u003C\u002Fli\u003E \u003Cli\u003E как организовать роутинг сообщений;\u003C\u002Fli\u003E \u003Cli\u003E как работать с&nbsp;состоянием, какие при этом возникают нюансы;\u003C\u002Fli\u003E \u003Cli\u003E как работает join потоков сообщений.\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EЗанятие пройдёт 16&nbsp;октября в&nbsp;20:00 мск в&nbsp;рамках курса &laquo;Apache Kafka&raquo;. Это отличная возможность совершенно бесплатно протестировать формат обучения и&nbsp;задать преподавателю любые вопросы в&nbsp;режиме реального времени.\u003C\u002Fp\u003E\u003Cp\u003EПройдите бесплатное вступительное тестирование прямо сейчас и&nbsp;зарегистрируйтесь на&nbsp;событие.\u003C\u002Fp\u003E"},{"id":"events_60","titleHtml":"Вебинар онлайн-курса «DevOps 1C»","startDay":"2023-10-16","finishDay":"2023-10-16","startTime":"20:00","finishTime":"21:30","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002F-b\u002Fcm\u002F6t\u002F-bcm6tlbmwy1ux3chxa_w5p5sj4.jpeg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_otus1c","geo":[],"isOnline":true,"descriptionHtml":"\u003Cp\u003EНа&nbsp;бесплатном вебинаре &laquo;Переезжаем в&nbsp;EDT из&nbsp;Конфигуратора&raquo; мы&nbsp;обсудим:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003EПочему из&nbsp;Конфигуратора в&nbsp;EDT можно переходить уже сейчас.\u003C\u002Fli\u003E \u003Cli\u003EВозможности, которые в&nbsp;корне изменят ваш процесс разработки.\u003C\u002Fli\u003E \u003Cli\u003EПрактику работы в&nbsp;EDT в&nbsp;Git.\u003C\u002Fli\u003E \u003Cli\u003EУмение эффективно работать с&nbsp;ветками и&nbsp;лаконичное оформление истории своей работы в&nbsp;Git.\u003C\u002Fli\u003E\u003C\u002Ful\u003E \u003Cp\u003EПосле вебинара вы&nbsp;сможете продолжить обучение на&nbsp;курсе по&nbsp;спеццене, в&nbsp;том числе в&nbsp;рассрочку.\u003C\u002Fp\u003E"},{"id":"events_47","titleHtml":"Семинар «Engee – российская платформа для разработки сложных технических систем»","startDay":"2023-10-18","finishDay":"2023-10-18","startTime":"10:00","finishTime":"15:00","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fax\u002Fek\u002Fha\u002Faxekhakoitd28x3e-yf5xg96nlc.jpeg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_xpn","geo":["Москва"],"isOnline":false,"descriptionHtml":"\u003Cp\u003EEngee&#160;&#8212; самая новая платформа на&#160;российском рынке, предназначенная для разработки сложных технических систем. Она позволяет инженерам и&#160;конструкторам предприятий наукоемкой отрасли создавать качественные и&#160;эффективные продукты в&#160;высокотехнологичном программном окружении.\u003C\u002Fp\u003E\u003Cp\u003EНа&#160;семинаре технические специалисты ЦИТМ Экспонента проведут подробную демонстрацию возможностей нашей среды. Вы&#160;увидите актуальные промышленные возможности использования платформы, узнаете, как работать с&#160;интерактивными скриптами и&#160;с&#160;графическими инструментами для построения динамических моделей.\u003C\u002Fp\u003E\u003Cp xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003EНаш семинар будет полезен специалистам, решающим широкий спектр задач, затрагивающих в&#160;своей работе машинное обучение, оптимизацию и&#160;искусственный интеллект, ТАУ, цифровую обработку сигналов, радиосвязь и&#160;многое другое\u003C\u002Fp\u003E\u003Cbr \u002F\u003E"},{"id":"events_56","titleHtml":"Вебинар онлайн-курса «Team Lead разработки»","startDay":"2023-10-18","finishDay":"2023-10-18","startTime":"20:00","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fqk\u002Fdq\u002Few\u002Fqkdqewxgmbulrf5hbjxe2l-fp-m.jpeg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_otusvbtml","geo":[],"isOnline":true,"descriptionHtml":"\u003Cp\u003EОтпуск... Двухнедельный... Звучит как мечта для многих управленцев. Но&nbsp;почему она так недостижима? Что мешает тимлиду уйти в&nbsp;отпуск? Где внутренние причины, где внешние? Узнайте на&nbsp;бесплатном вебинаре онлайн-курса &laquo;Team Lead разработки&raquo; 18&nbsp;октября в&nbsp;20:00&nbsp;ч мск&nbsp;&mdash; &laquo;Готовь сани летом.. или Почему тимлиду нужно начинать готовить команду к&nbsp;своему отпуску еще с&nbsp;осени&raquo;.\u003C\u002Fp\u003E\u003Cp\u003EНа&nbsp;занятии обсудим:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003EКогда можно уйти в&nbsp;отпуск, а&nbsp;когда всё&nbsp;же не&nbsp;стоит?\u003C\u002Fli\u003E \u003Cli\u003EКак подготовить команду и&nbsp;заказчика к&nbsp;своему отпуску?\u003C\u002Fli\u003E \u003Cli\u003EПочему длительный отпуск важен для руководителя?\u003C\u002Fli\u003E \u003Cli\u003EКак переключаться в&nbsp;режим отдыха?\u003C\u002Fli\u003E \u003Cli\u003EКак включиться в&nbsp;работу после?\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EВебинар будет полезен:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003EНачинающим тимлидам и&nbsp;тем, кто близок к&nbsp;выгоранию.\u003C\u002Fli\u003E \u003Cli\u003EУставшим менеджерам, которых окружают безответственные работники.\u003C\u002Fli\u003E\u003C\u002Ful\u003E"},{"id":"events_51","titleHtml":"Питч-сессия pravo (tech) impulse","startDay":"2023-10-19","finishDay":"2023-10-19","startTime":"15:45","finishTime":"17:30","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002F9n\u002Fcx\u002F0q\u002F9ncx0qfe5ovxbbdywoet7scq5za.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_prt","geo":["Москва"],"isOnline":false,"descriptionHtml":"\u003Cp\u003EКомпания PravoTech — разработчик решений для автоматизации бизнес-процессов, пионер LegalTech в России — запускает конкурс IT-проектов pravo (tech) impulse в рамках форума pravo (tech) — крупнейшего делового события в Европе, посвященного LegalTech и цифровой трансформации юридической функции.\u003C\u002Fp\u003E\u003Cp\u003EУчастники, создающие решения в сферах LegalTech, FinTech (FPM), InsurTech, ITSM, ERP (CRM, HRM), CLM (контрактный менеджмент), могут подать заявки до 4 октября. Организаторы принимают проекты на любой стадии: от идеи с описанием технологии, принципов работы и экономического эффекта до готового продукта с выстроенными продажами.\u003C\u002Fp\u003E\u003Cp\u003EВыбор победителя будет происходить в два этапа: заочный отбор заявок и питч-сессия. Эксперты конкурса будут обращать внимание на новизну идеи, актуальность и перспективность применения технологии в своей сфере.\u003C\u002Fp\u003E\u003Cp\u003EВо время питч-сессии стартапы представят свои идеи и проекты жюри и участникам мероприятия, среди которых руководители юридических департаментов корпораций, директора по трансформации бизнеса и IT, консультанты и интеграторы, LegalOps-специалисты, практикующие юристы.\u003C\u002Fp\u003E\u003Cp\u003EАвторы лучшего проекта гарантированно получат денежный приз, а также — при условии взаимного интереса жюри и самого конкурсанта — возможность для дальнейшего коммерческого сотрудничества с PravoTech. Условия такого взаимодействия будут определены индивидуально.\u003C\u002Fp\u003E\u003Cp\u003EЖюри конкурса: \u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003EАлексей Пелевин, CEO и основатель PravoTech;  \u003C\u002Fli\u003E\u003Cli\u003EКирилл Фадеев, коммерческий директор PravoTech;  \u003C\u002Fli\u003E\u003Cli\u003EИлья Королев, партнер и управляющий портфелем ФРИИ, бизнес-ангел.\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EЗаявку можно подать до&nbsp;10&nbsp;октября в&nbsp;электронном виде на&nbsp;сайте конкурса.&nbsp;13&nbsp;октября организаторы объявят проекты-финалисты, которые представят свои идеи 19&nbsp;октября в&nbsp;рамках форума pravo (tech).\u003C\u002Fp\u003E"},{"id":"events_59","titleHtml":"Вебинар «Разработка бэкенда на Clojure»","startDay":"2023-10-24","finishDay":"2023-10-24","startTime":"20:00","finishTime":"21:30","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fa2\u002Fwg\u002F7a\u002Fa2wg7ai6rwmnjibfydenz0p8bbs.jpeg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_otusbcclj","geo":[],"isOnline":true,"descriptionHtml":"\u003Cp\u003EПринципы, на&nbsp;которых основана концепция чистой архитектуры, хорошо описаны и&nbsp;знакомы многим разработчикам. Уникальность этой концепции заключается в&nbsp;том, что её&nbsp;реализация не&nbsp;привязана к&nbsp;какому-либо языку программирования или набору инструментов в&nbsp;том или ином технологическом стеке.\u003C\u002Fp\u003E\u003Cp\u003E24&nbsp;октября в&nbsp;20:00 мск в&nbsp;течение бесплатного вебинара онлайн-курса &laquo;Clojure Developer&raquo;&nbsp;&mdash; &laquo;Duct и&nbsp;Clean Architecture в&nbsp;Clojure&raquo;&nbsp;&mdash; мы&nbsp;попрактикуемся применять эти принципы с&nbsp;использованием языка программирования Clojure и&nbsp;фреймворка Duct. Познакомимся с&nbsp;его модульной системой, реализуем DI-контейнер, подключим адаптеры во&nbsp;все порты и&nbsp;вообще сделаем все, как дедушка Боб нам завещал.\u003C\u002Fp\u003E\u003Cp\u003EЭкспертизой поделится руководитель программы и&nbsp;практик Сергей Ткаченко (Clojure Software developer&nbsp;\u002F Team Lead).\u003C\u002Fp\u003E"},{"id":"event_31","titleHtml":"Russia Risk Conference 2023 — 19-я конференция по риск-менеджменту","startDay":"2023-10-25","finishDay":"2023-10-26","startTime":"10:00","finishTime":"19:00","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fhz\u002Ftg\u002F9k\u002Fhztg9k1w_eanhcx-7f184wdouri.jpeg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_rskcnf","geo":["Москва"],"isOnline":true,"descriptionHtml":"\u003Cp\u003E25&ndash;26 октября состоится Russia Risk Conference 2023&nbsp;&mdash; ключевая конференция по&nbsp;управлению рисками в&nbsp;финансовой сфере.\u003C\u002Fp\u003E\u003Cp\u003EПрограмма конференции включает темы:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003EТехнологии искусственного интеллекта в&nbsp;управлении рисками: LLM, применение&nbsp;ML, управление модельным риском, Reject Inference, Muti-head graph attention-сети, Reinforcement Learning\u003C\u002Fli\u003E\u003Cli\u003EОбсуждение макроэкономических трендов, кредитно-денежной и&nbsp;регуляторной политики. Прогнозирование тенденций риска\u003C\u002Fli\u003E\u003Cli\u003EКредитные риски: тенденции в&nbsp;управлении кредитными рисками в&nbsp;новых условиях. Моделирование отклика клиента на&nbsp;действия кредитора. Оптимизация стратегий кредитования\u003C\u002Fli\u003E\u003Cli\u003EКомплексное управление рисками. Блиц-интервью с&nbsp;директорами по&nbsp;рискам страховых, лизинговых, микрофинансовых и&nbsp;других компаний&nbsp;&mdash; представителей финансового сектора\u003C\u002Fli\u003E\u003Cli\u003EОперационные риски и&nbsp;кибербезопасность\u003C\u002Fli\u003E\u003Cli\u003EЦифровые финансовые активы (ЦФА): риски и&nbsp;возможности цифрового рубля\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EДля кого: CRO, топ-менеджеров, курирующих управление рисками, специалистов по&nbsp;мониторингу и&nbsp;валидации рисков, риск-менеджеров и&nbsp;риск-аналитиков, data scientists, экспертов-практиков в&nbsp;области управления кредитными, рыночными и&nbsp;операционными рисками, специалистов управлений количественного анализа и&nbsp;моделирования рисков.\u003C\u002Fp\u003E"},{"id":"events_62","titleHtml":"«Спокойно, договоримся!» — тренинг по переговорам и отношениям с клиентами в B2B","startDay":"2023-11-03","finishDay":"2023-11-04","startTime":"10:00","finishTime":"18:00","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Ffb\u002F-d\u002F8o\u002Ffb-d8oidhievh0ye-lnmndawdaa.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_hfltr","geo":["Москва"],"isOnline":false,"descriptionHtml":"\u003Cp\u003EПрокачаем навыки переговорщика и&#160;научим, как пересобрать отношения с&#160;клиентами в&#160;B2B. Мы&#160;не&#160;коучи, а&#160;топ-менеджеры с&#160;реальным опытом в&#160;большом бизнесе. За&#160;10+&#160;лет работы мы&#160;научились дружить с&#160;клиентами не&#160;только на&#160;начальном этапе, но&#160;и&#160;развивать зрелые проекты. \u003C\u002Fp\u003E\u003Cp\u003EТренинг будет полезен вам, если:\u003Cem\u003E \u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cul xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cli\u003Eвы&#160;отвечаете за&#160;отношения с&#160;клиентами, ведение проектов и&#160;управление людьми;\u003C\u002Fli\u003E\u003Cli\u003Eвы&#160;много и&#160;тесно работаете с&#160;заказчиками&#160;&#8212; внешними и&#160;внутренними;\u003C\u002Fli\u003E\u003Cli\u003Eвы&#160;работаете в&#160;b2b-продажах в&#160;IT.\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003EКто проведет: \u003C\u002Fp\u003E\u003Cul xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cli\u003EКонстантин Степанов, исполнительный директор HFLabs. За&#160;три года привлек 14&#160;крупных клиентов.\u003C\u002Fli\u003E\u003Cli\u003EНикита Назаров, технический директор HFLabs. Умеет делать так, чтобы клиент становился постоянным клиентом.\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003EСтань участником закрытого клуба по&#160;переговорам с&#160;разбором личных кейсов и&#160;поддержкой экспертов.\u003C\u002Fp\u003E\u003Cbr \u002F\u003E"},{"id":"events_57","titleHtml":"IT Recruiting – HR Forum 2023","startDay":"2023-11-08","finishDay":"2023-11-10","startTime":"9:00","finishTime":"18:00","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fu-\u002Fc5\u002Fds\u002Fu-c5dsndgew3qdycfdjbzu7pn94.jpeg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_ithrfrm","geo":["Москва"],"isOnline":false,"descriptionHtml":"\u003Cp\u003EКак выглядит новый ландшафт рынка IT-кадров? Что сейчас в&nbsp;приоритете у&nbsp;востребованных специалистов? Как выстроить систему обучения внутри компании? Как выиграть конкуренцию за&nbsp;кадры у&nbsp;ведущих IT-компаний?\u003C\u002Fp\u003E \u003Cp\u003E8, 9, 10&nbsp;ноября на&nbsp;iT&nbsp;Recruiting Forum 2023 руководители сферы&nbsp;HR из&nbsp;компаний крупного и&nbsp;среднего бизнеса соберутся для обсуждения лучших практик привлечения, адаптации и&nbsp;развития IT-персонала. В&nbsp;течение трех дней эксперты поделятся реальными кейсами, проанализируют ошибки и&nbsp;трудности, возникшие при реализации новых практик, а&nbsp;также представят аудитории алгоритмы решения актуальных задач.\u003C\u002Fp\u003E \u003Cp\u003E8&nbsp;ноября в&nbsp;рамках форума пройдет день мастер-классов, где эксперты помогут на&nbsp;практике отработать ключевые навыки и&nbsp;зарядиться новыми идеями в&nbsp;рамках групповой работы с&nbsp;коллегами.\u003C\u002Fp\u003E"},{"id":"events_49","titleHtml":"Онлайн IT HR-конференция HR42","startDay":"2023-11-17","finishDay":"2023-11-18","startTime":"10:00","finishTime":"14:00","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fq1\u002Fts\u002Fcv\u002Fq1tscv1wzys8-zdrvnumhwz0ely.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_hr42","geo":[],"isOnline":true,"descriptionHtml":"\u003Cp\u003EHR42&nbsp;&mdash; онлайн-конференция про управление международными и&nbsp;распределенными командами в&nbsp;IT.\u003C\u002Fp\u003E"},{"id":"events_53","titleHtml":"HighLoad++ 2023","startDay":"2023-11-27","finishDay":"2023-11-28","startTime":"9:00","finishTime":"20:00","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fxo\u002F6u\u002Fw1\u002Fxo6uw1o3hf9y9tsxzq4pvya719y.jpeg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_hld","geo":["Москва"],"isOnline":true,"descriptionHtml":"\u003Cp\u003EHighLoad++ 2023&nbsp;&mdash; юбилейная, 20-я конференция HighLoad++. И&nbsp;это будет больше, чем конференция: 3000&nbsp;участников, 120+&nbsp;спикеров, 11&nbsp;залов, 5+&nbsp;мастер-классов.\u003C\u002Fp\u003E \u003Cp\u003EВ&nbsp;этом году в&nbsp;рамках HighLoad++ 2023 пройдет Golang Conf 2023&nbsp;&mdash; конференция для Go-разработчиков. Поговорим о&nbsp;лучших практиках, технологиях, архитектуре и&nbsp;фреймворках, добавим хардкора. И, конечно, 2&nbsp;дня живого общения с&nbsp;единомышленниками и&nbsp;коллегами, нетворкинг, интересные кейсы, последние новости индустрии и&nbsp;современные подходы в&nbsp;разработке высоконагруженных систем.\u003C\u002Fp\u003E \u003Cp\u003EЖдем вас 27&nbsp;и&nbsp;28&nbsp;ноября в&nbsp;Москве на&nbsp;HighLoad 2023&nbsp;&mdash; мероприятии с&nbsp;самой высокой концентрацией IT- профессионалов страны.\u003C\u002Fp\u003E"},{"id":"events_50","titleHtml":"Курс «Разработка высокоскоростных устройств и систем передачи данных»","startDay":"2023-12-09","finishDay":"2023-12-11","startTime":"10:00","finishTime":"17:00","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fsc\u002Fie\u002Ffp\u002Fsciefp-fox1b1kyqn9bwa5ll2um.png","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_nish","geo":["Москва"],"isOnline":false,"descriptionHtml":"\u003Cp\u003EНовая Инженерная Школа проводит курс повышения квалификации, рассчитанный на&nbsp;инженеров-схемотехников, а&nbsp;также системных инженеров, занимающихся разработкой высокоскоростных устройств.\u003C\u002Fp\u003E\u003Cp\u003EИзучение курса позволит слушателям осознанно подходить к&nbsp;разработке, используя определенный маршрут проектирования, в&nbsp;частности:\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003Eпонимать сущность высокоскоростных сигналов;\u003C\u002Fli\u003E\u003Cli\u003Eпонимать проблемы и&nbsp;риски, возникающие при разработке высокоскоростных устройств;\u003C\u002Fli\u003E\u003Cli\u003Eпрогнозировать и&nbsp;нивелировать проблемы на&nbsp;этапе эскизной разработки;\u003C\u002Fli\u003E\u003Cli\u003Eанализировать и&nbsp;устранять проблемы на&nbsp;этапе верификации разработанного устройства;\u003C\u002Fli\u003E\u003Cli\u003Eпроверять прототипы с&nbsp;использованием современной измерительной аппаратуры.\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003EТемы курса:\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003EВведение. История развития проблем целостности сигналов и&nbsp;питания.\u003C\u002Fli\u003E\u003Cli\u003EОсновные положения.\u003C\u002Fli\u003E\u003Cli\u003EИдеальная линия передач.\u003C\u002Fli\u003E\u003Cli\u003EПерекрестные помехи.\u003C\u002Fli\u003E\u003Cli\u003EРеальные проводники.\u003C\u002Fli\u003E\u003Cli\u003EДиэлектрики.\u003C\u002Fli\u003E\u003Cli\u003EОсновы теории цепей.\u003C\u002Fli\u003E\u003Cli\u003EСхемотехника.\u003C\u002Fli\u003E\u003Cli\u003EЭквализация.\u003C\u002Fli\u003E\u003Cli\u003EБюджет.\u003C\u002Fli\u003E\u003Cli\u003EПримеры высокоскоростных интерфейсов.\u003C\u002Fli\u003E\u003Cli\u003EЦелостность питания.\u003C\u002Fli\u003E\u003Cli\u003EИзмерения и&nbsp;моделирование.\u003C\u002Fli\u003E\u003C\u002Fol\u003E"},{"id":"events_58","titleHtml":"Курс «Обеспечение электромагнитной совместимости изделий современной техники»","startDay":"2023-12-18","finishDay":"2023-12-20","startTime":"10:00","finishTime":"17:00","imageUrl":"https:\u002F\u002Fhsto.org\u002Fwebt\u002Fsl\u002Flv\u002Fe0\u002Fsllve0c9tpnoqnc20iidt7p9ue8.jpeg","eventUrl":"https:\u002F\u002Fu.habr.com\u002Fcldr_nsh","geo":["Москва"],"isOnline":false,"descriptionHtml":"\u003Cp\u003EНовая Инженерная Школа проводит курс повышения квалификации, направленный на&nbsp;формирование или совершенствование профессиональных компетенций в&nbsp;области внутрисистемной электромагнитной совместимости (ЭМС) изделий современной техники для конструкторов радиоэлектронных средств (РЭС).\u003C\u002Fp\u003E \u003Cp\u003EНастоящая программа рассчитана на&nbsp;инженерно-технических работников с&nbsp;высшим профессиональным образованием, занимающихся конструкторским и&nbsp;технологическим проектированием радиоэлектронной, электронно-вычислительной аппаратуры, систем автоматики и&nbsp;управления и&nbsp;т.п. различного назначения, а&nbsp;также на&nbsp;руководителей среднего звена проектных организаций.\u003C\u002Fp\u003E \u003Cp\u003EТемы курса:\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003EВведение в&nbsp;проблему ЭМС.\u003C\u002Fli\u003E \u003Cli\u003EСертификационные требования ЭМС.\u003C\u002Fli\u003E \u003Cli\u003EСхемотехнические методы обеспечения ЭМС.\u003C\u002Fli\u003E \u003Cli\u003EПомехи в&nbsp;межсоединениях.\u003C\u002Fli\u003E \u003Cli\u003EЭкранирование аппаратуры.\u003C\u002Fli\u003E \u003Cli\u003EМощные электромагнитные воздействия на&nbsp;технические средства и&nbsp;методы защиты.\u003C\u002Fli\u003E \u003Cli\u003EОбеспечение радиационной стойкости современной РЭА.\u003C\u002Fli\u003E\u003C\u002Fol\u003E"}]}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.62e21544.js" defer></script><script src="https://assets.habr.com/habr-web/js/7298.c8f1d73c.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.5e6fa0f9.js" defer></script>



    <script async src="https://www.googletagmanager.com/gtag/js?id=G-S28W1WC23F"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
<script src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true"></script>
</body>
</html>
